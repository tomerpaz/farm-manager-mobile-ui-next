{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/FieldMap.js"],"sourcesContent":["import React from 'react'\nimport { Box } from '@mui/material'\nimport { CircleMarker, MapContainer, Polygon, TileLayer, useMapEvents } from 'react-leaflet'\nimport SatelliteMapProvider from '../../components/map/SatelliteMapProvider'\nimport GeoLocation from '../../components/GeoLocation'\nimport { getFieldCenter, isArrayEmpty } from '../FarmUtil'\n\nconst FieldMap = ({ field, height, tile, setMap, onClick, points, setCenter, center, setZoom, zoom }) => {\n\n    function HandleMapEvents(d) {\n\n        const m = useMapEvents({\n\n            click: (e) => {\n                if (onClick) {\n                    onClick(e, field, 'map');\n                }\n            },\n            dragend: (e) => {\n                if (setCenter) {\n                    setCenter(e.target.getCenter())\n                }\n            },\n            zoom: (e) => {\n                if (setZoom) {\n                    setZoom(e.target.getZoom())\n                }\n            },\n            // click: (e) => {\n            //     change('lng', e.latlng.lng.toFixed(5));\n            //     change('lat', e.latlng.lat.toFixed(5));\n            // }\n        })\n        return <div></div>\n    }\n\n\n    const hasPoints = Array.isArray(points);\n\n\n    return (\n        <Box flex={1} id=\"map\" dir='ltr'>\n            <MapContainer style={{ height: height, width: '100%' }} center={getFieldCenter(center,field)} zoom={zoom ? zoom : field.zoom} scrollWheelZoom={false}\n                ref={setMap}\n            >\n                <SatelliteMapProvider />\n                <GeoLocation />\n                {tile && <TileLayer\n                    attribution='Farm Manager'\n                    url={tile}\n                    bounds={field.geoPoints}\n                />}\n                <Polygon\n                    eventHandlers={{\n                        click: (e) => {\n                            if (onClick) {\n                                onClick(e, field, 'polygon');\n\n                            }\n                            // mapCliecked(e, f, 'polygon');\n                            // navigate(`/field/map/${f.id}/info`)\n                        }\n                    }}\n                    color={field.color}\n                    fillColor={field.color}\n                    positions={field.geoPoints}>\n                </Polygon>\n                {hasPoints && points.map(e =>\n                //    <Circle center={[e.lat, e.lng]} radius={10}  />\n                {\n                    return (\n                        <CircleMarker\n\n                            eventHandlers={{\n                                click: (event) => {\n                                    if (onClick) {\n                                        onClick(event, e, 'point');\n                                    }\n                                    // mapCliecked(e, f, 'polygon');\n                                    // navigate(`/field/map/${f.id}/info`)\n                                }\n                            }}\n                            key={e.id} radius={12}\n                            color={e.color}\n                            weight={4}\n                            fillColor={e.fillColor}\n                            fillOpacity={1}\n                            center={[e.lat, e.lng]}\n                        ></CircleMarker>\n                    )\n                }\n\n\n                )}\n                <HandleMapEvents />\n\n            </MapContainer>\n        </Box>\n    )\n}\nexport default FieldMap"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;AAEA,IAAM,WAAW;QAAG,cAAA,OAAO,eAAA,QAAQ,aAAA,MAAM,eAAA,QAAQ,gBAAA,SAAS,eAAA,QAAQ,kBAAA,WAAW,eAAA,QAAQ,gBAAA,SAAS,aAAA;QAEjF,kBAAT,SAAS,gBAAgB,CAAC;;QAEtB,IAAM,IAAI,IAAA,mKAAY,EAAC;YAEnB,KAAK;4DAAE,SAAC;oBACJ,IAAI,SAAS;wBACT,QAAQ,GAAG,OAAO;oBACtB;gBACJ;;YACA,OAAO;4DAAE,SAAC;oBACN,IAAI,WAAW;wBACX,UAAU,EAAE,MAAM,CAAC,SAAS;oBAChC;gBACJ;;YACA,IAAI;4DAAE,SAAC;oBACH,IAAI,SAAS;wBACT,QAAQ,EAAE,MAAM,CAAC,OAAO;oBAC5B;gBACJ;;QAKJ;QACA,qBAAO,6LAAC;;;;;IACZ;;OAzBS;;YAEK,mKAAY;;;IA0B1B,IAAM,YAAY,MAAM,OAAO,CAAC;IAGhC,qBACI,6LAAC,kMAAG;QAAC,MAAM;QAAG,IAAG;QAAM,KAAI;kBACvB,cAAA,6LAAC,0KAAY;YAAC,OAAO;gBAAE,QAAQ;gBAAQ,OAAO;YAAO;YAAG,QAAQ,IAAA,0IAAc,EAAC,QAAO;YAAQ,MAAM,OAAO,OAAO,MAAM,IAAI;YAAE,iBAAiB;YAC3I,KAAK;;8BAEL,6LAAC,8JAAoB;;;;;8BACrB,6LAAC,8IAAW;;;;;gBACX,sBAAQ,6LAAC,oKAAS;oBACf,aAAY;oBACZ,KAAK;oBACL,QAAQ,MAAM,SAAS;;;;;;8BAE3B,6LAAC,gKAAO;oBACJ,eAAe;wBACX,OAAO,SAAC;4BACJ,IAAI,SAAS;gCACT,QAAQ,GAAG,OAAO;4BAEtB;wBACA,gCAAgC;wBAChC,sCAAsC;wBAC1C;oBACJ;oBACA,OAAO,MAAM,KAAK;oBAClB,WAAW,MAAM,KAAK;oBACtB,WAAW,MAAM,SAAS;;;;;;gBAE7B,aAAa,OAAO,GAAG,CAAC,SAAA,GACzB,qDAAqD;;oBAEjD,qBACI,6LAAC,0KAAY;wBAET,eAAe;4BACX,OAAO,SAAC;gCACJ,IAAI,SAAS;oCACT,QAAQ,OAAO,GAAG;gCACtB;4BACA,gCAAgC;4BAChC,sCAAsC;4BAC1C;wBACJ;wBACW,QAAQ;wBACnB,OAAO,EAAE,KAAK;wBACd,QAAQ;wBACR,WAAW,EAAE,SAAS;wBACtB,aAAa;wBACb,QAAQ;4BAAC,EAAE,GAAG;4BAAE,EAAE,GAAG;yBAAC;uBALjB,EAAE,EAAE;;;;;gBAQrB;8BAIA,6LAAC;;;;;;;;;;;;;;;;AAKjB;KA5FM;uCA6FS"}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/InfoLine.js"],"sourcesContent":["import { Box, Divider, Typography } from '@mui/material'\nimport React from 'react'\n\nconst InfoLine = ({ value, title }) => {\n    if (value) {\n        return (\n            <>\n            <Box marginTop={1} marginLeft={1} marginRight={1} display={'flex'} flex={1} alignItems={'center'} justifyContent={'space-between'} flexDirection={'row'} >\n                <Typography variant=\"subtitle1\" color=\"text.secondary\">\n                    {title}:\n                </Typography>\n                <Box paddingLeft={1}/>\n                <Typography variant=\"subtitle1\" >\n                    {value}\n                </Typography>\n                \n            </Box>\n            <Divider/>\n            </>\n        )\n    }\n}\n\nexport default InfoLine"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AACA;;;;;;AAEA,IAAM,WAAW;QAAG,cAAA,OAAO,cAAA;IACvB,IAAI,OAAO;QACP,qBACI;;8BACA,6LAAC,kMAAG;oBAAC,WAAW;oBAAG,YAAY;oBAAG,aAAa;oBAAG,SAAS;oBAAQ,MAAM;oBAAG,YAAY;oBAAU,gBAAgB;oBAAiB,eAAe;;sCAC9I,6LAAC,8NAAU;4BAAC,SAAQ;4BAAY,OAAM;;gCACjC;gCAAM;;;;;;;sCAEX,6LAAC,kMAAG;4BAAC,aAAa;;;;;;sCAClB,6LAAC,8NAAU;4BAAC,SAAQ;sCACf;;;;;;;;;;;;8BAIT,6LAAC,kNAAO;;;;;;;IAGhB;AACJ;KAlBM;uCAoBS"}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/FieldInfo.js"],"sourcesContent":["import { Box, Typography } from '@mui/material'\nimport React, { useState } from 'react'\nimport { useParams } from 'react-router'\nimport FieldMap from './FieldMap'\nimport { useGetUserDataQuery } from '../../features/auth/authApiSlice';\nimport { useSelector } from 'react-redux'\nimport { selectLang } from '../../features/app/appSlice';\nimport InfoLine from './InfoLine'\nimport ActionSpeedDial from '../../components/ui/ActionSpeedDial'\nimport { daysDiffToday, displayFieldName, getPointTypeColor, getPointTypes, parseDate, trap } from '../FarmUtil'\nimport { useGetFieldPointsQuery } from '../../features/points/pointsApiSlice'\nimport LayersDialog from '../layers/LayersDialog'\nimport FieldPointDialog from '../point/FieldPointDialog'\n\nconst FieldInfo = ({ field }) => {\n\n    const { fieldId } = useParams()\n\n    const text = useSelector(selectLang)\n\n    const { data: user } = useGetUserDataQuery()\n\n\n    const { data: points, isLoading: isLoadingPoints, isFetching: isFetchingPoints } = useGetFieldPointsQuery({ fieldId });\n\n\n    const [point, setPoint] = useState(null);\n    const [dialog, setDialog] = React.useState(null);\n\n    const onFieldMapClick = (event, element, type) => {\n        // console.log('onFieldMapClick', /*event, element*/ type);\n        // if (type === 'map') {\n        //     const p = { id: null, lat: event.latlng.lat, lng: event.latlng.lng, fieldId, \n        //         name: `${displayFieldName(field)} - ${points.length+1} `, \n        //         pest: null,\n        //         expiry: null,\n        //         active: true, type: getPointTypes()[0] };\n        //     setPoint(p);\n        //     //setDialog('point')\n        // }\n        // if (type === 'point') {\n        //     event.originalEvent.view.L.DomEvent.stopPropagation(event)\n        //     setPoint(element);\n        // }\n    }\n\n    const handleCloseEditPoint = (action, e) => {\n       // setEditPoint(false);\n      // console.log(action)\n        if (action === 'delete') {\n          //handleClose(null);\n        } else if ((action === 'save')) {\n          setPoint(null);\n        }\n       setPoint(null);\n    \n      }\n\n    const height = (window.innerHeight - 120) / 2;\n\nconst buildFieldPoints = (arr)=> {\n    return arr?.map(e => {\n\n        const val = { ...e, color: getPointTypeColor(e.type), fillColor: getPointTypeColor(e.type) }\n        return val;\n    });\n   \n}\n\n    const src = 'map'\n    return (\n        <Box display={'flex'} flex={1} alignItems={'stretch'} justifyContent={'space-between'} flexDirection={'column'}>\n            {field.polygon && <FieldMap field={field} height={height} onClick={onFieldMapClick}  points={[]/*buildFieldPoints(points)*/} />}\n            {!field.plantation && !field.endDate && <InfoLine value={daysDiffToday(new Date(field.startDate))} title={text.daysSinceSeedling} />}\n            <InfoLine value={field.siteName} title={text.site} />\n            <InfoLine value={field.parentFieldName} title={text.parentField} />\n            <InfoLine value={field.season} title={text.season} />\n           {field.endDate && <InfoLine value={`${parseDate(field.endDate)}`} title={text.end} />}\n            <InfoLine value={field.tag1Name} title={field.tag1Type} />\n            <InfoLine value={field.tag2Name} title={field.tag2Type} />\n            {field.maturity &&  <InfoLine value={`${parseDate(field.maturity)}`} title={text.maturity} />}\n            <InfoLine value={field.density} title={text.density} />\n            <InfoLine value={field.plantSpacing} title={text.plantSpacing} />\n            <InfoLine value={field.rowSpacing} title={text.rowSpacing} />\n            <InfoLine value={field.note} title={text.note} />\n            <Box height={150}/>\n            {point && <FieldPointDialog open={point !== null} deletable={true} defaultValues={point} handleClose={handleCloseEditPoint} types={getPointTypes()} />}\n\n            <ActionSpeedDial bottom={100} map={true} plan={false} fieldId={fieldId} />\n            {/* <LayersDialog/> */}\n        </Box>\n    )\n}\n\nexport default FieldInfo"],"names":[],"mappings":"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"}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/dash/WaterBarchart.js"],"sourcesContent":["import { BarChart, Bar, LabelList, XAxis, ResponsiveContainer, Area, AreaChart, YAxis, CartesianGrid, Tooltip } from \"recharts\";\nimport { isArrayEmpty } from \"../../FarmUtil\";\n\nconst COLOR = '#1c84c6';\n\n\n\nconst renderCustomizedLabel = (props) => {\n    const { x, y, width, height, value } = props;\n    const radius = 10;\n\n    return (\n        <g style={{fontSize: 13}}>\n            <text\n                x={x + width / 2}\n                y={y - radius}\n                // fill=\"white\"\n                textAnchor=\"middle\"\n                dominantBaseline=\"middle\"\n            >\n                {value.toFixed(0)}\n            </text>\n        </g>\n    );\n};\n\nexport default function WaterBarchart({data, text, waterUnit}) {\n    // areaUnit={text[user.waterUnit]}\n    if(isArrayEmpty(data)){\n        return <></>\n    }\n    return (\n        <ResponsiveContainer width=\"100%\" height={230}>\n\n            <BarChart\n\n                // width={150} height={40}\n                data={data}\n                margin={{\n                    top: 18,\n                    // right: 30,\n                    // left: 20,\n                    bottom: 18\n                }}\n            >\n                <defs>\n                    <linearGradient id=\"colorWater\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\" stopColor={COLOR} stopOpacity={0.8} />\n                        <stop offset=\"95%\" stopColor={COLOR} stopOpacity={0} />\n                    </linearGradient>\n                </defs>\n                <Bar dataKey=\"value\" fill=\"url(#colorWater)\" minPointSize={5}>\n                    <LabelList dataKey=\"value\" content={renderCustomizedLabel} />\n                </Bar>\n                <XAxis\n                    label={{ value: `${text[waterUnit]}/${text.month}`, position: 'bottom' }}\n                    axisLine={false} tickLine={false} dataKey=\"key\" />\n            </BarChart>\n        </ResponsiveContainer>\n    );\n}"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAEA,IAAM,QAAQ;AAId,IAAM,wBAAwB,SAAC;IAC3B,IAAQ,IAA+B,MAA/B,GAAG,IAA4B,MAA5B,GAAG,QAAyB,MAAzB,OAAO,SAAkB,MAAlB,QAAQ,QAAU,MAAV;IAC7B,IAAM,SAAS;IAEf,qBACI,6LAAC;QAAE,OAAO;YAAC,UAAU;QAAE;kBACnB,cAAA,6LAAC;YACG,GAAG,IAAI,QAAQ;YACf,GAAG,IAAI;YACP,eAAe;YACf,YAAW;YACX,kBAAiB;sBAEhB,MAAM,OAAO,CAAC;;;;;;;;;;;AAI/B;AAEe,SAAS,cAAc,KAAuB;QAAtB,OAAD,MAAC,MAAM,OAAP,MAAO,MAAM,YAAb,MAAa;IAC/C,kCAAkC;IAClC,IAAG,IAAA,wIAAY,EAAC,OAAM;QAClB,qBAAO;IACX;IACA,qBACI,6LAAC,6LAAmB;QAAC,OAAM;QAAO,QAAQ;kBAEtC,cAAA,6LAAC,mKAAQ;YAEL,0BAA0B;YAC1B,MAAM;YACN,QAAQ;gBACJ,KAAK;gBACL,aAAa;gBACb,YAAY;gBACZ,QAAQ;YACZ;;8BAEA,6LAAC;8BACG,cAAA,6LAAC;wBAAe,IAAG;wBAAa,IAAG;wBAAI,IAAG;wBAAI,IAAG;wBAAI,IAAG;;0CACpD,6LAAC;gCAAK,QAAO;gCAAK,WAAW;gCAAO,aAAa;;;;;;0CACjD,6LAAC;gCAAK,QAAO;gCAAM,WAAW;gCAAO,aAAa;;;;;;;;;;;;;;;;;8BAG1D,6LAAC,6JAAG;oBAAC,SAAQ;oBAAQ,MAAK;oBAAmB,cAAc;8BACvD,cAAA,6LAAC,yKAAS;wBAAC,SAAQ;wBAAQ,SAAS;;;;;;;;;;;8BAExC,6LAAC,iKAAK;oBACF,OAAO;wBAAE,OAAO,AAAC,GAAqB,OAAnB,IAAI,CAAC,UAAU,EAAC,KAAc,OAAX,KAAK,KAAK;wBAAI,UAAU;oBAAS;oBACvE,UAAU;oBAAO,UAAU;oBAAO,SAAQ;;;;;;;;;;;;;;;;;AAI9D;KAlCwB"}},
    {"offset": {"line": 666, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/dash/FieldFertilizerTable.js"],"sourcesContent":["import { useSelector } from 'react-redux'\nimport { selectLang } from '../../../features/app/appSlice'\nimport { tableHeaderSx, tableCellSx, getUnitText, formatNumber, parseDate } from '../../FarmUtil';\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material'\n\nconst FieldFertilizerTable = ({ fertilizers }) => {\n    const text = useSelector(selectLang)\n    return (\n        <TableContainer >\n            <Table size=\"small\" sx={{ margin: 0, padding: 0 }} aria-label=\"a dense table\">\n                <TableHead>\n                    <TableRow  >\n                        <TableCell sx={tableHeaderSx} >{text.name}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.unit}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.qty}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.date}</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {fertilizers.map((row, index) =>\n                        <TableRow key={index}>\n                            <TableCell sx={tableCellSx} >{row.resource.name}</TableCell>\n                            <TableCell sx={tableCellSx}>{getUnitText(row.resource.usageUnit, null, text)}</TableCell>\n                            <TableCell sx={tableCellSx}>{formatNumber(row.qty)}</TableCell>\n                            <TableCell sx={tableCellSx}>{parseDate(row.date)}</TableCell>\n                        </TableRow>\n                    )}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\nexport default FieldFertilizerTable"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AAEA,IAAM,uBAAuB;QAAG,oBAAA;;IAC5B,IAAM,OAAO,IAAA,2KAAW,EAAC,mJAAU;IACnC,qBACI,6LAAC,8OAAc;kBACX,cAAA,6LAAC,0MAAK;YAAC,MAAK;YAAQ,IAAI;gBAAE,QAAQ;gBAAG,SAAS;YAAE;YAAG,cAAW;;8BAC1D,6LAAC,0NAAS;8BACN,cAAA,6LAAC,sNAAQ;;0CACL,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAI,KAAK,IAAI;;;;;;0CACzC,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,IAAI;;;;;;0CACxC,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,GAAG;;;;;;0CACvC,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,IAAI;;;;;;;;;;;;;;;;;8BAGhD,6LAAC,0NAAS;8BACL,YAAY,GAAG,CAAC,SAAC,KAAK;6CACnB,6LAAC,sNAAQ;;8CACL,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAI,IAAI,QAAQ,CAAC,IAAI;;;;;;8CAC/C,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAA,uIAAW,EAAC,IAAI,QAAQ,CAAC,SAAS,EAAE,MAAM;;;;;;8CACvE,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAA,wIAAY,EAAC,IAAI,GAAG;;;;;;8CACjD,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAA,qIAAS,EAAC,IAAI,IAAI;;;;;;;2BAJpC;;;;;;;;;;;;;;;;;;;;;;AAWvC;GA1BM;;QACW,2KAAW;;;KADtB;uCA2BS"}},
    {"offset": {"line": 824, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/dash/FieldPesticdeTable.js"],"sourcesContent":["import { useSelector } from 'react-redux'\nimport { selectLang } from '../../../features/app/appSlice'\nimport { tableHeaderSx, tableCellSx, getUnitText, formatNumber, parseDate, daysDiff, newDate } from '../../FarmUtil';\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material'\n\nconst FieldPesticdeTable = ({ pesticides }) => {\n    const text = useSelector(selectLang)\n    return (\n        <TableContainer >\n            <Table size=\"small\" sx={{ margin: 0, padding: 0 }} aria-label=\"a dense table\">\n                <TableHead>\n                    <TableRow  >\n                        <TableCell sx={tableHeaderSx} >{text.name}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.unit}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.qty}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.dosage}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.date}</TableCell>\n                        <TableCell sx={tableHeaderSx}>{text.days}</TableCell>\n\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {pesticides.map((row, index) =>\n                        <TableRow key={index}>\n                            <TableCell sx={tableCellSx} >{row.resource.name}</TableCell>\n                            <TableCell sx={tableCellSx}>{getUnitText(row.resource.usageUnit, null, text)}</TableCell>\n                            <TableCell sx={tableCellSx}>{formatNumber(row.qty)}</TableCell>\n                            <TableCell sx={tableCellSx}>{row.dosage}</TableCell>\n                            <TableCell sx={tableCellSx}>{parseDate(row.date)}</TableCell>\n                            <TableCell sx={tableCellSx}>{daysDiff(new Date(row.date),newDate())}</TableCell>\n                        </TableRow>\n                    )}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\nexport default FieldPesticdeTable"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AAEA,IAAM,qBAAqB;QAAG,mBAAA;;IAC1B,IAAM,OAAO,IAAA,2KAAW,EAAC,mJAAU;IACnC,qBACI,6LAAC,8OAAc;kBACX,cAAA,6LAAC,0MAAK;YAAC,MAAK;YAAQ,IAAI;gBAAE,QAAQ;gBAAG,SAAS;YAAE;YAAG,cAAW;;8BAC1D,6LAAC,0NAAS;8BACN,cAAA,6LAAC,sNAAQ;;0CACL,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAI,KAAK,IAAI;;;;;;0CACzC,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,IAAI;;;;;;0CACxC,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,GAAG;;;;;;0CACvC,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,MAAM;;;;;;0CAC1C,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,IAAI;;;;;;0CACxC,6LAAC,0NAAS;gCAAC,IAAI,yIAAa;0CAAG,KAAK,IAAI;;;;;;;;;;;;;;;;;8BAIhD,6LAAC,0NAAS;8BACL,WAAW,GAAG,CAAC,SAAC,KAAK;6CAClB,6LAAC,sNAAQ;;8CACL,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAI,IAAI,QAAQ,CAAC,IAAI;;;;;;8CAC/C,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAA,uIAAW,EAAC,IAAI,QAAQ,CAAC,SAAS,EAAE,MAAM;;;;;;8CACvE,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAA,wIAAY,EAAC,IAAI,GAAG;;;;;;8CACjD,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAI,MAAM;;;;;;8CACvC,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAA,qIAAS,EAAC,IAAI,IAAI;;;;;;8CAC/C,6LAAC,0NAAS;oCAAC,IAAI,uIAAW;8CAAG,IAAA,oIAAQ,EAAC,IAAI,KAAK,IAAI,IAAI,GAAE,IAAA,mIAAO;;;;;;;2BANrD;;;;;;;;;;;;;;;;;;;;;;AAavC;GA/BM;;QACW,2KAAW;;;KADtB;uCAgCS"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/dash/FieldDashboard.js"],"sourcesContent":["import { useState } from 'react';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport { Avatar, Card, CardContent, CardHeader, Collapse, IconButton, Typography } from '@mui/material';\nimport { blue, green, red, orange } from '@mui/material/colors';\nimport { BugReport, ExpandMore, NaturePeople, OpacityOutlined, ScatterPlot } from '@mui/icons-material';\nimport WaterBarchart from './WaterBarchart';\nimport { selectFieldDashboardYear, selectCurrentYear, selectLang } from '../../../features/app/appSlice';\nimport { useSelector } from 'react-redux';\nimport { useGetUserDataQuery } from '../../../features/auth/authApiSlice';\nimport { formatNumber } from '../../FarmUtil';\nimport { useGetFieldDashBoardQuery } from '../../../features/dashboard/dashboardApiSlice';\nimport { useParams } from 'react-router';\nimport Loading from '../../../components/Loading';\nimport FieldFertilizerTable from './FieldFertilizerTable';\nimport FieldPesticdeTable from './FieldPesticdeTable';\n\n const FIELD_DASH_PESTICIDES = 'field_dash_pesticides'\n const FIELD_DASH_FERTILIZERS = 'field_dash_pesticides'\n\n// const element = document.getElementById(FIELD_DASH_PESTICIDES);\n// if (element) {\n//     // ðŸ‘‡ Will scroll smoothly to the top of the next section\n//     element.scrollIntoView({ behavior: 'smooth' });\n// }\n\nconst elevation = 4;\nconst cardHeaderPadding = 1;\n\nconst FieldDashboard = () => {\n\n  const text = useSelector(selectLang)\n  const { data: user } = useGetUserDataQuery()\n\n  const [expandedPesticides, setPxpandedPesticides] = useState(false);\n  const [expandedFertilizers, setExpandedFertilizers] = useState(false);\n\n  const { fieldId } = useParams()\n\n  const year = useSelector(selectFieldDashboardYear)\n  const {\n    data,\n    isLoading,\n    isSuccess,\n    isError,\n    error\n  } = useGetFieldDashBoardQuery({ fieldId, year })\n\n\n  if (isLoading) {\n    return <Loading />\n  }\n\n  return (\n    <Box sx={{ width: '100%', height: '100%', paddingBottom: 5 }}>\n      <Grid container rowSpacing={1} columnSpacing={{ xs: 1, sm: 1, md: 1 }}>\n        <Grid size={6}>\n          <Card elevation={elevation}>\n            <CardHeader sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: orange[500] }}>\n                <NaturePeople />\n              </Avatar>}\n              title={<Typography whiteSpace={'nowrap'} variant='body2'>{`${formatNumber(data.weightTotal)} ${text[user.weightUnit]}`}</Typography>}\n              subheader={<Typography whiteSpace={'nowrap'} variant='body2'>{`${formatNumber(data.weightPerAreaUnit)}   ${text[user.weightUnit]}/${text[user.areaUnit]}`}</Typography>}\n            />\n          </Card>\n        </Grid>\n        <Grid size={6}>\n          <Card elevation={elevation} >\n            <CardHeader sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: red[500] }}>\n                {user.currency}\n              </Avatar>}\n              title={`${formatNumber(data.expenseTotal)}`}\n              subheader={<Typography whiteSpace={'nowrap'} variant='body2'>{`${formatNumber(data.expensePerAreaUnit)}/${text[user.areaUnit]}`}</Typography>}\n            />\n          </Card>\n        </Grid>\n        <Grid size={4} >\n          <Card elevation={elevation}>\n            <CardHeader sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: 'inherit', color: blue[700], fontWeight: 'bolder' }} aria-label=\"recipe\">K</Avatar>}\n              title={<Typography whiteSpace={'nowrap'} variant='body2'>{`${data.kperAreaUnit} /`}</Typography>}\n              subheader={text[user.areaUnit]}\n            />\n          </Card>\n        </Grid>\n        <Grid size={4} >\n          <Card elevation={elevation}>\n            <CardHeader sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: 'inherit', color: green[700], fontWeight: 'bolder' }} aria-label=\"recipe\">P</Avatar>}\n              title={<Typography whiteSpace={'nowrap'} variant='body2'>{`${data.pperAreaUnit} /`}</Typography>}\n              subheader={text[user.areaUnit]}\n            />\n          </Card>\n        </Grid>\n        <Grid size={4}>\n          <Card elevation={elevation} >\n            <CardHeader sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: 'inherit', color: red[700], fontWeight: 'bolder' }} aria-label=\"recipe\">N</Avatar>}\n              title={<Typography whiteSpace={'nowrap'} variant='body2'>{`${data.nperAreaUnit} /`}</Typography>}\n              subheader={text[user.areaUnit]}\n            />\n          </Card>\n        </Grid>\n        <Grid size={12}>\n          <Card elevation={elevation}>\n            <CardHeader sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: blue[500] }}>\n                <OpacityOutlined />\n              </Avatar>}\n              title={`${formatNumber(data.waterTotal)} ${text[user.waterUnit]}`}\n              subheader={`${formatNumber(data.waterPerAreaUnit)} ${text[user.waterUnit]}/${text[user.areaUnit]}`}\n            />\n            <CardContent sx={{ padding: 1 }}>\n              <WaterBarchart data={data.water} text={text} waterUnit={user.waterUnit} />\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid size={12}>\n          <Card elevation={elevation}>\n            <CardHeader onClick={() => setPxpandedPesticides(!expandedPesticides)} sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: green[500] }} aria-label=\"recipe\"><BugReport /></Avatar>}\n              title={text.pesticides}\n              action={\n                <IconButton aria-label=\"pesticides\">\n                  <ExpandMore />\n                </IconButton>\n              }\n            // subheader=\"Dunam\"\n            />\n            <Collapse in={expandedPesticides} timeout=\"auto\" unmountOnExit>\n              <CardContent>\n                <FieldPesticdeTable pesticides={data.pesticides} />\n              </CardContent>\n            </Collapse>\n          </Card>\n        </Grid>\n        <Grid size={12}>\n          <Card elevation={elevation}>\n            <CardHeader onClick={() => setExpandedFertilizers(!expandedFertilizers)} sx={{ padding: cardHeaderPadding }}\n              avatar={<Avatar sx={{ bgcolor: orange[500] }} aria-label=\"recipe\"><ScatterPlot /></Avatar>}\n              title={text.fertilizers}\n              action={\n                <IconButton aria-label=\"fertilizers\">\n                  <ExpandMore />\n                </IconButton>\n              }\n            />\n            <Collapse in={expandedFertilizers} timeout=\"auto\" unmountOnExit>\n              <CardContent>\n                <FieldFertilizerTable fertilizers={data.fertilizers} />\n              </CardContent>\n            </Collapse>\n          </Card>\n        </Grid>\n      </Grid>\n    </Box >\n  );\n}\n\nexport default FieldDashboard;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1601, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/FieldHistory.js"],"sourcesContent":["import { Fragment } from 'react'\nimport { Avatar, List, ListItem, ListItemText, ListItemAvatar, Box, Typography, Divider } from '@mui/material';\nimport { useSelector } from 'react-redux';\nimport { selectActivityFreeTextFilter, selectEndDateFilter, selectLang, selectSelectedActivityFilterOptions, selectStartDateFilter } from '../../features/app/appSlice';\nimport { useNavigate, useParams } from 'react-router';\nimport { useGetActivitiesFieldQuery } from '../../features/activities/activitiesApiSlice';\nimport Loading from '../../components/Loading';\nimport ListPager from '../../components/ui/ListPager';\nimport ActivityTypeIcon from '../../icons/ActivityTypeIcon';\nimport ActivitiesFilter from '../../components/filters/ActivitiesFilter';\nimport { activityDescription, buildActiviesFilter, buildActiviyFilter, parseDate } from '../FarmUtil';\n\nconst FieldHistory = () => {\n  const { fieldId, page, src } = useParams()\n  const navigate = useNavigate();\n\n  const height = window.innerHeight - 300;\n\n  const maxResult = 20;\n  const isPlan = false;\n  const orderBy = 'execution';\n  const dir = 'desc';\n  const text = useSelector(selectLang)\n\n  const startDateFilter = useSelector(selectStartDateFilter);\n  const endDateFilter = useSelector(selectEndDateFilter);\n  const activityFreeTextFilter = useSelector(selectActivityFreeTextFilter);\n  const selectedFilters = useSelector(selectSelectedActivityFilterOptions);\n\n  const filter = buildActiviesFilter(startDateFilter, endDateFilter, activityFreeTextFilter, selectedFilters);\n\n  // useEffect(() => {\n  //   if(page !== 0){\n  //     navigate(`/field/${src}/${fieldId}/history/0`)\n  //   }\n  // }, [activityFreeTextFilter]);\n\n  const {\n    data,\n    isLoading,\n    isSuccess,\n    isError,\n    error\n  } = useGetActivitiesFieldQuery({ fieldId, page, maxResult, isPlan, orderBy, dir, filter })\n\n\n  if (!data || isLoading) {\n    return <Loading />\n  }\n\n\n  const renderRows = () => {\n    if (isSuccess && data) {\n      const activities = data.content;\n\n      return activities.map(e =>\n\n        <Fragment key={e.id}>\n          <ListItem onClick={() => navigate(`/activity/fh/${e.uuid}`)}>\n            <ListItemAvatar>\n              <Avatar sx={{ bgcolor: 'white' }}>\n                <ActivityTypeIcon type={e.type} />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={\n              < Box display={'flex'} flexDirection={'row'} flex={1} justifyContent={'space-between'}>\n                <Typography >\n                  {`${activityDescription(e, text)}`}\n                </Typography>\n                <Typography>\n                  {`${e.reference}`}\n                </Typography>\n              </Box>\n            } secondary={parseDate(e.execution)} />\n          </ListItem>\n          <Divider />\n        </Fragment>\n      )\n    }\n  }\n\n  return (\n    <Box>\n      <List sx={{ height, overflow: 'auto', width: '100%', bgcolor: 'background.paper' }}>\n        {renderRows()}\n      </List>\n      <ListPager bottom={90} page={Number(page)} totalPages={data.totalPages} setPage={(value) => navigate(`/field/${src}/${fieldId}/history/${value}`)} />\n      <ActivitiesFilter />\n    </Box>\n  )\n}\n\nexport default FieldHistory"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA,IAAM,eAAe;;IACnB,IAA+B,aAAA,IAAA,4LAAS,KAAhC,UAAuB,WAAvB,SAAS,OAAc,WAAd,MAAM,MAAQ,WAAR;IACvB,IAAM,WAAW,IAAA,8LAAW;IAE5B,IAAM,SAAS,OAAO,WAAW,GAAG;IAEpC,IAAM,YAAY;IAClB,IAAM,SAAS;IACf,IAAM,UAAU;IAChB,IAAM,MAAM;IACZ,IAAM,OAAO,IAAA,2KAAW,EAAC,mJAAU;IAEnC,IAAM,kBAAkB,IAAA,2KAAW,EAAC,8JAAqB;IACzD,IAAM,gBAAgB,IAAA,2KAAW,EAAC,4JAAmB;IACrD,IAAM,yBAAyB,IAAA,2KAAW,EAAC,qKAA4B;IACvE,IAAM,kBAAkB,IAAA,2KAAW,EAAC,4KAAmC;IAEvE,IAAM,SAAS,IAAA,+IAAmB,EAAC,iBAAiB,eAAe,wBAAwB;IAE3F,oBAAoB;IACpB,oBAAoB;IACpB,qDAAqD;IACrD,MAAM;IACN,gCAAgC;IAEhC,IAMI,8BAAA,IAAA,oLAA0B,EAAC;QAAE,SAAA;QAAS,MAAA;QAAM,WAAA;QAAW,QAAA;QAAQ,SAAA;QAAS,KAAA;QAAK,QAAA;IAAO,IALtF,OAKE,4BALF,MACA,YAIE,4BAJF,WACA,YAGE,4BAHF,WACA,UAEE,4BAFF,SACA,QACE,4BADF;IAIF,IAAI,CAAC,QAAQ,WAAW;QACtB,qBAAO,6LAAC,0IAAO;;;;;IACjB;IAGA,IAAM,aAAa;QACjB,IAAI,aAAa,MAAM;YACrB,IAAM,aAAa,KAAK,OAAO;YAE/B,OAAO,WAAW,GAAG,CAAC,SAAA;qCAEpB,6LAAC,yKAAQ;;sCACP,6LAAC,sNAAQ;4BAAC,SAAS;uCAAM,SAAS,AAAC,gBAAsB,OAAP,EAAE,IAAI;;;8CACtD,6LAAC,8OAAc;8CACb,cAAA,6LAAC,8MAAM;wCAAC,IAAI;4CAAE,SAAS;wCAAQ;kDAC7B,cAAA,6LAAC,8IAAgB;4CAAC,MAAM,EAAE,IAAI;;;;;;;;;;;;;;;;8CAGlC,6LAAC,sOAAY;oCAAC,uBACZ,6LAAE,kMAAG;wCAAC,SAAS;wCAAQ,eAAe;wCAAO,MAAM;wCAAG,gBAAgB;;0DACpE,6LAAC,8NAAU;0DACR,AAAC,GAA+B,OAA7B,IAAA,+IAAmB,EAAC,GAAG;;;;;;0DAE7B,6LAAC,8NAAU;0DACR,AAAC,GAAc,OAAZ,EAAE,SAAS;;;;;;;;;;;;oCAGnB,WAAW,IAAA,qIAAS,EAAC,EAAE,SAAS;;;;;;;;;;;;sCAEpC,6LAAC,kNAAO;;;;;;mBAlBK,EAAE,EAAE;;;;;;QAqBvB;IACF;IAEA,qBACE,6LAAC,kMAAG;;0BACF,6LAAC,sMAAI;gBAAC,IAAI;oBAAE,QAAA;oBAAQ,UAAU;oBAAQ,OAAO;oBAAQ,SAAS;gBAAmB;0BAC9E;;;;;;0BAEH,6LAAC,kJAAS;gBAAC,QAAQ;gBAAI,MAAM,OAAO;gBAAO,YAAY,KAAK,UAAU;gBAAE,SAAS,SAAC;2BAAU,SAAS,AAAC,UAAgB,OAAP,KAAI,KAAsB,OAAnB,SAAQ,aAAiB,OAAN;;;;;;;0BACzI,6LAAC,8JAAgB;;;;;;;;;;;AAGvB;GA9EM;;QAC2B,4LAAS;QACvB,8LAAW;QAQf,2KAAW;QAEA,2KAAW;QACb,2KAAW;QACF,2KAAW;QAClB,2KAAW;QAgB/B,oLAA0B;;;KA/B1B;uCAgFS"}},
    {"offset": {"line": 1824, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/ColorPalette.js"],"sourcesContent":["import React from 'react';\n\n\nconst p1 = [\n    { color: '#F1F8E9',  label: '0'},\n    { color: '#DCEDC8',  label: '0.1'},\n    { color: '#C5E1A5',  label: '0.2'},\n    { color: '#AED581',  label: '0.3' },\n    { color: '#9CCC65',  label: '0.4' },\n    { color: '#8BC34A',  label: '0.5' },\n    { color: '#2E7D32',  label: '0.6' ,textColor: '#FAFAFA',},\n    { color: '#1B5E20',  label: '0.7',textColor: '#FAFAFA', },\n    { color: '#1B5E20',  label: '' },\n    { color: '#1B5E20',  label: '' },\n    { color: '#1B5E20',  label: '1',textColor: '#FAFAFA', },\n];\n\nconst p2 = [\n   \n    { color: '#212121', textColor: '#FAFAFA', label: '-1' },\n    { color: '#424242',  label: '' },\n    { color: '#616161', label: '' },\n    { color: '#757575', label: '' },\n    { color: '#9E9E9E', label: ' '},\n    { color: '#BDBDBD',  label: '' },\n    { color: '#E0E0E0',  label: '' },\n    { color: '#EEEEEE',  label: '' },\n    { color: '#F5F5F5',  label: '' },\n    { color: '#FAFAFA',  label: '1' },\n];\n//(0, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6,               0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1)\nconst p3 = [\n\n    { color: '#d7d7d7ff',  label: '0'},\n    { color: '#d7d7d7ff',  label: ''},\n    { color: '#d7d7d7ff',  label: '0.25'},\n    { color: '#a22211ff',  label: '0.3' },\n    { color: '#ed2909ff',  label: '0.35' },\n    { color: '#f8840aff',  label: '0.4' },\n    { color: '#fcc201ff',  label: '0.45' },\n    { color: '#f9eb06ff',  label: '0.5' },\n    { color: '#c9db06ff',  label: '0.55' },\n    { color: '#94c805ff',  label: '0.6' },\n    { color: '#7abb05ff',  label: '0.65' },\n    { color: '#6cb006ff',  label: '0.7' },\n    { color: '#5da604ff',  label: '0.75' },\n    { color: '#4f9b04ff',  label: '0.8' },\n    { color: '#428f05ff',  label: '0.85' },\n    { color: '#338504ff',  label: '0.9',textColor: '#FAFAFA', },\n    { color: '#237a00ff',  label: '0.95' ,textColor: '#FAFAFA',},\n    { color: '#156e00ff',  label: '1' ,textColor: '#FAFAFA',},\n];\nconst p4 = [//0, 0.07, 0.15, 0.23, 0.3, 0.37, 0.45, 0.51, 0.58, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1\n    { color: '#d7d7d7ff',  label: '0' },\n    { color: '#d7d7d7ff',  label: '0.07' },\n    { color: '#ef2e14ff', textColor: \"\", label: '0.15' },\n    { color: '#ed2909ff',  label: '0.23' },\n    { color: '#f8840aff',  label: '0.3' },\n    { color: '#fcc201ff',  label: '0.37' },\n    { color: '#f9eb06ff',  label: '0.45' },\n    { color: '#c9db06ff',  label: '0.51' },\n    { color: '#94c805ff',  label: '0.58' },\n    { color: '#7abb05ff',  label: '0.65' },\n    { color: '#6cb006ff',  label: '0.7' },\n    { color: '#5da604ff',  label: '0.75' },    \n    { color: '#4f9b04ff',  label: '0.8' },\n    { color: '#428f05ff',  label: '0.85' },\n    { color: '#338504ff',  label: '0.9' ,textColor: '#FAFAFA',},\n    { color: '#237a00ff',  label: '0.95' ,textColor: '#FAFAFA',},\n    { color: '#156e00ff',  label: '1' ,textColor: '#FAFAFA',},\n];\n\n// 0,#FF2200\n// 0.07,#FF4D00\n// 0.13,#FF6A00\n// 0.2,#FF8400\n// 0.26,#FFA200\n// 0.33,#FFBB00\n// 0.4,#FFD900\n// 0.46,#FFF200\n// 0.53,#EAF200\n// 0.59,#C5DB00\n// 0.66,#A4C400\n// 0.73,#81B000\n// 0.79,#619900\n// 0.86,#468700\n// 0.93,#287300\n// 1,#006100\n\nconst p5 = [\n    { color: '#FF2200',  label: '0' },\n    { color: '#FF4D00',  label: '0.07' },\n    { color: '#FF6A00', textColor: \"\", label: '0.13' },\n    { color: '#FF8400',  label: '0.2' },\n    { color: '#FFA200',  label: '0.26' },\n    { color: '#FFBB00',  label: '0.33' },\n    { color: '#FFD900',  label: '0.4' },\n    { color: '#FFF200',  label: '0.46' },\n    { color: '#EAF200',  label: '0.53' },\n    { color: '#C5DB00',  label: '0.59' },\n    { color: '#A4C400',  label: '0.66' },\n    { color: '#81B000',  label: '0.73' },    \n    { color: '#619900',  label: '0.79' },\n    { color: '#468700',  label: '0.86' ,textColor: '#FAFAFA', },\n    { color: '#287300',  label: '0.93' ,textColor: '#FAFAFA',},\n    { color: '#006100',  label: '1' ,textColor: '#FAFAFA',},\n]\n\n\nconst palettes = [p1,p2,p3,p4,p5];\nconst ColorPalette = (props) => {\n    const { type } = props;\n    return (\n        <div style={{display: 'flex', flexDirection: 'row', flex: 1, justifyContent: 'center',alignItems: 'center'}}>\n            { palettes[type-1].map((e, index )=> <div  key={index} style={{ flex: e.flex ? e.flex: 1, textAlign: 'center', fontSize: 12, color: e.textColor, backgroundColor: e.color, height: 20 }}> {e.label}</div>)}\n        </div>\n    )\n}\nexport default ColorPalette;\n\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2219, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/FieldImagery.js"],"sourcesContent":["import { ChevronLeft, ChevronLeftOutlined, ChevronRight, ChevronRightOutlined, Cloud, CloudOutlined, MoreVert, Streetview, WbSunnyOutlined } from '@mui/icons-material'\nimport { Box, Button, MenuItem, Select, Typography } from '@mui/material'\nimport React, { useEffect, useState } from 'react'\nimport { useParams } from 'react-router'\nimport ColorPalette from './ColorPalette'\nimport FieldMap from './FieldMap'\nimport { useGetUserDataQuery } from '../../features/auth/authApiSlice';\nimport { useSelector } from 'react-redux'\nimport { selectLang } from '../../features/app/appSlice'\nimport { asShortStringDate, isArrayEmpty, newDate, subtractDays, toUTCDate } from '../FarmUtil'\nimport Loading from '../../components/Loading'\n\n\nconst BASE_URL = 'https://api.agromonitoring.com/agro/1.0/';\nconst IMAGE_SEARCH_URL = `${BASE_URL}image/search`;\nconst S2 = 's2';\n\n\nconst FieldImagery = ({ field }) => {\n\n    const [data, setData] = useState([]);\n    const [viewDate, setViewDate] = useState(null);\n    const [viewClouds, setViewClouds] = useState(0);\n    const [map, setMap] = useState(null);\n    const [selectedView, setSelectedView] = useState(0);\n    const [tile, setTile] = useState(null);\n    const [view, setView] = useState('ndvi');\n    const [palette, setPalette] = useState(3);\n    const [reload, setRealod] = useState(false);\n    const [days, setDays] = useState(30);\n    const [message, setMessage] = useState(null);\n    const text = useSelector(selectLang)\n    const { fieldId } = useParams()\n    const { data: user } = useGetUserDataQuery()\n    const { imageryKey } = user;\n    const type = S2;\n\n    useEffect(() => {\n        const end = toUTCDate(newDate());\n        const start = toUTCDate(subtractDays(newDate(), days));\n        const url = `${IMAGE_SEARCH_URL}?start=${start}&end=${end}&polyid=${field.imageryId}&appid=${imageryKey}&type=${type}`;\n        setData([])\n        fetch(url)\n            .then((response) => response.json())\n            .then((data) => {\n                if (data.message) {\n                    setMessage(data.message)\n                } else {\n                    setMessage(null)\n                    setData(data.sort(function (x, y) { return y.dt - x.dt; }))\n                }\n            }\n            );\n    }, [days])\n\n    useEffect(() => {\n\n        setRealod(true)\n        if (selectedView !== null && data && data.length > selectedView) {\n            setTile(data[selectedView]?.tile[view]?.replace(\"http:\", \"https:\") + '&paletteid=' + palette);\n            setViewDate(asShortStringDate(new Date(data[selectedView].dt * 1000)));\n            setViewClouds(data[selectedView].cl);\n        } else {\n            setTile(null);\n            setSelectedView(0);\n        }\n    }, [selectedView, palette, view, data])\n\n    useEffect(() => {\n        setRealod(false)\n    }, [reload])\n\n    // console.log('tile', tile)\n\n    const height = (window.innerHeight - 350);\n    const dir = text.dir\n\n    return (\n        <Box display={'flex'} flex={1} alignItems={'stretch'} justifyContent={'space-between'} flexDirection={'column'}>\n            {field.polygon && <FieldMap field={field} height={height} tile={reload ? null : tile} setMap={setMap} />}\n            <ColorPalette type={palette}></ColorPalette>\n            {isArrayEmpty(data) && message &&\n                <Box marginTop={2}\n                    display={'flex'} flex={1} alignItems={'center'} justifyContent={'center'}>\n                    <Typography>{message}</Typography>\n                </Box>}\n            {isArrayEmpty(data) && !message && <Loading marginTop={3} />}\n            {!isArrayEmpty(data) &&\n                <Box>\n                    <Box marginTop={1}\n                        display={'flex'} flex={1} alignItems={'center'} justifyContent={'space-between'}\n                    >\n                        <Button disabled={isArrayEmpty(data) || selectedView === 0} onClick={() => setSelectedView(selectedView - 1)} color='secondary' variant=\"outlined\" disableElevation>\n                            {dir === 'rtl' ? <ChevronRightOutlined /> : <ChevronLeftOutlined />}\n                        </Button>\n                        <Typography>\n                            {viewDate}\n                        </Typography>\n                        <Box display={'flex'} flexDirection={'row'}>\n                            <Typography marginLeft={1} marginRight={1}>\n                                {`${viewClouds.toFixed(1)}%`}\n                            </Typography>\n\n                            {(viewClouds <= 10) && <WbSunnyOutlined color='secondary' />}\n                            {(viewClouds > 10) && (viewClouds <= 30) &&\n                                <CloudOutlined color='secondary' />}\n                            {(viewClouds > 30) && <Cloud color='secondary' />}\n                        </Box>\n                        <Button\n                            disabled={isArrayEmpty(data) || selectedView === data.length - 1} onClick={() => setSelectedView(selectedView + 1)}\n                            color='secondary' variant=\"outlined\" disableElevation>\n                            {dir === 'rtl' ? <ChevronLeft /> : <ChevronRight />}\n                        </Button>\n                    </Box>\n                    <Box marginTop={3}\n                        display={'flex'} flex={1} alignItems={'stretch'} justifyContent={'space-between'}>\n\n                        {/* <FormControl sx={{  minWidth: 120 }} size=\"small\"> */}\n\n                        <Select\n                            size=\"small\"\n                            sx={{ flex: 1 }}\n                            value={view}\n                            onChange={(e) => setView(e.target.value)}\n                        >\n                            <MenuItem value={'ndvi'}>NDVI</MenuItem>\n                            <MenuItem value={'evi'}>EVI</MenuItem>\n                            <MenuItem value={'evi2'}>EVI 2</MenuItem>\n                        </Select>\n                        <Select\n                            size=\"small\"\n                            sx={{ marginLeft: 2, marginRight: 2, flex: 1 }}\n                            value={days}\n                            placeholder={text.days}\n                            onChange={(e) => setDays(Number(e.target.value))}\n                        >\n                            <MenuItem value={30}>{`30 ${text.days}`}</MenuItem>\n                            <MenuItem value={60}>{`60 ${text.days}`}</MenuItem>\n                            <MenuItem value={90}>{`90 ${text.days}`}</MenuItem>\n                            <MenuItem value={365}>{`1 ${text.year}`}</MenuItem>\n\n                        </Select>\n                        <Select\n                            size=\"small\"\n                            sx={{ flex: 1 }}\n\n                            value={palette}\n\n                            onChange={(e) => setPalette(e.target.value)}>\n                            <MenuItem value={1}>#1</MenuItem>\n                            <MenuItem value={2}>#2</MenuItem>\n                            <MenuItem value={3}>#3</MenuItem>\n                            <MenuItem value={4}>#4</MenuItem>\n                            <MenuItem value={5}>#5</MenuItem>\n\n                        </Select>\n                    </Box>\n                </Box>}\n        </Box>\n    )\n}\n\n\nexport default FieldImagery\n\n\n\n\n/*\n\n    const { dir, value, onChange } = props;\n    return (\n        <div style={{ display: 'flex', flexDirection: 'row', width: 200, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n            <IconButton onClick={() => onChange(Number(value) - 1)}>\n                {dir === 'rtl' ? <ChevronRight /> : <ChevronLeft />}\n            </IconButton>\n            <Button\n                variant=\"text\"\n                sx={{ color: 'black' }}\n\n            >\n                {value}\n            </Button>\n            <IconButton onClick={() => onChange(Number(value) + 1)}>\n                {dir === 'rtl' ? <ChevronLeft /> : <ChevronRight />}\n            </IconButton>\n        </div>\n    )*/\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2715, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/FieldScouting.js"],"sourcesContent":["import { Box } from '@mui/material'\nimport React, { useState } from 'react'\nimport { useParams } from 'react-router'\nimport FieldMap from './FieldMap'\nimport { useGetUserDataQuery } from '../../features/auth/authApiSlice';\nimport { useGetFieldPointsQuery } from '../../features/points/pointsApiSlice';\nimport FieldPointDialog from '../point/FieldPointDialog';\nimport ScoutingFieldPoint from '../scout/ScoutingFieldPoint';\nimport { useGetFieldScoutsQuery } from '../../features/scout/scoutsApiSlice';\nimport { displayFieldName, isArrayEmpty } from '../FarmUtil';\nimport { buildScoutPoints, SCOUT_TYPES } from '../scout/ScoutingUtil';\nimport { useGetInfectionLevelsQuery, useGetPestsQuery, useGetPestStagesQuery, useGetPlantLocationsQuery } from '../../features/pests/pestsApiSlice';\nimport Loading from '../../components/Loading';\nimport { selectLang } from '../../features/app/appSlice';\nimport { useSelector } from 'react-redux';\n\nconst FieldScouting = ({ field }) => {\n\n    const { fieldId } = useParams()\n    const text = useSelector(selectLang);\n\n    const [point, setPoint] = useState(null);\n    //  const [reloadMap, setReloadMap] = useState(false);\n    const [map, setMap] = useState(null);\n\n\n    const [center, setCenter] = useState()\n    const [zoom, setZoom] = useState(field.zoom)\n\n    const { data: user } = useGetUserDataQuery()\n\n    const { data: points, isLoading: isLoadingPoints, isFetching: isFetchingPoints } = useGetFieldPointsQuery({ fieldId });\n    const { data: scouts, isLoading: isLoadingScouts, isFetching: isFetchingScouts } = useGetFieldScoutsQuery({ fieldId });\n    const { data: stages, isLoading: isLoadingStages, isFetching: isFetchingStages } = useGetPestStagesQuery();\n    const { data: plantLocations, isLoading: isLoadingPlantLocations } = useGetPlantLocationsQuery();\n    const { data: infectionLevels , isLoading: isLoadingInfectionLevels} = useGetInfectionLevelsQuery()\n\n    const { data: pests, isLoading: isLoadingPests } = useGetPestsQuery();\n\n\n    const [dialog, setDialog] = React.useState(null);\n\n\n    const height = (window.innerHeight - 180);\n\n    if (isLoadingInfectionLevels || isLoadingPlantLocations || isLoadingPests || isLoadingPoints || isLoadingScouts || isFetchingPoints || isFetchingScouts || isLoadingStages || isFetchingStages) {\n        return <Loading/>\n    }\n\n    const onScoutMapClick = (event, element, type) => {\n        console.log('onScoutMapClick', type, event);\n        if (type === 'map') {\n            const p = { id: null, lat: event.latlng.lat, lng: event.latlng.lng, fieldId, \n                name: `${displayFieldName(field)} ${text.scouting} - ${points.length} `, \n                active: true, type: 'scouting' };\n            setPoint(p);\n            setDialog('point')\n        }\n        if (type === 'point') {\n            event.originalEvent.view.L.DomEvent.stopPropagation(event)\n            setPoint(element);\n            setDialog('pointScouting')\n        }\n    }\n\n    \n    const clear = () => {\n        setDialog(null);\n        setPoint(null);\n    }\n\n    const pointScouts = point ? scouts.filter(e => e.point.id === point.id) : [];\n\n    return (\n        <Box display={'flex'} flex={1} alignItems={'stretch'} justifyContent={'space-between'} flexDirection={'column'}>\n            {field.polygon && <FieldMap field={field} height={height} onClick={onScoutMapClick} points={buildScoutPoints(points, scouts)} setMap={setMap} center={center} setCenter={setCenter} zoom={zoom} setZoom={setZoom} />}\n            {point && <FieldPointDialog open={dialog === 'point'} deletable={isArrayEmpty(pointScouts)} defaultValues={point} handleClose={clear} types={SCOUT_TYPES}/>}\n            {point && <ScoutingFieldPoint stages={stages} open={dialog === 'pointScouting'} point={point} scouts={pointScouts} handleClose={() => clear(null)} setPoint={setPoint} />}\n        </Box>\n    )\n}\n\nexport default FieldScouting"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2893, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/field/Field.js"],"sourcesContent":["import BottomNavigation from '@mui/material/BottomNavigation';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\nimport RestoreIcon from '@mui/icons-material/Restore';\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport CardContent from '@mui/material/CardContent';\nimport Avatar from '@mui/material/Avatar';\nimport { Box, IconButton, Typography } from '@mui/material';\nimport { useParams, Link, useLocation, useNavigate } from 'react-router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Loading from '../../components/Loading';\nimport { AddLocationAlt, Cancel, DashboardOutlined, HighlightOffRounded, InfoOutlined, PestControl, SatelliteAltOutlined } from '@mui/icons-material';\nimport FieldInfo from './FieldInfo';\nimport FieldDashboard from './dash/FieldDashboard';\nimport FieldHistory from './FieldHistory';\nimport FieldImagery from './FieldImagery';\nimport { getFruitIcon } from '../../icons/FruitIconUtil';\nimport { useFieldsById } from '../../features/fields/fieldsApiSlice';\nimport { selectCurrentYear, selectLang, setFieldDashboardYear } from '../../features/app/appSlice';\nimport { useGetUserDataQuery } from '../../features/auth/authApiSlice';\nimport { displayFieldArea, displayFieldName, getBottomNavigationSx, maxLenghtStr, parseDate } from '../FarmUtil';\nimport { useEffect } from 'react';\nimport FieldScouting from './FieldScouting';\n\nconst height = (window.innerHeight - 100);\n\nconst Field = () => {\n  const dispatch = useDispatch()\n  const { pathname } = useLocation();\n  const { fieldId, page, src } = useParams()\n  const text = useSelector(selectLang)\n  const { data: user } = useGetUserDataQuery()\n  const year = useSelector(selectCurrentYear)\n  const field = useFieldsById(year, Number(fieldId))\n  const navigate = useNavigate()\n\n\n  useEffect(() => {\n    return () => dispatch(setFieldDashboardYear(year));\n  }, [])\n\n  if (!field) {\n    return <Loading />\n  }\n\n  const paths = [`/field/${src}/${fieldId}/info`,\n  `/field/${src}/${fieldId}/dash`,\n  `/field/${src}/${fieldId}/history/${page}`,\n  `/field/${src}/${fieldId}/imagery`\n  ];\n\n  const getIndex = ((element) => element === pathname);\n\n\n  const value = paths.findIndex(getIndex) > 0 ? paths.findIndex(getIndex) : 0;\n  const isHistory = pathname.includes(\"/history\") ? true : false;\n  const sidePadding = isHistory ? 0 : 1;\n\n  return (\n    <Box >\n      <Card sx={{ minHeight: height }}>\n        <CardHeader sx={{ padding: 1 }}\n          avatar={\n            <Avatar sx={{ backgroundColor: 'white' }}>\n              {getFruitIcon(field.cropEngName)}\n            </Avatar>\n          }\n          // action={\n          //   <IconButton color='secondary' aria-label=\"settings\" onClick={() => navigate(`/tabs/${src}`)}>\n          //    {/* <HighlightOffRounded sx={{ marginTop: 1, fontSize: 35 }}*/ }\n          //    <Cancel sx={{ margin: 1}} fontSize='large' />\n          //   </IconButton>\n          // }\n          title={\n            <Box sx={{backgroundColor: field.statusColor, borderRadius: 1, paddingLeft: 1,paddingRight: 1}} display={'flex'} flexDirection={'row'} justifyContent={'space-between'}>\n              <Typography noWrap variant='h6'>\n                {maxLenghtStr(displayFieldName(field), 20)}\n              </Typography>\n              <Typography noWrap variant='h6'>\n                {displayFieldArea(field, user.areaUnit, text)}\n              </Typography>\n            </Box>\n          }\n          subheader={\n            <Box component={\"span\"} display={'flex'} flexDirection={'row'} justifyContent={'space-between'}>\n              <Typography noWrap color='secondary' variant='subtitle1' component={\"span\"}>\n                {maxLenghtStr(`${field.cropName},${field.varietyName}`, 22)}\n              </Typography>\n              <Typography color='secondary' variant='subtitle1' component={\"span\"}>\n                {`${parseDate(field.startDate)}`}\n              </Typography>\n            </Box>\n          }\n        />\n        <CardContent sx={{ paddingTop: 0, paddingLeft: sidePadding, paddingRight: sidePadding }}>\n          {pathname.includes(\"/info\") && <FieldInfo field={field} />}\n          {pathname.includes(\"/dash\") && <FieldDashboard />}\n          {pathname.includes(\"/history\") && <FieldHistory />}\n          {pathname.includes(\"/imagery\") && <FieldImagery field={field} />}\n          {pathname.includes(\"/scouting\") && <FieldScouting field={field} />}\n\n        </CardContent>\n      </Card>\n      <BottomNavigation sx={{ position: 'fixed', bottom: 0, left: 0, right: 0, paddingTop: 2, paddingBottom: 2, borderTop: 1, borderTopColor: 'lightGray', backgroundColor: 'white', zIndex: 1000 }} value={-1}\n        // <BottomNavigation sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }} value={value}\n        showLabels>\n        <BottomNavigationAction\n          label={<Typography >{text.details}</Typography>}\n          to={`/field/${src}/${fieldId}/info`} component={Link}\n          icon={<InfoOutlined fontSize='large' />}\n        />\n        <BottomNavigationAction\n          label={<Typography >{text.dashboard}</Typography>}\n          to={`/field/${src}/${fieldId}/dash`} component={Link}\n          icon={<DashboardOutlined fontSize='large' />}\n        />\n        <BottomNavigationAction\n          label={<Typography >{text.activities}</Typography>}\n          to={`/field/${src}/${fieldId}/history/0`} component={Link}\n          icon={<RestoreIcon fontSize='large' />}\n        />\n      {field.imageryId !== null &&  <BottomNavigationAction\n          sx={getBottomNavigationSx(field.imageryId === null)}\n          disabled={field.imageryId === null}\n          label={<Typography >{text.satellite}</Typography>}\n          to={`/field/${src}/${fieldId}/imagery`} component={Link}\n          icon={<SatelliteAltOutlined fontSize='large' />}\n        />}\n        {/* <BottomNavigationAction\n         // disabled={field.imageryId === null}\n          label={<Typography >{text.scouting}</Typography>}\n          to={`/field/${src}/${fieldId}/scouting`} component={Link}\n          icon={<PestControl fontSize='large' />}\n        /> */}\n      </BottomNavigation>\n    </Box >\n  );\n}\n\nexport default Field\n"],"names":[],"mappings":"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"}}]
}