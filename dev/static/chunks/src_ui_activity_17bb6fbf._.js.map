{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/header/ActivityHeaderView.js"],"sourcesContent":["import { Avatar, Box, Typography, Autocomplete, MenuItem, TextField } from '@mui/material'\nimport { useSelector } from 'react-redux'\nimport { selectLang } from '../../../../features/app/appSlice'\nimport ActivityTypeIcon from '../../../../icons/ActivityTypeIcon'\nimport { GENERAL, GENERAL_PLAN, getActivityTypeText, getMarketingIncomeCalcOptions, getWinds, getYearArray, HARVEST, IRRIGATION, IRRIGATION_PLAN, isArrayEmpty, MARKET, SCOUT, SPRAY, SPRAY_PLAN, SPRAY_TYPES } from '../../../FarmUtil'\nimport { DatePicker, TimePicker } from '@mui/x-date-pickers';\nimport { Controller } from 'react-hook-form'\nimport TextFieldBase from '../../../../components/ui/TextField'\nimport DecoratedBox from '../../../../components/ui/DecoratedBox'\n\nconst HEADER_CONFIG = [\n  { type: GENERAL, date: true, year: true, activity: true, activityType: GENERAL },\n  { type: GENERAL_PLAN, date: true, year: true, activity: true, activityType: GENERAL },\n  { type: SPRAY, date: true, year: true, endHour: true, startHour: true, crop: true, wind: true },\n  { type: SPRAY_PLAN, date: true, year: true, endHour: true, startHour: true, crop: true, wind: false },\n  { type: IRRIGATION, date: true, year: true, endDate: true, },\n  { type: IRRIGATION_PLAN, date: true, year: true, endDate: true, },\n  { type: HARVEST, date: true, year: true, activity: true, activityType: HARVEST, waybill: true, customer: true },\n  { type: MARKET, date: true, year: true, customer: true, marketCalcMethod: true },\n  { type: SCOUT, date: true, year: true, crop: true },\n\n]\n\nexport const PLAN_PASSED_STATUS_COLOR = '#EF9A9A';\nexport const PLAN_STATUS_COLOR = '#FFF59D';\nexport const EXECUTE_STATUS_COLOR = '#C5E1A5';\nexport const DUPLICATE_COLOR = '#ffc107';\nexport const WHITE = 'white';\nconst getColor = (isDuplicate, isExecutePlan) => {\n  if (isDuplicate) {\n    return DUPLICATE_COLOR;\n  } else if (isExecutePlan) {\n    return EXECUTE_STATUS_COLOR;\n  } else {\n    return null;\n  }\n}\n\nconst ActivityHeaderView = ({ activity, control, errors, customers, activityDefs, type, crops, reference, isDuplicate, execution, days, crop, onCropCHange, isExecutePlan }) => {\n\n  const text = useSelector(selectLang)\n  const config = HEADER_CONFIG.filter(e => type === e.type)[0];\n\n\n  const _onCropChange = (onChange, data) => {\n    onChange(data)\n    onCropCHange();\n  }\n\n  return (\n    <Box margin={1} paddingTop={1}>\n      <Box display={'flex'} flex={1} alignItems={'center'} justifyContent={'space-between'} flexDirection={'row'} >\n        <Box flex={1} display={'flex'} flexDirection={'row'} alignItems={'center'} >\n          <Typography sx={{ backgroundColor: getColor(isDuplicate, isExecutePlan), borderRadius: 2, paddingLeft: 1, paddingRight: 1 }} variant='h6'>{getActivityTypeText(type, text, true)}</Typography>\n          <Avatar sx={{ bgcolor: 'white' }}>\n            <ActivityTypeIcon type={type} />\n          </Avatar>\n        </Box>\n        <Typography flex={1} variant='h6'>{reference}</Typography>\n        <Controller\n          control={control}\n          name=\"year\"\n          rules={{ required: true }}\n          render={({ field }) => (\n            <TextField\n              id=\"outlined-select-year\"\n              select\n              {...field}\n              size='small'\n              label={text.year}\n            >\n              {getYearArray().map((option) => (\n                <MenuItem key={option} value={option}>\n                  {option}\n                </MenuItem>\n              ))}\n            </TextField>\n          )}\n        />\n      </Box>\n      <Box paddingTop={2} display={'flex'} flex={1} alignContent={'center'} alignItems={'center'} flexDirection={'row'} justifyContent={'space-between'} >\n        <Controller\n          name=\"execution\"\n          control={control}\n          render={({ field }) =>\n            <DatePicker label={config.endDate ? text.start : text.date}\n              closeOnSelect\n              showToolbar={false}\n              localeText={{\n                cancelButtonLabel: text.cancel,\n                clearButtonLabel: text.clear,\n                okButtonLabel: text.save\n              }}\n              slotProps={{\n                textField: { size: 'small', variant: 'outlined', sx: { flex: 1 } },\n                actionBar: { actions: [\"cancel\" /*, \"clear\"*/] }\n              }}\n              {...field} />}\n        />\n        <Box margin={1} />\n        {SCOUT === type &&\n          < Box display={'flex'} flex={1} alignItems={'center'} justifyContent={'space-between'} flexDirection={'row'} >\n            <Controller\n              name=\"sprayParams.crop\"\n              control={control}\n              rules={{ required: true }}\n              render={({ field: { ref, onChange, ...field } }) => <Autocomplete\n                blurOnSelect={true}\n                onChange={(_, data) => _onCropChange(onChange, data)}\n                options={crops.filter(e => e.active)}\n                fullWidth\n                size='small'\n                getOptionLabel={(option) => option ? option.name : ''}\n                isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n                renderInput={(params) => <TextFieldBase error={errors.sprayParams?.crop ? true : false} sx={{ marginTop: 0.5 }} {...params} label={text.crop} />}\n                {...field} />}\n            />\n          </Box>\n        }\n\n        {config.endDate &&\n          <Controller\n            control={control}\n\n            name=\"executionEnd\"\n            render={({ field }) => <DatePicker\n              closeOnSelect\n              showToolbar={false}\n              minDate={execution}\n              label={text.end}\n              localeText={{\n                cancelButtonLabel: text.cancel,\n                clearButtonLabel: text.clear,\n                okButtonLabel: text.save\n              }}\n              slotProps={{\n                textField: { size: 'small', error: (errors?.executionEnd ? true : false), variant: 'outlined', sx: { flex: 1 } },\n                actionBar: { actions: [\"cancel\" /*, \"clear\"*/] }\n              }}\n              {...field} />}\n            rules={{ required: true, min: execution }}\n          />}\n        {config.endDate && <Box display={'flex'} justifyContent={'end'}><DecoratedBox value={`${days} ${text.days}`} error={days < 1} /> </Box>}\n        {config.activity &&\n          <Controller\n            name=\"activityDef\"\n            control={control}\n            rules={{ required: true }}\n            render={({ field: { ref, onChange, ...field } }) => <Autocomplete\n              blurOnSelect={true}\n              onChange={(_, data) => onChange(data)}\n              options={activityDefs.filter(e => e.active && config.activityType === e.type)}\n              sx={{ flex: 1.6 }}\n              // fullWidth\n              size='small'\n              getOptionLabel={(option) => option ? option.name : ''}\n              isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n              renderInput={(params) => <TextFieldBase error={errors.activityDef ? true : false} sx={{ marginTop: 0.5 }} {...params} label={text.activity} />}\n              {...field} />}\n          />}\n\n        {/* {(config.endHour) && <Box margin={1} />} */}\n\n        {config.endHour &&\n          <Controller\n            control={control}\n\n            name=\"endHour\"\n            render={({ field }) => <TimePicker\n              closeOnSelect\n              showToolbar={false}\n              label={text.endHour}\n              localeText={{\n                cancelButtonLabel: text.cancel,\n                clearButtonLabel: text.clear,\n                okButtonLabel: text.save\n              }}\n              slotProps={{\n                textField: { size: 'small', error: (errors?.endHour ? true : false), variant: 'outlined', sx: { flex: 1 } },\n                actionBar: { actions: [/*\"cancel\", \"clear\"*/] }\n              }}\n              {...field} />}\n            rules={{ required: true }}\n          />}\n        {config.type === MARKET &&\n          <Controller\n            name=\"customer\"\n            rules={{ required: true }}\n            control={control}\n            render={({ field: { ref, onChange, ...field } }) => <Autocomplete\n              disablePortal\n              blurOnSelect={true}\n              onChange={(_, data) => onChange(data)}\n              options={customers}\n              sx={{ flex: 1 }}\n              size='small'\n              getOptionLabel={(option) => option ? option.name : ''}\n              isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n              renderInput={(params) => <TextFieldBase\n                error={errors.customer ? true : false}\n                sx={{ marginTop: 0.5 }} {...params} label={text.customer} />}\n              {...field} />}\n          />\n\n        }\n\n        {/* {config.type === SCOUT && !isArrayEmpty(scouters) &&  \n          <Controller\n            name=\"scoutParams.scouter\"\n            rules={{ required: true }}\n            control={control}\n            render={({ field: { ref, onChange, ...field } }) => <Autocomplete\n              disablePortal\n              blurOnSelect={true}\n              onChange={(_, data) => onChange(data)}\n              options={scouters.filter(e=>e.active)}\n              sx={{ flex: 1 }}\n              size='small'\n              getOptionLabel={(option) => option ? option.name : ''}\n              isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n              renderInput={(params) => <TextFieldBase\n                // error={errors.customer ? true : false}\n                sx={{ marginTop: 0.5 }} {...params} label={text.scouter} />}\n              {...field} />}\n          />\n\n        } */}\n\n        {/* <TimePicker size='small' label={text.endHour}\n          slotProps={{ textField: { size: 'small', sx: { minWidth: 150, width: 150 } } }}\n\n\n        /> */}\n\n      </Box>\n\n      {SCOUT === type && crop && !isArrayEmpty(crop.stages) &&\n        <Box paddingTop={1} display={'flex'} flex={1} >\n          <Controller\n            control={control}\n            name=\"scoutParams.phenologicalStage\"\n            render={({ field }) => (\n              <TextField\n                sx={{ flex: 1 }}\n                id=\"outlined-select-crop-phenologicalStage\"\n                select\n                {...field}\n                size='small'\n                label={text.phenologicalStage}\n              >\n                <MenuItem><em></em></MenuItem>\n                {crop.stages?.map((option) => (\n                  <MenuItem key={option} value={option}>\n                    {option}\n                  </MenuItem>\n                ))}\n              </TextField>\n            )}\n          />\n        </Box>\n      }\n\n      {SPRAY_TYPES.includes(type) &&\n        < Box display={'flex'} marginTop={2} flex={1} alignItems={'center'} justifyContent={'space-between'} flexDirection={'row'} >\n          <Controller\n            name=\"sprayParams.crop\"\n            control={control}\n            rules={{ required: true }}\n            render={({ field: { ref, onChange, ...field } }) => <Autocomplete\n              // disablePortal\n              blurOnSelect={true}\n              onChange={(_, data) => _onCropChange(onChange, data)}\n              options={crops.filter(e => e.active)}\n              // sx={{ width: 150 }}\n              fullWidth\n              size='small'\n              getOptionLabel={(option) => option ? option.name : ''}\n              isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n              renderInput={(params) => <TextFieldBase error={errors.sprayParams?.crop ? true : false} sx={{ marginTop: 0.5 }} {...params} label={text.crop} />}\n              {...field} />}\n          />\n          {config.wind && <Box margin={1} />}\n          {config.wind && <Controller\n            control={control}\n            name=\"sprayParams.wind\"\n            render={({ field }) => (\n              <TextField\n                id=\"outlined-select-wind\"\n                select\n                {...field}\n                size='small'\n                label={text.windSpeed}\n                fullWidth\n              >\n                {getWinds().map((option) => (\n                  <MenuItem key={option} value={option}>\n                    {text[option]}\n                  </MenuItem>\n                ))}\n              </TextField>\n            )}\n          />}\n        </Box>\n      }\n      {HARVEST === type &&\n        <Box marginTop={2} display={'flex'} flex={1} alignItems={'center'} justifyContent={'space-between'} flexDirection={'row'} >\n          <Box display={'flex'} flex={1} flexDirection={'row'} alignContent={'center'} alignItems={'center'}>\n            <Controller\n              control={control}\n              name=\"waybill\"\n              render={({ field }) => (\n                <TextField size='small'\n                  sx={{ flex: 1 }}\n                  id=\"activity-waybill\"\n                  label={text.waybill}  {...field} />\n              )}\n            />\n            <Box margin={1} />\n            <Controller\n              name=\"customer\"\n              rules={{ required: true }}\n              control={control}\n              render={({ field: { ref, onChange, ...field } }) => <Autocomplete\n                disablePortal\n                blurOnSelect={true}\n                onChange={(_, data) => onChange(data)}\n                options={customers}\n                sx={{ flex: 1 }}\n                size='small'\n                getOptionLabel={(option) => option ? option.name : ''}\n                isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n                renderInput={(params) => <TextFieldBase\n                  error={errors.customer ? true : false}\n                  sx={{ marginTop: 0.5 }} {...params} label={text.customer} />}\n                {...field} />}\n            />\n          </Box>\n        </Box>\n      }\n      {MARKET === type &&\n        <Box marginTop={2} display={'flex'} flex={1} alignItems={'center'} justifyContent={'space-between'} flexDirection={'row'} >\n\n          {/* <Box display={'flex'} flex={1} flexDirection={'row'} alignContent={'center'} alignItems={'center'}>\n          \n          \n\n          </Box> */}\n\n          <Controller\n            control={control}\n            name=\"invoice\"\n            render={({ field }) => (\n              <TextField size='small'\n                sx={{ flex: 1 }}\n                id=\"activity-invoice\"\n                label={text.invoice}  {...field} />\n            )}\n          />\n          <Box margin={1} />\n          <Controller\n            name=\"marketParams.sortDate\"\n            control={control}\n            render={({ field }) =>\n              <DatePicker label={text.sort}\n                closeOnSelect\n                showToolbar={false}\n                localeText={{\n                  cancelButtonLabel: text.cancel,\n                  clearButtonLabel: text.clear,\n                  okButtonLabel: text.save\n                }}\n                slotProps={{\n                  textField: { size: 'small', variant: 'outlined', sx: { flex: 1 }/*sx: { maxWidth: getMinDateWidth() } */ },\n                  actionBar: { actions: [\"cancel\", \"clear\"] }\n                }}\n                {...field} />}\n          />\n\n\n        </Box>\n      }\n      {MARKET === type &&\n        <Box marginTop={2} display={'flex'} flex={1} alignItems={'center'} justifyContent={'space-between'} flexDirection={'row'} >\n\n          <Controller\n            control={control}\n            name=\"marketParams.incomeCalc\"\n            render={({ field }) => (\n              <TextField\n                id=\"outlined-select-incomeCalc\"\n                select\n                {...field}\n                size='small'\n                label={text.incomeCalc}\n                sx={{ flex: 1 }}\n              >\n                <MenuItem key={''} value={''}>\n                  <em >\n                    {text.none}\n                  </em>\n                </MenuItem>\n                {getMarketingIncomeCalcOptions().map((option) => (\n                  <MenuItem key={option} value={option}>\n                    {text[option]}\n                  </MenuItem>\n                ))}\n              </TextField>\n            )}\n          />\n          <Box margin={1} />\n          <Controller\n            control={control}\n            name=\"marketParams.sortReference\"\n            render={({ field }) => (\n              <TextField size='small'\n                sx={{ flex: 1 }}\n                id=\"activity-sortReference\"\n                label={text.sortReference}  {...field} />\n            )}\n          />\n        </Box>\n      }\n\n    </Box >)\n}\n\nexport default ActivityHeaderView"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1075, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/fields/ActivityFieldDialog.js"],"sourcesContent":["import { AppBar, Autocomplete, Avatar, Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, MenuItem, Toolbar, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { useSelector } from \"react-redux\";\nimport { selectLang } from \"../../../../features/app/appSlice\";\nimport { useEffect, useState } from \"react\";\nimport { useGetUserDataQuery } from \"../../../../features/auth/authApiSlice\";\nimport { HARVEST, MARKET, UI_SIZE, displayFieldName, getActivityTypeText, getMarketingDestinations, isArrayEmpty, safeDiv } from \"../../../FarmUtil\";\nimport { DatePicker } from \"@mui/x-date-pickers\";\nimport { Cancel, Close, ControlPointDuplicate, Delete, Save } from \"@mui/icons-material\";\nimport { useGetContainersQuery, useGetQualitiesQuery, useGetSizesQuery } from \"../../../../features/utils/containersApiSlice\";\nimport ActionApprovalDialog from \"../../../../components/ui/ActionApprovalDialog\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\n\n\nconst ActivityFieldDialog = ({ selectedRow, selectedIndex, handleClose, activityType, update, remove, prepend }) => {\n    const text = useSelector(selectLang);\n\n    const isMarket = activityType === MARKET\n\n\n    const { data: user } = useGetUserDataQuery()\n\n    const [note, setNote] = useState(selectedRow.fieldNote ? selectedRow.fieldNote : '');\n    const [activityArea, setActivityArea] = useState(selectedRow.activityArea);\n    const [actualExecution, setActualExecution] = useState(selectedRow.actualExecution);\n    const [qty, setQty] = useState(selectedRow.qty);\n    const [weight, setWeight] = useState(selectedRow.weight);\n    const [container, setContainer] = useState(activityType === HARVEST ? selectedRow.container : null);\n    const [duplicateOpen, setDuplicateOpen] = useState(false);\n\n    const [quality, setQuality] = useState(isMarket ? selectedRow.fieldMarketParams.marketingQuality : null);\n    const [size, setSize] = useState(isMarket ? selectedRow.fieldMarketParams.marketingSize : null);\n    const [destination, setDestination] = useState(isMarket ? selectedRow.fieldMarketParams.marketingDestination : null);\n    const [income, setIncome] = useState(isMarket ? selectedRow.fieldMarketParams.income : null);\n    const [incomePerUnit, setIncomePerUnit] = useState(isMarket ? safeDiv(selectedRow.fieldMarketParams.income, selectedRow.qty) : null);\n    const [waybill, setWaybill] = useState(isMarket ? selectedRow.fieldMarketParams.waybill : null);\n\n\n\n    const { data: containers, isSuccess: isContainersSuccess } = useGetContainersQuery({}, { skip: activityType !== HARVEST })\n    const { data: qualities, isSuccess: isQUalitiesSuccess } = useGetQualitiesQuery({}, { skip: !isMarket })\n    const { data: sizes, isSuccess: isSizesSuccess } = useGetSizesQuery({}, { skip: !isMarket })\n\n    const isExecute = activityType !== MARKET\n\n    const onAction = (save) => {\n        if (save) {\n            selectedRow.activityArea = activityArea;\n            selectedRow.fieldNote = note;\n            selectedRow.actualExecution = actualExecution;\n            if (HARVEST === activityType) {\n                selectedRow.qty = qty;\n                selectedRow.weight = weight;\n                selectedRow.container = container;\n            } else if (MARKET === activityType) {\n                selectedRow.qty = qty;\n                selectedRow.weight = weight;\n                selectedRow.fieldMarketParams.marketingDestination = destination;\n                selectedRow.fieldMarketParams.marketingSize = size;\n                selectedRow.fieldMarketParams.marketingQuality = quality;\n                selectedRow.fieldMarketParams.income = income;\n                selectedRow.fieldMarketParams.waybill = waybill;\n\n\n            }\n            update(selectedIndex, selectedRow);\n        }\n        handleClose();\n    }\n\n    const handleSetActivityArea = (val) => {\n        setActivityArea(val > 0 ? val : selectedRow.field.area)\n    }\n\n    const handleDuplicate = (val) => {\n        setDuplicateOpen(false);\n        if (val) {\n            prepend({ ...selectedRow })\n            handleClose();\n        }\n    }\n\n    const onIncomeChange = (value) => {\n        setIncome(value);\n        if (value && qty) {\n            setIncomePerUnit(safeDiv(value, qty));\n        }\n    }\n    const onIncomePerUnitChange = (value) => {\n        setIncomePerUnit(value);\n        if (value && qty) {\n            setIncome((value * qty).toFixed(0))\n        }\n    }\n\n    useEffect(() => {\n        if (incomePerUnit) {\n            setIncome((incomePerUnit * qty).toFixed(0))\n        }\n    }, [qty])\n\n\n    return (\n        <Box>\n\n            <Dialog\n                open={selectedRow !== null}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n                fullWidth\n            >\n                <DialogAppBar onClose={() => onAction(false)}\n                    title={\n                        displayFieldName(selectedRow.field)}\n                />\n\n\n                <DialogTitle id=\"alert-dialog-title\">\n                    <Box display={'flex'} flexDirection={'row'} justifyContent={'space-between'}>\n                        <Box>\n                            <Typography component={'div'} > {selectedRow.field.cropName} / {selectedRow.field.varietyName} - {selectedRow.field.area} {text[user.areaUnit]}\n\n                            </Typography>\n                        </Box>\n                        {[HARVEST, MARKET].includes(activityType) &&\n                            // <Button size='large'  startIcon={<ControlPointDuplicate />}  onClick={_=>console.log('duplicate field')}>{text.duplicate}</Button>\n                            <IconButton onClick={_ => setDuplicateOpen(true)} color=\"primary\" aria-label=\"duplicate-activity-field\" size=\"large\">\n                                <ControlPointDuplicate fontSize=\"large\" />\n                            </IconButton>\n                        }\n                    </Box>\n                </DialogTitle>\n                <DialogContent>\n                    {!isMarket && <Box display={'flex'} flex={1} flexDirection={'row'} alignItems={'center'}>\n                        <TextFieldBase sx={{ flex: 1 }} value={activityArea} onChange={e => handleSetActivityArea(Number(e.target.value))} type='number' label={text[user.areaUnit]} />\n                        <Box margin={1}></Box>\n                        <DatePicker\n                            label={text.executedDate}\n                            closeOnSelect\n                            localeText={{\n                                cancelButtonLabel: text.cancel,\n                                clearButtonLabel: text.clear\n                            }}\n                            showToolbar={false}\n                            value={actualExecution}\n                            onChange={(e) => setActualExecution(e)}// asLocalDate(e, true)}\n                            slotProps={{\n                                textField: { size: UI_SIZE, variant: 'outlined', sx: { marginTop: 0.5, flex: 1 } },\n                                actionBar: { actions: [\"cancel\", \"clear\"] }\n                            }}\n                        />\n                    </Box>}\n\n\n                    {isMarket && <Box display={'flex'} flex={1} flexDirection={'row'} alignItems={'center'}>\n                        <TextFieldBase sx={{ flex: 1 }} value={waybill} onChange={e => setWaybill(e.target.value)} label={text.waybill} />\n                        <Box margin={1}></Box>\n                        <TextFieldBase\n                            id=\"outlined-select-destination\"\n                            select\n                            onChange={(e) => setDestination(e.target.value)}\n                            value={destination}\n                            label={text.destination}\n                            sx={{ flex: 1 }}\n                        >\n                            {getMarketingDestinations().map((option) => (\n                                <MenuItem key={option} value={option}>\n                                    {text[option.replace('Destination', '')]}\n                                </MenuItem>\n                            ))}\n                        </TextFieldBase>\n\n\n                    </Box>}\n                    {[HARVEST, MARKET].includes(activityType) &&\n                        <Box display={'flex'} flexDirection={'row'} flex={1}>\n                            <TextFieldBase sx={{ flex: 1 }} value={qty} onChange={e => setQty(Number(e.target.value))} type='number' label={text.qty} />\n                            <Box margin={1}></Box>\n                            <TextFieldBase sx={{ flex: 1 }} value={weight} onChange={e => setWeight(Number(e.target.value))} type='number' label={text[user.weightUnit]} />\n                        </Box>\n                    }\n                    {HARVEST === activityType &&\n                        <Autocomplete\n                            blurOnSelect={true}\n                            value={container}\n                            onChange={(_, data) => setContainer(data)}\n                            options={!isArrayEmpty(containers) ? containers : [container]}\n                            //fullWidth\n                            getOptionLabel={(option) => option ? option.name : ''}\n                            isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n                            renderInput={(params) => <TextFieldBase {...params} label={text.container} />}\n                        />\n                    }\n                    {isMarket &&\n                        <Box display={'flex'} flex={1} flexDirection={'row'} alignItems={'center'}>\n                            <Autocomplete\n                                blurOnSelect={true}\n                                value={size}\n                                onChange={(_, data) => setSize(data)}\n                                options={!isArrayEmpty(sizes) ? sizes : [size]}\n                                fullWidth\n                                getOptionLabel={(option) => option ? option.name : ''}\n                                isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n                                renderInput={(params) => <TextFieldBase {...params} label={text.size} />}\n                            />\n                            <Box margin={1}></Box>\n\n                            <Autocomplete\n                                blurOnSelect={true}\n                                value={quality}\n                                onChange={(_, data) => setQuality(data)}\n                                options={!isArrayEmpty(qualities) ? qualities : [quality]}\n                                fullWidth\n                                getOptionLabel={(option) => option ? option.name : ''}\n                                isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n                                renderInput={(params) => <TextFieldBase {...params} label={text.quality} />}\n                            />\n                        </Box>\n                    }\n                    {isMarket &&\n                        <Box display={'flex'} flexDirection={'row'} flex={1}>\n                            <TextFieldBase sx={{ flex: 1 }} value={incomePerUnit} onChange={e => onIncomePerUnitChange(Number(e.target.value))} type='number' label={`${text.unitCost}`} />\n                            <Box margin={1}></Box>\n                            <TextFieldBase sx={{ flex: 1 }} value={income} onChange={e => onIncomeChange(Number(e.target.value))} type='number' label={`${text.income}`} />\n                        </Box>\n                    }\n\n                    <TextFieldBase value={note} onChange={e => setNote(e.target.value)} fullWidth={true} label={`${text.fieldNote}`} />\n                </DialogContent>\n                <DialogActions sx={{ justifyContent: 'center' }}>\n                    <Button size='large' endIcon={<Delete />} disableElevation={true} variant='outlined' onClick={remove}>{text.delete}</Button>\n                    <Button size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} >\n                        {text.save}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n            <ActionApprovalDialog open={duplicateOpen} handleClose={handleDuplicate}\n                title={`${text.duplicate} ${text.field}?`} okText={text.duplicate} cancelText={text.cancel} />\n\n        </Box >\n    )\n\n}\n\n\nexport default ActivityFieldDialog;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1743, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/fields/UpdateAllFieldsDialog.js"],"sourcesContent":["import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, MenuItem, TextField, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { Cancel, Save } from \"@mui/icons-material\";\nimport { useEffect, useState } from \"react\";\nimport { AREA_UNIT, getUnitText } from \"../../../FarmUtil\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\n\nconst UpdateAllFieldsDialog = ({ open, text, handleClose, areaUnit, activityArea, totalWeight, totalQty, weightUnit, fields, replace }) => {\n\n    const [_totalWeight, setTotalWeight] = useState(totalWeight);\n    const [_totalQty, setTotalQty] = useState(totalQty);\n    const [touched, setTouched] = useState(false);\n\n    // useEffect(() => {\n    //     setTouched(true)\n    //   }, [_totalWeight,_totalQty])\n\n    const handleTotalWeight = (val) => {\n        setTotalWeight(val);\n        setTouched(true);\n    }\n\n    const handleTotalQty = (val) => {\n        setTotalQty(val);\n        setTouched(true);\n    }\n\n    const onAction = (val) => {\n        if (val) {\n            const newFields = fields.slice();\n            const qtyPerAreaUnit = _totalQty / activityArea;\n            const weightPerAreaUnit = _totalWeight / activityArea;\n\n            newFields.forEach((e, index, arr) => {\n                e.qty = Number((qtyPerAreaUnit * e.activityArea).toFixed(2));\n                if(e.container?.capacity > 0){\n                    e.weight = Number((e.qty * e.container?.capacity).toFixed(2));\n                } else {\n                    e.weight = Number((weightPerAreaUnit * e.activityArea).toFixed(2));\n                }\n\n            });\n            replace(newFields);\n            console.log('save..')\n        }\n        handleClose();\n    }\n\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullWidth\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title={text.updateFields}/>\n            <DialogContent>\n                <Box display={'flex'} flexDirection={'row'}>\n                    <TextFieldBase type='number' value={_totalQty} onChange={e => handleTotalQty(Number(e.target.value))} fullWidth={true} label={`${text.total} ${text.qty}`} />\n                    <Box margin={1} />\n                    <TextFieldBase type='number' value={_totalWeight} onChange={e => handleTotalWeight(Number(e.target.value))} fullWidth={true} label={`${text.total} ${text[weightUnit]}`} />\n                </Box>\n\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Button disabled={!touched} size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} >\n                    {text.save}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\nexport default UpdateAllFieldsDialog;\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAEA,IAAM,wBAAwB;QAAG,aAAA,MAAM,aAAA,MAAM,oBAAA,aAAa,iBAAA,UAAU,qBAAA,cAAc,oBAAA,aAAa,iBAAA,UAAU,mBAAA,YAAY,eAAA,QAAQ,gBAAA;;IAEzH,IAAuC,qLAAA,IAAA,yKAAQ,EAAC,kBAAzC,eAAgC,cAAlB,iBAAkB;IACvC,IAAiC,sLAAA,IAAA,yKAAQ,EAAC,eAAnC,YAA0B,eAAf,cAAe;IACjC,IAA8B,sLAAA,IAAA,yKAAQ,EAAC,YAAhC,UAAuB,eAAd,aAAc;IAE9B,oBAAoB;IACpB,uBAAuB;IACvB,iCAAiC;IAEjC,IAAM,oBAAoB,SAAC;QACvB,eAAe;QACf,WAAW;IACf;IAEA,IAAM,iBAAiB,SAAC;QACpB,YAAY;QACZ,WAAW;IACf;IAEA,IAAM,WAAW,SAAC;QACd,IAAI,KAAK;YACL,IAAM,YAAY,OAAO,KAAK;YAC9B,IAAM,iBAAiB,YAAY;YACnC,IAAM,oBAAoB,eAAe;YAEzC,UAAU,OAAO,CAAC,SAAC,GAAG,OAAO;oBAEtB;gBADH,EAAE,GAAG,GAAG,OAAO,CAAC,iBAAiB,EAAE,YAAY,EAAE,OAAO,CAAC;gBACzD,IAAG,EAAA,eAAA,EAAE,SAAS,cAAX,mCAAA,aAAa,QAAQ,IAAG,GAAE;wBACE;oBAA3B,EAAE,MAAM,GAAG,OAAO,CAAC,EAAE,GAAG,KAAG,gBAAA,EAAE,SAAS,cAAX,oCAAA,cAAa,QAAQ,CAAA,EAAE,OAAO,CAAC;gBAC9D,OAAO;oBACH,EAAE,MAAM,GAAG,OAAO,CAAC,oBAAoB,EAAE,YAAY,EAAE,OAAO,CAAC;gBACnE;YAEJ;YACA,QAAQ;YACR,QAAQ,GAAG,CAAC;QAChB;QACA;IACJ;IAGA,qBACI,6LAAC,8MAAM;QACH,MAAM;QACN,mBAAgB;QAChB,oBAAiB;QACjB,SAAS;;0BAET,6LAAC,iJAAY;gBAAC,SAAS;2BAAM,SAAS;;gBAClC,OAAO,KAAK,YAAY;;;;;;0BAC5B,6LAAC,0OAAa;0BACV,cAAA,6LAAC,kMAAG;oBAAC,SAAS;oBAAQ,eAAe;;sCACjC,6LAAC,kJAAa;4BAAC,MAAK;4BAAS,OAAO;4BAAW,UAAU,SAAA;uCAAK,eAAe,OAAO,EAAE,MAAM,CAAC,KAAK;;4BAAI,WAAW;4BAAM,OAAO,AAAC,GAAgB,OAAd,KAAK,KAAK,EAAC,KAAY,OAAT,KAAK,GAAG;;;;;;sCACvJ,6LAAC,kMAAG;4BAAC,QAAQ;;;;;;sCACb,6LAAC,kJAAa;4BAAC,MAAK;4BAAS,OAAO;4BAAc,UAAU,SAAA;uCAAK,kBAAkB,OAAO,EAAE,MAAM,CAAC,KAAK;;4BAAI,WAAW;4BAAM,OAAO,AAAC,GAAgB,OAAd,KAAK,KAAK,EAAC,KAAoB,OAAjB,IAAI,CAAC,WAAW;;;;;;;;;;;;;;;;;0BAI7K,6LAAC,0OAAa;gBAAC,IAAI;oBAAE,gBAAgB;gBAAS;0BAC1C,cAAA,6LAAC,8MAAM;oBAAC,UAAU,CAAC;oBAAS,MAAK;oBAAQ,uBAAS,6LAAC,uKAAI;;;;;oBAAK,kBAAkB;oBAAM,SAAQ;oBAAY,SAAS;+BAAM,SAAS;;8BAC3H,KAAK,IAAI;;;;;;;;;;;;;;;;;AAK9B;GAlEM;KAAA;uCAmES"}},
    {"offset": {"line": 1921, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/ActivityUtil.js"],"sourcesContent":["import { ACTIVITY_DEF_TYPES, SPRAYER, SPRAY_TYPES, isArrayEmpty } from \"../../FarmUtil\";\n\n\nexport function getReference  (type, resources,activityDef){\n    if(SPRAY_TYPES.includes(type)){\n      const sprayer = resources.find(e=>e.resource.category === SPRAYER);\n      if(sprayer){\n        return sprayer.id;\n      }\n    } else if(ACTIVITY_DEF_TYPES.includes(type) && activityDef){\n      return activityDef.id;\n    }\n  }\n\n  export function isSkipTariffFetch (isDirty, isFinanace, resources){\n    if(!isFinanace){\n        return true;\n    }\n    if(!isDirty){\n        return true;\n    }\n    if(isArrayEmpty(resources)){\n        return true;\n    }\n    return false;\n  }\n\n  export function getTotalByField (fields, fieldName, decimalPiont){\n    if(isArrayEmpty(fields)){\n      return 0;\n    }\n    const values =  fields.filter(e=>e[fieldName]).map(e=>e[fieldName])\n    if(isArrayEmpty(values)){\n      return 0;\n    }\n    const sum = values.reduce(function(a, b){\n      return a + b;\n    });\n    return Number(sum.toFixed(decimalPiont? decimalPiont : 2));\n  }\n\n  export function getTotalQty (fields, decimalPiont){\n    return getTotalByField(fields, 'qty', decimalPiont)\n  }\n\n  export function getTotalweight (fields, decimalPiont){\n    return getTotalByField(fields, 'weight' ,decimalPiont )\n  }\n\n  export function getTotalFieldArea (fields, decimalPiont){\n    return getTotalByField(fields, 'area' ,decimalPiont )\n  }\n\n  export function getTotalActivityArea (fields, decimalPiont){\n    return getTotalByField(fields, 'activityArea', decimalPiont)\n  }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;AAGO,SAAS,aAAe,IAAI,EAAE,SAAS,EAAC,WAAW;IACtD,IAAG,uIAAW,CAAC,QAAQ,CAAC,OAAM;QAC5B,IAAM,UAAU,UAAU,IAAI,CAAC,SAAA;mBAAG,EAAE,QAAQ,CAAC,QAAQ,KAAK,mIAAO;;QACjE,IAAG,SAAQ;YACT,OAAO,QAAQ,EAAE;QACnB;IACF,OAAO,IAAG,8IAAkB,CAAC,QAAQ,CAAC,SAAS,aAAY;QACzD,OAAO,YAAY,EAAE;IACvB;AACF;AAEO,SAAS,kBAAmB,OAAO,EAAE,UAAU,EAAE,SAAS;IAC/D,IAAG,CAAC,YAAW;QACX,OAAO;IACX;IACA,IAAG,CAAC,SAAQ;QACR,OAAO;IACX;IACA,IAAG,IAAA,wIAAY,EAAC,YAAW;QACvB,OAAO;IACX;IACA,OAAO;AACT;AAEO,SAAS,gBAAiB,MAAM,EAAE,SAAS,EAAE,YAAY;IAC9D,IAAG,IAAA,wIAAY,EAAC,SAAQ;QACtB,OAAO;IACT;IACA,IAAM,SAAU,OAAO,MAAM,CAAC,SAAA;eAAG,CAAC,CAAC,UAAU;OAAE,GAAG,CAAC,SAAA;eAAG,CAAC,CAAC,UAAU;;IAClE,IAAG,IAAA,wIAAY,EAAC,SAAQ;QACtB,OAAO;IACT;IACA,IAAM,MAAM,OAAO,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC;QACrC,OAAO,IAAI;IACb;IACA,OAAO,OAAO,IAAI,OAAO,CAAC,eAAc,eAAe;AACzD;AAEO,SAAS,YAAa,MAAM,EAAE,YAAY;IAC/C,OAAO,gBAAgB,QAAQ,OAAO;AACxC;AAEO,SAAS,eAAgB,MAAM,EAAE,YAAY;IAClD,OAAO,gBAAgB,QAAQ,UAAU;AAC3C;AAEO,SAAS,kBAAmB,MAAM,EAAE,YAAY;IACrD,OAAO,gBAAgB,QAAQ,QAAQ;AACzC;AAEO,SAAS,qBAAsB,MAAM,EAAE,YAAY;IACxD,OAAO,gBAAgB,QAAQ,gBAAgB;AACjD"}},
    {"offset": {"line": 2001, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/fields/UpdateAllFieldsAreaDialog.js"],"sourcesContent":["import { Button, Dialog, DialogActions, DialogContent, InputAdornment } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { Save } from \"@mui/icons-material\";\nimport { useState } from \"react\";\nimport { getTotalFieldArea } from \"../ActivityUtil\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\n\nconst UpdateAllFieldsAreaDialog = ({ open, text, handleClose, areaUnit, fields, replace }) => {\n\n    const [_percent, setPercent] = useState('');\n    const [touched, setTouched] = useState(false);\n\n    const handlePercent = (val) => {\n        if (val > 0) {\n            setPercent(val);\n            setTouched(true);\n        }\n    }\n\n    const onAction = (val) => {\n        if (val) {\n            const newFields = fields.slice();\n\n            newFields.forEach((e) => {\n                const newArea = Number(((_percent / 100) * e.field.area).toFixed(2));\n                if (newArea > 0) {\n                    e.activityArea = newArea;\n                }\n            });\n            replace(newFields);\n        }\n        handleClose();\n    }\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullWidth\n        >\n            <DialogAppBar onClose={() => onAction(false)} title={`% ${text.of} ${getTotalFieldArea(fields.map(e => e.field))} ${text[areaUnit]}`}/>\n            <DialogContent>\n                <TextFieldBase type='number' value={_percent} onChange={e => handlePercent(Number(e.target.value))} fullWidth={true}\n                    InputProps={{\n                        endAdornment: <InputAdornment position=\"end\">{'%'}\n                        </InputAdornment>,\n                    }}\n                />\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Button disabled={!touched} size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} >\n                    {text.save}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\nexport default UpdateAllFieldsAreaDialog;\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAEA,IAAM,4BAA4B;QAAG,aAAA,MAAM,aAAA,MAAM,oBAAA,aAAa,iBAAA,UAAU,eAAA,QAAQ,gBAAA;;IAE5E,IAA+B,qLAAA,IAAA,yKAAQ,EAAC,SAAjC,WAAwB,cAAd,aAAc;IAC/B,IAA8B,sLAAA,IAAA,yKAAQ,EAAC,YAAhC,UAAuB,eAAd,aAAc;IAE9B,IAAM,gBAAgB,SAAC;QACnB,IAAI,MAAM,GAAG;YACT,WAAW;YACX,WAAW;QACf;IACJ;IAEA,IAAM,WAAW,SAAC;QACd,IAAI,KAAK;YACL,IAAM,YAAY,OAAO,KAAK;YAE9B,UAAU,OAAO,CAAC,SAAC;gBACf,IAAM,UAAU,OAAO,CAAC,AAAC,WAAW,MAAO,EAAE,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC;gBACjE,IAAI,UAAU,GAAG;oBACb,EAAE,YAAY,GAAG;gBACrB;YACJ;YACA,QAAQ;QACZ;QACA;IACJ;IAEA,qBACI,6LAAC,8MAAM;QACH,MAAM;QACN,mBAAgB;QAChB,oBAAiB;QACjB,SAAS;;0BAET,6LAAC,iJAAY;gBAAC,SAAS;2BAAM,SAAS;;gBAAQ,OAAO,AAAC,KAAe,OAAX,KAAK,EAAE,EAAC,KAAkD,OAA/C,IAAA,qKAAiB,EAAC,OAAO,GAAG,CAAC,SAAA;2BAAK,EAAE,KAAK;qBAAG,KAAkB,OAAf,IAAI,CAAC,SAAS;;;;;;0BAClI,6LAAC,0OAAa;0BACV,cAAA,6LAAC,kJAAa;oBAAC,MAAK;oBAAS,OAAO;oBAAU,UAAU,SAAA;+BAAK,cAAc,OAAO,EAAE,MAAM,CAAC,KAAK;;oBAAI,WAAW;oBAC3G,YAAY;wBACR,4BAAc,6LAAC,8OAAc;4BAAC,UAAS;sCAAO;;;;;;oBAElD;;;;;;;;;;;0BAGR,6LAAC,0OAAa;gBAAC,IAAI;oBAAE,gBAAgB;gBAAS;0BAC1C,cAAA,6LAAC,8MAAM;oBAAC,UAAU,CAAC;oBAAS,MAAK;oBAAQ,uBAAS,6LAAC,uKAAI;;;;;oBAAK,kBAAkB;oBAAM,SAAQ;oBAAY,SAAS;+BAAM,SAAS;;8BAC3H,KAAK,IAAI;;;;;;;;;;;;;;;;;AAK9B;GAlDM;KAAA;uCAmDS"}},
    {"offset": {"line": 2146, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/fields/ActivityFields.js"],"sourcesContent":["import { Badge, Box, Button, IconButton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TextField } from \"@mui/material\"\nimport { useSelector } from \"react-redux\"\nimport { selectLang } from \"../../../../features/app/appSlice\"\nimport { cellSx, cellSxChange, cellSxLink, headerSx } from \"../../../Util\"\nimport { Fragment, useState } from \"react\"\nimport { useGetUserDataQuery } from \"../../../../features/auth/authApiSlice\"\nimport { useFields } from \"../../../../features/fields/fieldsApiSlice\"\nimport FieldSelectionDialog from \"../../../dialog/FieldsSelectionDialog\"\nimport { useFieldArray } from \"react-hook-form\";\nimport { Delete, DragHandle, Menu, MoreVert, Percent, AddLocation } from \"@mui/icons-material\"\nimport ActivityFieldDialog from \"./ActivityFieldDialog\"\nimport { HARVEST, MARKET, SCOUT, GENERAL, SPRAY_TYPES, isArrayEmpty, HARVEST_TYPES } from \"../../../FarmUtil\"\nimport UpdateAllFieldsDialog from \"./UpdateAllFieldsDialog\"\nimport { getTotalQty, getTotalweight } from \"../ActivityUtil\"\nimport UpdateAllFieldsAreaDialog from \"./UpdateAllFieldsAreaDialog\"\nimport { blue, orange } from '@mui/material/colors';\n\nconst TRASHHOLD = 3;\n\n// function newFieldMarketParams(activity) {\n//     if (MARKET === activity.type) {\n//         return { marketingDestination: '', marketingQuality: null, marketingSize: null, waybill: '', income: 0 }\n//     }\n//     return null;\n// }\n\nexport function newFieldMarketParams() {\n    return { marketingDestination: '', marketingQuality: null, marketingSize: null, waybill: '', income: 0 }\n\n}\n\nconst ActivityFields = ({ activity, getValues, control, register, errors, activityArea, crop, openWaypointSelection, setOpenWaypointSelection, pointsCount, scoutParams }) => {\n\n    const { fields, append, prepend, remove, swap, move, insert, update, replace } = useFieldArray({\n        control, // control props comes from useForm (optional: if you are using FormContext)\n        name: \"fields\", // unique name for your Field Array\n        keyName: \"key\",\n        rules: { required: true }\n    });\n    const text = useSelector(selectLang)\n    const { data: user } = useGetUserDataQuery()\n    const fieldsByYear = useFields(getValues('year'))\n\n\n\n    const [open, setOpen] = useState(false);\n    const [openBulkUpdateFields, setOpenBulkUpdateFields] = useState(false);\n    const [openBulkUpdateFieldsArea, setOpenBulkUpdateFieldsArea] = useState(false);\n\n    const [selectedRow, setSelectedRow] = useState(null);\n    const [selectedIndex, setSelectedIndex] = useState(null);\n    const [expendFields, setExpendFields] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleOpenEditRow = (index, row) => {\n        setSelectedRow(row);\n        setSelectedIndex(index);\n    };\n\n\n    const handleCloseEditRow = () => {\n        setSelectedRow(null);\n        setSelectedIndex(null);\n    };\n\n    const handleRemoveRow = (index) => {\n        setSelectedRow(null);\n        setSelectedIndex(null);\n        remove(index)\n    };\n\n\n    const handleClose = (selectedFields) => {\n        setOpen(false);\n        if (selectedFields) {\n            const alreadySelectedIDs = fields.map(e => e.field.id);\n            const newtlySelectedFields = selectedFields.filter(e => !alreadySelectedIDs.includes(e.id)).map(e => {\n                return {\n                    field: e,\n                    activityArea: e.area,\n                    fieldNote: null,\n                    actualExecution: null,\n                    qty: 0,\n                    weight: 0,\n                    fieldMarketParams: MARKET === activity.type ? newFieldMarketParams() : null,\n                }\n            }\n            );\n            append(newtlySelectedFields)\n        }\n    };\n\n    const isWaypointsDisabled = () => {\n\n        if (SCOUT === activity.type && isArrayEmpty(scoutParams?.scouts)) {\n            return true;\n        }\n        return isArrayEmpty(fields);\n    }\n\n    const handleCloseBulkUpdateFields = () => {\n        setOpenBulkUpdateFields(false);\n    };\n\n    const handleCloseBulkUpdateFieldsArea = () => {\n        setOpenBulkUpdateFieldsArea(false);\n    };\n\n    const getFields = () => {\n        return (expendFields && fields.length > TRASHHOLD) ? fields : fields.slice(0, TRASHHOLD);\n    }\n\n    const disabledSelections = SPRAY_TYPES.concat(SCOUT).includes(activity.type) && crop === null;\n\n    const isHarvest = HARVEST_TYPES.includes(activity.type);\n\n\n    const LocationIconSx = () => {\n        if (pointsCount && pointsCount > 0) {\n            return { color: blue[800] };\n        }\n        else if (isWaypointsDisabled(fields)) {\n            return null;\n        } else {\n            return { color: orange[800] };\n\n        }\n    }\n\n\n    const getAmountTitle = () => {\n        if (isHarvest) {\n            return text.qty;\n        } else {\n            return `${text[user.areaUnit]}`;\n        }\n    }\n\n    const getTotalValue = () => {\n        if (isHarvest) {\n            return getTotalQty(fields, 0);\n        } else {\n            return activityArea;\n        }\n    }\n\n    return (\n        <Box margin={1} display={'flex'} flexDirection={'column'}>\n            <Box display={'flex'} flex={1} justifyContent={'space-between'} alignItems={'center'}>\n                <Box>\n                    <Button disabled={disabledSelections} size='large' color={errors.fields ? 'error' : 'primary'} disableElevation={true} variant=\"contained\" onClick={handleClickOpen}>{text.fields} </Button>\n                    {fields.length > TRASHHOLD &&\n                        <IconButton sx={{ marginLeft: 1, marginRight: 1 }} onClick={() => setExpendFields(!expendFields)}>\n                            <Badge badgeContent={fields.length} color=\"info\">\n                                {expendFields && <Menu fontSize='large' />}\n                                {!expendFields && <DragHandle fontSize='large' />}                            </Badge>\n                        </IconButton>\n                    }\n                </Box>\n                <Box>\n                    {[HARVEST].includes(activity.type) && <IconButton size='large' disabled={isArrayEmpty(fields)} onClick={_ => setOpenBulkUpdateFields(true)}><MoreVert fontSize='large' /></IconButton>}\n                    {[SCOUT, GENERAL].includes(activity.type) && <IconButton size='large' disabled={isWaypointsDisabled(fields)} onClick={() => setOpenWaypointSelection(true)}><AddLocation sx={LocationIconSx()} fontSize='large' /></IconButton>}\n                    {![MARKET].includes(activity.type) && <IconButton size='large' disabled={isArrayEmpty(fields)} onClick={_ => setOpenBulkUpdateFieldsArea(true)}><Percent fontSize='large' /></IconButton>}\n                    <IconButton size='large' disabled={isArrayEmpty(fields)} onClick={e => remove()}><Delete fontSize='large' /></IconButton>\n                </Box>\n            </Box>\n\n            <TableContainer >\n                <Table size=\"small\" sx={{ margin: 0, padding: 0 }} aria-label=\"a dense table\">\n                    <TableHead>\n                        <TableRow  >\n                            <TableCell sx={headerSx} >{text.field}</TableCell>\n                            <TableCell sx={headerSx}>{text.alias}</TableCell>\n                            <TableCell sx={headerSx}>{text.crop}</TableCell>\n                            <TableCell sx={headerSx}>{text.variety}</TableCell>\n                            <TableCell sx={headerSx}>{getAmountTitle()}</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {getFields().map((row, index) =>\n                            <Row key={row.key} index={index} row={row} text={text} register={register} remove={remove} onClick={() => handleOpenEditRow(index, row)} isHarvest={isHarvest} />\n                        )}\n                        <TableRow>\n                            <TableCell sx={headerSx} colSpan={4}>{`${text.total} ${getAmountTitle()}`}</TableCell>\n                            <TableCell sx={headerSx} >{getTotalValue()}</TableCell>\n                        </TableRow>\n                    </TableBody>\n                </Table>\n            </TableContainer>\n            <FieldSelectionDialog open={open} fields={fieldsByYear} handleClose={handleClose} cropId={crop?.id} />\n            {selectedRow && <ActivityFieldDialog selectedIndex={selectedIndex} selectedRow={selectedRow} activityType={activity.type} handleClose={handleCloseEditRow} update={update} remove={() => handleRemoveRow(selectedIndex)} prepend={prepend} />}\n            {openBulkUpdateFields && <UpdateAllFieldsDialog open={openBulkUpdateFields} text={text} totalQty={getTotalQty(fields)}\n                fields={fields}\n                totalWeight={getTotalweight(fields)}\n                weightUnit={user.weightUnit}\n                activityArea={activityArea}\n                handleClose={handleCloseBulkUpdateFields}\n                replace={replace} />}\n            {openBulkUpdateFieldsArea && <UpdateAllFieldsAreaDialog open={openBulkUpdateFieldsArea} text={text}\n                activityArea={activityArea}\n                fields={fields}\n                areaUnit={user.areaUnit}\n                handleClose={handleCloseBulkUpdateFieldsArea}\n                replace={replace} />}\n        </Box>\n    )\n}\nfunction Row(props) {\n    const { row, index, text, onClick, register, remove, isHarvest } = props;\n\n    //        {...register(`test.${index}.value`)} \n\n    return (\n        <Fragment   >\n            <TableRow\n                {...register(`field.${index}.fieldMarketParams`)}\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\n                <TableCell onClick={onClick} sx={cellSxLink} >{row.field.name}</TableCell>\n                <TableCell sx={cellSx}>{row.field.alias}</TableCell>\n                <TableCell sx={cellSx} >{row.field.cropName}</TableCell>\n                <TableCell sx={cellSx}>{row.field.varietyName}</TableCell>\n                {!isHarvest && <TableCell sx={row.activityArea === row.field.area ? cellSx : cellSxChange}>\n                    <Box {...register(`field.${index}.activityArea`)}>\n                        {row.activityArea.toFixed(2)}\n                    </Box>\n                </TableCell>}\n                {isHarvest && <TableCell sx={cellSx}>{row.qty}</TableCell>}\n            </TableRow>\n        </Fragment>\n    );\n}\nexport default ActivityFields"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2782, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/waypoints/ActivityWaypoints.js"],"sourcesContent":["import { useFieldArray } from \"react-hook-form\";\nimport WaypointSelectionDialog from \"../../../dialog/WaypointSelectionDialog\"\n\nconst ActivityWaypoints = ({ getValues, control, openWaypointSelection, setOpenWaypointSelection, activity, setPointsCount, activityDef }) => {\n\n    const { fields, replace } = useFieldArray({\n        control,\n        name: \"points\",\n        keyName: \"key\",\n        rules: { required: false }\n    });\n\n    const handleCloseWaypoints = (values) => {\n        setOpenWaypointSelection(false);\n        if (values) {\n            replace(values);\n            setPointsCount(values.length);\n        }\n    }\n\n    return (\n        <WaypointSelectionDialog activityType={activity.type} activityDef={activityDef} open={openWaypointSelection} handleClose={handleCloseWaypoints} fields={getValues('fields')} waypoints={fields} />\n    )\n}\n\nexport default ActivityWaypoints"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEA,IAAM,oBAAoB;QAAG,kBAAA,WAAW,gBAAA,SAAS,8BAAA,uBAAuB,iCAAA,0BAA0B,iBAAA,UAAU,uBAAA,gBAAgB,oBAAA;;IAExH,IAA4B,iBAAA,IAAA,kLAAa,EAAC;QACtC,SAAA;QACA,MAAM;QACN,SAAS;QACT,OAAO;YAAE,UAAU;QAAM;IAC7B,IALQ,SAAoB,eAApB,QAAQ,UAAY,eAAZ;IAOhB,IAAM,uBAAuB,SAAC;QAC1B,yBAAyB;QACzB,IAAI,QAAQ;YACR,QAAQ;YACR,eAAe,OAAO,MAAM;QAChC;IACJ;IAEA,qBACI,6LAAC,4JAAuB;QAAC,cAAc,SAAS,IAAI;QAAE,aAAa;QAAa,MAAM;QAAuB,aAAa;QAAsB,QAAQ,UAAU;QAAW,WAAW;;;;;;AAEhM;GApBM;;QAE0B,kLAAa;;;KAFvC;uCAsBS"}},
    {"offset": {"line": 2843, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/resources/ActivityResourceDialog.js"],"sourcesContent":["import { AppBar, Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, InputAdornment, MenuItem, Toolbar, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { useSelector } from \"react-redux\";\nimport { selectLang } from \"../../../../features/app/appSlice\";\nimport { useEffect, useState } from \"react\";\nimport { useGetUserDataQuery } from \"../../../../features/auth/authApiSlice\";\nimport { AREA_UNIT, FERTILIZER, IRRIGARION_TYPES, PESTICIDE, QTY_PER_AREA_UNIT_RESOURCE_TYPE, SECONDARY_QTY_RESOURCES, SPRAY_TYPES, WAREHOUSE_RESOURCE_TYPE, WATER, WORKER_GROUP, getResourceTypeText, getUnitText, isMobile, isStringEmpty, safeDiv } from \"../../../FarmUtil\";\nimport { Cancel, Close, Delete, Save } from \"@mui/icons-material\";\nimport { calacTotalPesticideVolume } from \"../../../FarmCalculator\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\nimport { Transition } from \"../../../Util\";\n\nconst getQtyPerWorker = (selectedRow) => {\n\n    if (selectedRow.qty && selectedRow.secondaryQty && selectedRow.secondaryQty != 0) {\n        return (selectedRow.qty / selectedRow.secondaryQty).toFixed(2);\n    }\n    return 0;\n}\n\nconst getSecondaryQtyConfig = (selectedRow, user) => {\n    const val = SECONDARY_QTY_RESOURCES.find(e => e.type === selectedRow.resource.type);\n    if (val && val.gg === true && user.gg === false) {\n        return null;\n    }\n    return val;\n}\n\nconst isQtyPerAreaUnitFunc = (selectedRow, irrigationParams) => {\n    if (FERTILIZER === selectedRow.resource.type && !isStringEmpty(irrigationParams?.fertilizeMethod)) {\n        return false;\n    }\n\n    if (PESTICIDE === selectedRow.resource.type && selectedRow?.pesticideListItem) {\n        return false;\n    }\n\n    return QTY_PER_AREA_UNIT_RESOURCE_TYPE.includes(selectedRow.resource.type)\n}\n\nconst ActivityResourceDialog = ({ selectedRow, selectedIndex, handleClose, update, warehouses, activityArea, remove, resourceUnit, activityType, irrigationParams, sprayParams }) => {\n    const text = useSelector(selectLang);\n    const { data: user } = useGetUserDataQuery()\n    const [note, setNote] = useState(selectedRow.note ? selectedRow.note : '');\n    const [qty, setQty] = useState(selectedRow.qty);\n    const [qtyPerAreaUnit, setQtyPerAreaUnit] = useState(safeDiv(selectedRow.qty, activityArea));\n\n    const [secondaryQty, setSecondaryQty] = useState(selectedRow.secondaryQty);\n\n\n    const [tariff, setTariff] = useState(selectedRow.tariff ? selectedRow.tariff : 0);\n    const [warehouse, setWarehouse] = useState(selectedRow.warehouse);\n\n    const [manualTariff, setManualTariff] = useState(selectedRow.manualTariff);\n    const [qtyPerWorker, setQtyPerWorker] = useState(getQtyPerWorker(selectedRow));\n    const [dosage, setDosage] = useState(selectedRow.dosage);\n\n    const secondaryQtyConfig = getSecondaryQtyConfig(selectedRow, user);\n    const isWarehouse = WAREHOUSE_RESOURCE_TYPE.includes(selectedRow.resource.type);\n    const isQtyPerAreaUnit = isQtyPerAreaUnitFunc(selectedRow, irrigationParams);\n    const isWorkerGropup = WORKER_GROUP === selectedRow.resource.type;\n    const isWater = WATER === selectedRow.resource.type;\n    const isDosage = selectedRow?.pesticideListItem;\n\n\n\n    console.log(selectedRow)\n    const autoCalc = SPRAY_TYPES.concat(IRRIGARION_TYPES).includes(activityType) && [WATER, PESTICIDE, FERTILIZER].includes(selectedRow.resource.type) || AREA_UNIT.toUpperCase() === selectedRow.resource.usageUnit;\n    const onAction = (save) => {\n        if (save) {\n            if (autoCalc) {\n                const qtyChanged = selectedRow.qty !== qty;\n                if (qtyChanged) {\n                    selectedRow.manualQty = true;\n                }\n            }\n            selectedRow.qty = qty;\n            selectedRow.note = note;\n            selectedRow.tariff = tariff;\n            selectedRow.totalCost = tariff * qty;\n            selectedRow.warehouse = warehouse;\n            selectedRow.manualTariff = manualTariff;\n            if (secondaryQtyConfig || isWorkerGropup) {\n                selectedRow.secondaryQty = secondaryQty;\n            }\n            if (isDosage) {\n                selectedRow.dosage = dosage;\n            }\n            update(selectedIndex, selectedRow);\n        }\n        handleClose(save);\n    }\n\n    const onTariffChange = (value) => {\n        setTariff(value);\n        setManualTariff(true);\n    }\n\n    const onQtyPerAreUnitChange = (value) => {\n        setQtyPerAreaUnit(value);\n        if (value && activityArea) {\n            setQty((value * activityArea).toFixed());\n        }\n    }\n\n    const onQtyChange = (value) => {\n        setQty(value);\n        if (isQtyPerAreaUnit && value && activityArea && activityArea !== 0) {\n            setQtyPerAreaUnit((value / activityArea).toFixed(2));\n        }\n    }\n\n    const onDosageChange = (value) => {\n        setDosage(value);\n        if (value && activityArea && !selectedRow.manualQty) {\n            const pesticideListItem = selectedRow.pesticideListItem;\n            const calcQty = calacTotalPesticideVolume(\n                pesticideListItem.unit, value, sprayParams.volumePerAreaUnit, activityArea)\n            setQty(calcQty);\n        }\n    }\n\n    const onSecondaryQtyChange = (value) => {\n        if (secondaryQtyConfig.lessThanQty) {\n            if (qty) {\n                if (value <= qty) {\n                    setSecondaryQty(value);\n                } else {\n                    setSecondaryQty(qty);\n                }\n            }\n        } else {\n            setSecondaryQty(value);\n        }\n    }\n\n\n    const onQtyPerWorkerChange = (value) => {\n        setQtyPerWorker(value);\n        if (value && secondaryQty) {\n            setQty((value * secondaryQty).toFixed(2));\n        }\n    }\n\n    const onWorkerCountChange = (value) => {\n        const workerCount = value ? value.toFixed(0) : 0\n        setSecondaryQty(workerCount);\n        if (workerCount && qtyPerWorker) {\n            setQty((workerCount * qtyPerWorker).toFixed(2));\n        }\n    }\n\n\n    return (\n        <Dialog\n            open={selectedRow !== null}\n            disableRestoreFocus={true}\n            fullScreen={isMobile()} fullWidth={!isMobile()}\n            slots={{ transition: Transition }}\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title=\n                {`${getResourceTypeText(selectedRow.resource.type, text)}:  ${selectedRow.resource.name}`}\n            />\n            <DialogContent /*sx={{ minHeight: isWarehouse ? height : null }}*/>\n                <Box display={'flex'} flex={1} flexDirection={'column'}  >\n                    <TextFieldBase value={qty} onChange={e => onQtyChange(Number(e.target.value))}\n                        type='number' label={text.qty}\n                        InputProps={{\n                            endAdornment: <InputAdornment position=\"end\">{\n                                getUnitText(resourceUnit, user.areaUnit, text)\n                            }\n                            </InputAdornment>,\n                        }}\n                        fullWidth={true}\n                    />\n\n                    {isDosage &&\n                        <TextFieldBase value={dosage} onChange={e => onDosageChange(Number(e.target.value))}\n                            type='number' label={`${text.dosage}`}\n                            fullWidth\n                            InputProps={{\n                                endAdornment: <InputAdornment position=\"end\">{\n                                    getUnitText(selectedRow.pesticideListItem.unit, user.areaUnit, text)\n                                }\n                                </InputAdornment>,\n                            }}\n                        />}\n                    {isQtyPerAreaUnit &&\n                        <TextFieldBase value={qtyPerAreaUnit} onChange={e => onQtyPerAreUnitChange(Number(e.target.value))}\n                            type='number' label={`${text.qty}/${text[user.areaUnit]}`}\n                            fullWidth\n                        />}\n\n                    {secondaryQtyConfig &&\n                        <TextFieldBase value={secondaryQty ? secondaryQty : 0} onChange={e => onSecondaryQtyChange(Number(e.target.value))}\n                            type='number' label={`${text[secondaryQtyConfig.label]}`}\n                            fullWidth\n                        />}\n                    {isWorkerGropup && <Box display={'flex'} flex={1} flexDirection={'row'}>\n                        <TextFieldBase value={secondaryQty ? secondaryQty : 0} onChange={e => onWorkerCountChange(Number(e.target.value))}\n                            type='number' label={`${text.workerCount}`}\n                            fullWidth\n                        />\n                        <Box margin={1} />\n                        <TextFieldBase value={qtyPerWorker} onChange={e => onQtyPerWorkerChange(Number(e.target.value))}\n                            type='number' label={`${text.qtyPerWorker}`}\n                            fullWidth\n                        />\n                    </Box>}\n                    {user.financial && <TextFieldBase value={tariff} onChange={e => onTariffChange(Number(e.target.value))}\n                        type='number' label={text.unitCost}\n                        fullWidth\n                        InputProps={{\n                            endAdornment: <InputAdornment position=\"end\">{\n                                user.currency\n                            }\n                            </InputAdornment>,\n                        }}\n                    />}\n                    {isWarehouse &&\n\n                        <TextFieldBase\n                            value={warehouse?.id}\n                            id=\"outlined-select-warehouse\"\n                            select\n                            label={text.warehouse}\n                            onChange={e => setWarehouse(warehouses.find(w => w.id === Number(e.target.value)))}\n\n                        >\n                            {warehouses.filter(e => e.active).map((option) => (\n                                <MenuItem key={option.id} value={option.id}>\n                                    {option.name}\n                                </MenuItem>\n                            ))}\n                        </TextFieldBase>}\n\n                    {/* {isWarehouse && <Autocomplete\n                        value={warehouse}\n                        onChange={(_, data) => setWarehouse(data)}\n                        options={warehouses.filter(e => e.active)}\n                        fullWidth\n                        size='medium'\n                        ListboxProps={{ style: { maxHeight: height - 150, } }}\n                        getOptionLabel={(option) => option ? option.name : ''}\n                        isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n                        renderInput={(params) => <TextFieldBase  {...params}\n                            label={text.warehouse} />}\n                    />} */}\n                    <TextFieldBase value={note} onChange={e => setNote(e.target.value)} fullWidth={true} label={text.resourceNote} />\n                </Box>\n                <DialogActions sx={{ paddingTop: 4, justifyContent: 'center' }}>\n                    <Button size='large' endIcon={<Delete />} disableElevation={true} variant='outlined' onClick={remove}>{text.delete}\n                    </Button>\n                    <Button size='large' disableElevation={true} variant='contained'\n                        endIcon={<Save />}\n                        onClick={() => onAction(true)} >\n                        {text.save}\n                    </Button>\n                </DialogActions>\n            </DialogContent>\n        </Dialog>\n    )\n}\n\n\nexport default ActivityResourceDialog;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3297, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/resources/UpdateResourcesQtyDialog.js"],"sourcesContent":["import { AppBar, Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, MenuItem, TextField, Toolbar, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { Cancel, Close, Save } from \"@mui/icons-material\";\nimport { useState } from \"react\";\nimport { AREA_UNIT, getUnitText, isMobile } from \"../../../FarmUtil\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\nimport { Transition } from \"../../../Util\";\n\nconst UpdateResourcesQtyDialog = ({ open, units, text, handleClose, areaUnit, activityArea }) => {\n\n    const [qty, setQty] = useState('');\n    const [unit, setUnit] = useState('');\n\n    const onAction = (val) => {\n        handleClose(val ? unit : null, val ? qty : null);\n        setQty('');\n        setUnit('')\n    }\n\n    const handleSetUnit = (val) => {\n        if (val.toLowerCase() === AREA_UNIT && activityArea) {\n            setQty(activityArea);\n        }\n        setUnit(val);\n    }\n\n    return (\n        <Dialog\n            open={open}\n            disableRestoreFocus={true}\n            fullScreen={isMobile()} fullWidth={!isMobile()}\n            slots={{ transition: Transition }}\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title=\n                {text.bulkQtyUpdate}\n            />\n            <DialogContent>\n                <Box display={'flex'} flexDirection={'row'} alignItems={'center'} >\n                    <TextField\n                        sx={{ marginTop: 0.5 }}\n                        value={unit}\n                        id=\"outlined-select-unit\"\n                        onChange={e => handleSetUnit(e.target.value)}\n                        fullWidth\n                        select\n                        label={text.unit}\n                    >\n                        <MenuItem key={''} value={''}><em /></MenuItem>\n                        {units.map((option) => (\n                            <MenuItem key={option} value={option}>\n                                {getUnitText(option, areaUnit, text)}\n                            </MenuItem>\n                        ))}\n                    </TextField>\n                    <Box margin={1} />\n                    <TextFieldBase type='number' value={qty} onChange={e => setQty(Number(e.target.value))} fullWidth={true} label={text.qty} />\n                </Box>\n                <DialogActions  sx={{ paddingTop: 4, justifyContent: 'center' }}>\n                    <Button disabled={'' === unit || '' === qty} size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} >\n                        {text.save}\n                    </Button>\n                </DialogActions>\n            </DialogContent>\n\n        </Dialog>\n    )\n}\nexport default UpdateResourcesQtyDialog;\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AAEA,IAAM,2BAA2B;QAAG,aAAA,MAAM,cAAA,OAAO,aAAA,MAAM,oBAAA,aAAa,iBAAA,UAAU,qBAAA;;IAE1E,IAAsB,qLAAA,IAAA,yKAAQ,EAAC,SAAxB,MAAe,cAAV,SAAU;IACtB,IAAwB,sLAAA,IAAA,yKAAQ,EAAC,SAA1B,OAAiB,eAAX,UAAW;IAExB,IAAM,WAAW,SAAC;QACd,YAAY,MAAM,OAAO,MAAM,MAAM,MAAM;QAC3C,OAAO;QACP,QAAQ;IACZ;IAEA,IAAM,gBAAgB,SAAC;QACnB,IAAI,IAAI,WAAW,OAAO,qIAAS,IAAI,cAAc;YACjD,OAAO;QACX;QACA,QAAQ;IACZ;IAEA,qBACI,6LAAC,8MAAM;QACH,MAAM;QACN,qBAAqB;QACrB,YAAY,IAAA,oIAAQ;QAAI,WAAW,CAAC,IAAA,oIAAQ;QAC5C,OAAO;YAAE,YAAY,kIAAU;QAAC;;0BAEhC,6LAAC,iJAAY;gBAAC,SAAS;2BAAM,SAAS;;gBAClC,OACC,KAAK,aAAa;;;;;;0BAEvB,6LAAC,0OAAa;;kCACV,6LAAC,kMAAG;wBAAC,SAAS;wBAAQ,eAAe;wBAAO,YAAY;;0CACpD,6LAAC,0NAAS;gCACN,IAAI;oCAAE,WAAW;gCAAI;gCACrB,OAAO;gCACP,IAAG;gCACH,UAAU,SAAA;2CAAK,cAAc,EAAE,MAAM,CAAC,KAAK;;gCAC3C,SAAS;gCACT,MAAM;gCACN,OAAO,KAAK,IAAI;;kDAEhB,6LAAC,sNAAQ;wCAAU,OAAO;kDAAI,cAAA,6LAAC;;;;;uCAAhB;;;;;oCACd,MAAM,GAAG,CAAC,SAAC;6DACR,6LAAC,sNAAQ;4CAAc,OAAO;sDACzB,IAAA,uIAAW,EAAC,QAAQ,UAAU;2CADpB;;;;;;;;;;;;0CAKvB,6LAAC,kMAAG;gCAAC,QAAQ;;;;;;0CACb,6LAAC,kJAAa;gCAAC,MAAK;gCAAS,OAAO;gCAAK,UAAU,SAAA;2CAAK,OAAO,OAAO,EAAE,MAAM,CAAC,KAAK;;gCAAI,WAAW;gCAAM,OAAO,KAAK,GAAG;;;;;;;;;;;;kCAE5H,6LAAC,0OAAa;wBAAE,IAAI;4BAAE,YAAY;4BAAG,gBAAgB;wBAAS;kCAC1D,cAAA,6LAAC,8MAAM;4BAAC,UAAU,OAAO,QAAQ,OAAO;4BAAK,MAAK;4BAAQ,uBAAS,6LAAC,uKAAI;;;;;4BAAK,kBAAkB;4BAAM,SAAQ;4BAAY,SAAS;uCAAM,SAAS;;sCAC5I,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;;;AAOlC;GA3DM;KAAA;uCA4DS"}},
    {"offset": {"line": 3494, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/resources/IrrigationConfigDialog.js"],"sourcesContent":["import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, InputAdornment, MenuItem, TextField, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { Cancel, Clear, Save } from \"@mui/icons-material\";\nimport { useEffect, useState } from \"react\";\nimport { PER_AREA_UNIT_PER_DAY, PER_AREA_UNIT_PER_IRREGATION_DAY, PER_WATER_UNIT, TOTAL_PER_AREA_UNIT, TOTAL_PER_FIELD, calcIrrigationDays } from \"../../../FarmCalculator\";\nimport DecoratedBox from \"../../../../components/ui/DecoratedBox\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\n\n\n\nconst IrrigationConfigDialog = ({ open, units, text, handleClose, areaUnit, activityArea, days, irrigationParams }) => {\n\n    const [irrigationMethod, setIrrigationMethod] = useState(irrigationParams?.irrigationMethod ? irrigationParams?.irrigationMethod : '');\n    const [fertilizeMethod, setFertilizeMethod] = useState(irrigationParams?.fertilizeMethod ? irrigationParams?.fertilizeMethod : '');\n    const [frequency, setFrequency] = useState(irrigationParams?.frequency ? irrigationParams?.frequency : 1);\n    // const [irrigationDays, setIrrigationDays] = useState(calcIrrigationDays(days,irrigationParams.frequency));\n\n    // useEffect(() => {\n    //     if(frequency !== 0){\n    //         calcIrrigationDays(days,frequency);\n    //     }\n    // }, [frequency]);\n\n    const onAction = (val) => {\n        handleClose(val ? { irrigationMethod, fertilizeMethod, frequency } : null);\n    }\n\n    const clear = () => {\n        // setIrrigationDays(1);\n        setFrequency(1);\n        setIrrigationMethod('');\n        setFertilizeMethod('');\n\n    }\n\n    const handleSetIrrigationMethod = (val) => {\n        setIrrigationMethod(val);\n    }\n\n    const handleSetFrequency = (val) => {\n        if (val < 1) {\n            setFrequency(1);\n        } else if (val > days) {\n            setFrequency(days);\n        } else {\n            setFrequency(val)\n        }\n    }\n\n    return (\n        <Dialog\n            open={open}\n            // onClose={handleClose}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullWidth\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title=\n                {''}\n            />\n            <DialogContent>\n                <TextField\n                    value={irrigationMethod}\n                    id=\"outlined-select_irrigation-method\"\n                    onChange={e => handleSetIrrigationMethod(e.target.value)}\n                    fullWidth\n                    select\n                    label={text.irrigationMethod}\n                >\n                    <MenuItem key={''} value={''}><em style={{ height: 20 }} /></MenuItem>\n                    <MenuItem value={PER_AREA_UNIT_PER_DAY}>{`${text[areaUnit]}/${text.day}`}</MenuItem>\n                    <MenuItem value={PER_AREA_UNIT_PER_IRREGATION_DAY}>{`${text[areaUnit]}/${text.irrigationDay}`}</MenuItem>\n                    <MenuItem value={TOTAL_PER_AREA_UNIT}>{`${text.total}/${text[areaUnit]}`}</MenuItem>\n                    <MenuItem value={TOTAL_PER_FIELD}>{`${text.total}/  ${text.field}`}</MenuItem>\n                </TextField>\n\n                {PER_AREA_UNIT_PER_IRREGATION_DAY === irrigationMethod &&\n                    <Box margin={2} />}\n                {PER_AREA_UNIT_PER_IRREGATION_DAY === irrigationMethod &&\n                    <Box display={'flex'} flexDirection={'row'} alignItems={'center'}>\n                        <TextFieldBase sx={{ flex: 1 }}\n                            value={PER_AREA_UNIT_PER_IRREGATION_DAY !== irrigationMethod ? '' : frequency} onChange={e => handleSetFrequency(Number(e.target.value))}\n                            type='number' label={`${text.frequency}, ${text.every}`}\n                            fullWidth\n                            InputProps={{\n                                endAdornment: <InputAdornment position=\"end\">{\n                                    text.days\n                                }\n                                </InputAdornment>,\n                            }}\n                        />\n                        <Box >\n                            <DecoratedBox value={`${text.irrigationDays}: ${calcIrrigationDays(days, frequency)}`} />\n                        </Box>\n\n                    </Box>\n\n                }\n                <Box margin={2} />\n                <TextField\n                    value={fertilizeMethod}\n                    id=\"outlined-select-fertilize-unit\"\n                    onChange={e => setFertilizeMethod(e.target.value)}\n                    fullWidth\n                    select\n                    label={text.fertilizeMethod}\n                >\n                    <MenuItem key={''} value={''}>{<em style={{ height: 20 }} />}</MenuItem>\n                    <MenuItem value={PER_WATER_UNIT}>{`${text.per}${text.m3}`}</MenuItem>\n                    <MenuItem value={PER_AREA_UNIT_PER_DAY}>{`${text[areaUnit]}/${text.day}`}</MenuItem>\n                    <MenuItem value={PER_AREA_UNIT_PER_IRREGATION_DAY}>{`${text[areaUnit]}/${text.irrigationDay}`}</MenuItem>\n                    <MenuItem value={TOTAL_PER_AREA_UNIT}>{`${text.total}/${text[areaUnit]}`}</MenuItem>\n                    <MenuItem value={TOTAL_PER_FIELD}>{`${text.total}/${text.field}`}</MenuItem>\n                </TextField>\n\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Button size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} >\n                    {text.save}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\nexport default IrrigationConfigDialog;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3837, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/resources/SprayParams.js"],"sourcesContent":["import { Box, Button, Dialog, DialogActions, DialogContent } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { Cancel, Save } from \"@mui/icons-material\";\nimport { useEffect, useState } from \"react\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\n\n\nconst SprayParams = ({ open, units, text, handleClose, areaUnit, activityArea, days, sprayParams }) => {\n    const [speed, setSpeed] = useState(sprayParams?.speed ? sprayParams?.speed : '');\n    const [pto, setPto] = useState(sprayParams?.pto);\n    const [psi, setPsi] = useState(sprayParams?.psi);\n\n    const onAction = (val) => {\n        handleClose(val ? { speed, pto, psi } : null);\n    }\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullWidth\n        >\n            <DialogAppBar onClose={() => onAction(false)} title={\"\"} />\n\n            <DialogContent>\n                <Box display={'flex'} flexDirection={'row'} alignItems={'center'}>\n                    <TextFieldBase sx={{ flex: 1 }}\n                        value={speed} onChange={e => setSpeed(Number(e.target.value))}\n                        type='number' label={`${text.speed}`}\n                        fullWidth\n                    />\n                </Box>\n                <Box margin={2} />\n                <Box display={'flex'} flexDirection={'row'} alignItems={'center'}>\n                    <TextFieldBase sx={{ flex: 1 }}\n                        value={pto} onChange={e => setPto(Number(e.target.value))}\n                        type='number' label={`PTO`}\n                        fullWidth\n                    />\n                </Box>\n                <Box margin={2} />\n                <Box display={'flex'} flexDirection={'row'} alignItems={'center'}>\n                    <TextFieldBase sx={{ flex: 1 }}\n                        value={psi} onChange={e => setPsi(Number(e.target.value))}\n                        type='number' label={`PSI`}\n                        fullWidth\n                    />\n                </Box>\n\n\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Button size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} >\n                    {text.save}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\nexport default SprayParams;\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAGA,IAAM,cAAc;QAAG,aAAA,MAAM,cAAA,OAAO,aAAA,MAAM,oBAAA,aAAa,iBAAA,UAAU,qBAAA,cAAc,aAAA,MAAM,oBAAA;;IACjF,IAA0B,qLAAA,IAAA,yKAAQ,EAAC,CAAA,wBAAA,kCAAA,YAAa,KAAK,IAAG,wBAAA,kCAAA,YAAa,KAAK,GAAG,SAAtE,QAAmB,cAAZ,WAAY;IAC1B,IAAsB,sLAAA,IAAA,yKAAQ,EAAC,wBAAA,kCAAA,YAAa,GAAG,OAAxC,MAAe,eAAV,SAAU;IACtB,IAAsB,sLAAA,IAAA,yKAAQ,EAAC,wBAAA,kCAAA,YAAa,GAAG,OAAxC,MAAe,eAAV,SAAU;IAEtB,IAAM,WAAW,SAAC;QACd,YAAY,MAAM;YAAE,OAAA;YAAO,KAAA;YAAK,KAAA;QAAI,IAAI;IAC5C;IAEA,qBACI,6LAAC,8MAAM;QACH,MAAM;QACN,mBAAgB;QAChB,oBAAiB;QACjB,SAAS;;0BAET,6LAAC,iJAAY;gBAAC,SAAS;2BAAM,SAAS;;gBAAQ,OAAO;;;;;;0BAErD,6LAAC,0OAAa;;kCACV,6LAAC,kMAAG;wBAAC,SAAS;wBAAQ,eAAe;wBAAO,YAAY;kCACpD,cAAA,6LAAC,kJAAa;4BAAC,IAAI;gCAAE,MAAM;4BAAE;4BACzB,OAAO;4BAAO,UAAU,SAAA;uCAAK,SAAS,OAAO,EAAE,MAAM,CAAC,KAAK;;4BAC3D,MAAK;4BAAS,OAAO,AAAC,GAAa,OAAX,KAAK,KAAK;4BAClC,SAAS;;;;;;;;;;;kCAGjB,6LAAC,kMAAG;wBAAC,QAAQ;;;;;;kCACb,6LAAC,kMAAG;wBAAC,SAAS;wBAAQ,eAAe;wBAAO,YAAY;kCACpD,cAAA,6LAAC,kJAAa;4BAAC,IAAI;gCAAE,MAAM;4BAAE;4BACzB,OAAO;4BAAK,UAAU,SAAA;uCAAK,OAAO,OAAO,EAAE,MAAM,CAAC,KAAK;;4BACvD,MAAK;4BAAS,OAAO;4BACrB,SAAS;;;;;;;;;;;kCAGjB,6LAAC,kMAAG;wBAAC,QAAQ;;;;;;kCACb,6LAAC,kMAAG;wBAAC,SAAS;wBAAQ,eAAe;wBAAO,YAAY;kCACpD,cAAA,6LAAC,kJAAa;4BAAC,IAAI;gCAAE,MAAM;4BAAE;4BACzB,OAAO;4BAAK,UAAU,SAAA;uCAAK,OAAO,OAAO,EAAE,MAAM,CAAC,KAAK;;4BACvD,MAAK;4BAAS,OAAO;4BACrB,SAAS;;;;;;;;;;;;;;;;;0BAMrB,6LAAC,0OAAa;gBAAC,IAAI;oBAAE,gBAAgB;gBAAS;0BAC1C,cAAA,6LAAC,8MAAM;oBAAC,MAAK;oBAAQ,uBAAS,6LAAC,uKAAI;;;;;oBAAK,kBAAkB;oBAAM,SAAQ;oBAAY,SAAS;+BAAM,SAAS;;8BACvG,KAAK,IAAI;;;;;;;;;;;;;;;;;AAK9B;GApDM;KAAA;uCAqDS"}},
    {"offset": {"line": 4036, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/resources/ActivityResources.js"],"sourcesContent":["import { Box, Button, TextField, IconButton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Badge, List, ListItemButton, ListItemText, ListItemIcon, ListItem } from \"@mui/material\"\nimport { useSelector } from \"react-redux\"\nimport { selectLang } from \"../../../../features/app/appSlice\"\nimport { cellSx, cellSxChange, cellSxLink, headerSx } from \"../../../Util\"\nimport { Fragment, useEffect, useState } from \"react\"\nimport { ACTIVITY_RESOURCES, AREA_UNIT, ENERGY, EQUIPMENT, FERTILIZER, HOUR, IRRIGARION_TYPES, IRRIGATION, IRRIGATION_PLAN, PESTICIDE, SCOUT, SPRAY, SPRAYER, SPRAY_TYPES, WAREHOUSE_RESOURCE_TYPE, WATER, getResourceTypeText, getResourceUsageUnit, getUnitText, isArrayEmpty } from \"../../../FarmUtil\"\nimport { useGetUserDataQuery } from \"../../../../features/auth/authApiSlice\"\nimport ResourcseSelectionDialog from \"../../../dialog/ResourcseSelectionDialog\"\nimport { Controller, useFieldArray } from \"react-hook-form\"\nimport { Agriculture, Delete, DragHandle, Error, Menu, MoreVert } from \"@mui/icons-material\"\nimport ActivityResourceDialog from \"./ActivityResourceDialog\"\nimport { useGetWarehousesQuery } from \"../../../../features/warehouses/warehouseApiSlice\"\nimport UpdateResourcesQtyDialog from \"./UpdateResourcesQtyDialog\"\nimport Calculator from \"../../../../icons/Calculator\"\nimport IrrigationConfigDialog from \"./IrrigationConfigDialog\"\nimport AlertDialog from \"../../../dialog/AlertDialog\"\nimport { calacTotalPesticideVolume, calcIrrigationDays, calcSprayVolume, calcSprayVolumePerArea, calcTotalFertilizerQty, calcTotalWaterQtyUtilFunc } from \"../../../FarmCalculator\"\nimport SprayParams from \"./SprayParams\"\n\nconst TRASHHOLD = 3;\nconst UNITS = [AREA_UNIT.toUpperCase(), HOUR.toUpperCase()]\n\n//const REQUIRED_RESOURCES = SPRAY_TYPES.concat(IRRIGARION_TYPES);\n\nconst ELEMENT_ID = 'resources'\n\nconst ActivityResources = ({ activity, control, errors, register, tariffs, activityArea, activityDef, days, irrigationParams, setValue, trigger, fieldsCount, sprayParams, scoutParams }) => {\n    const text = useSelector(selectLang)\n    const { data: user } = useGetUserDataQuery()\n    const [open, setOpen] = useState(false);\n    const [selectedRow, setSelectedRow] = useState(null);\n    const [selectedIndex, setSelectedIndex] = useState(null);\n    const [expendFields, setExpendFields] = useState(false);\n    const { data: warehouses, isSuccess: isWarehousesDefsSuccess } = useGetWarehousesQuery()\n    const [loadTariffs, setLoadTariffs] = useState(false);\n    const [openEditBulkQty, setOpenEditBulkQty] = useState(false);\n    const [openIrrigationConfig, setOpenIrrigationConfig] = useState(false);\n    const [openSprayParams, setOpenSprayParams] = useState(false);\n\n    const [showAlert, setShowAlert] = useState(false);\n\n    const disabledSelections = SPRAY_TYPES.concat([SCOUT]).includes(activity.type) && sprayParams?.crop === null;\n\n    const handleOpenEditRow = (index, row) => {\n        setSelectedRow(row);\n        setSelectedIndex(index);\n    };\n\n    const handleCloseEditRow = () => {\n        setSelectedRow(null);\n        setSelectedIndex(null);\n        trigger(['resources'])\n    };\n\n    const handleRemoveRow = (index) => {\n        setSelectedRow(null);\n        setSelectedIndex(null);\n        remove(index)\n\n    };\n    const valideArray = (arr, act) => {\n        if (IRRIGARION_TYPES.includes(act.type)) {\n            const water = arr.find(e => e.resource.type === WATER)\n\n            if (!water) {\n                return 'waterSource,waterQty';\n            } else if (water.qty <= 0) {\n                return 'waterQty';\n            }\n        }\n        if (SPRAY_TYPES.includes(act.type)) {\n            const sprayer = arr.find(e => e.resource.type === EQUIPMENT && e.resource.category === SPRAYER)\n            const pesticides = arr.find(e => e.resource.type === PESTICIDE)\n\n            if (!sprayer && !pesticides) {\n                return 'sprayer,pesticides';\n            } else if (!sprayer) {\n                return 'sprayer';\n            } else if (!pesticides) {\n                return 'pesticides';\n            }\n        }\n        return null;\n    }\n\n    const { fields, append, prepend, remove, swap, move, insert, update, } = useFieldArray({\n        control, // control props comes from useForm (optional: if you are using FormContext)\n        name: \"resources\", // unique name for your Field Array\n        keyName: \"key\",\n        rules: {\n            required: false,\n            validate: valideArray\n        }\n    });\n\n    const errorMsg = errors.resources?.root?.message?.split(\",\");\n\n    const runTariffMatch = () => {\n        if (tariffs) {\n            fields.map((row, index) => {\n                const tariff = tariffs.find(e => e.resource.id === row.resource.id);\n                if (tariff && row.manualTariff === false) {\n                    row.tariff = tariff.price;\n                    if (row.qty) {\n                        row.totalCost = tariff.price * row.qty;\n                    }\n                    update(index, row);\n                }\n            })\n        }\n    }\n\n    const resourceBulkUnits = Array.from(new Set(fields.filter(e => UNITS.includes(getResourceUsageUnit(e.resource, activityDef))).map(e => getResourceUsageUnit(e.resource, activityDef))));\n\n    useEffect(() => {\n        runTariffMatch();\n    }, [tariffs])\n\n    useEffect(() => {\n        if (loadTariffs === true) {\n            runTariffMatch();\n        }\n        setLoadTariffs(false);\n    }, [loadTariffs])\n\n\n\n    const updateActivityArea = () => {\n        fields.map((row, index) => {\n            if (row.manualQty === false) {\n                if (row.resource.usageUnit === AREA_UNIT.toUpperCase() && activityArea !== row.qty) {\n                    row.qty = activityArea;\n                    update(index, row);\n                }\n                else if (row.resource.type === PESTICIDE && row.pesticideListItem &&  row.dosage) {\n                    row.qty = calacTotalPesticideVolume(row.pesticideListItem.unit, row.dosage, sprayParams?.volumePerAreaUnit, activityArea)\n                    update(index, row);\n                }\n            }\n\n        })\n    }\n\n    useEffect(() => {\n        updateActivityArea();\n\n    }, [activityArea]);\n\n    const clearSingular = (newtlySelectedResources) => {\n        if (IRRIGARION_TYPES.concat(SPRAY_TYPES).includes(activity.type)) {\n            if (IRRIGARION_TYPES.includes(activity.type)) {\n                const ws = newtlySelectedResources.filter(e => e.resource.type === WATER)\n                if (!isArrayEmpty(ws)) {\n                    fields.forEach((e, index, arr) => {\n                        if (e.resource.type === WATER) {\n                            remove(index);\n                        }\n                    })\n                }\n            }\n            if (SPRAY_TYPES.includes(activity.type)) {\n                const sprayer = newtlySelectedResources.filter(e => e.resource.type === EQUIPMENT && e.resource.category === SPRAYER)\n                if (!isArrayEmpty(sprayer)) {\n                    fields.forEach((e, index, arr) => {\n                        if (e.resource.type === EQUIPMENT && e.resource.category === SPRAYER) {\n                            remove(index);\n                        }\n                    })\n                }\n            }\n\n        }\n        return newtlySelectedResources;\n    }\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n\n    const getResourceDefaultQty = (e) => {\n        return e?.usageUnit.toLowerCase() === AREA_UNIT ? activityArea : 0;\n\n    }\n\n    const handleClose = (selectedResources) => {\n        setOpen(false);\n        if (selectedResources) {\n            const alreadySelectedIDs = fields.map(e => e.resource.id);\n            let newtlySelectedResources = selectedResources.filter(e => !alreadySelectedIDs.includes(e.resouece ? e.resource.id : e.id)).map(e => {\n                const r = e.resource ? e.resource : e;\n                const pesticideListItem = e.pestId ? e : null;\n                const qty = pesticideListItem ? calacTotalPesticideVolume(\n                    pesticideListItem.unit, pesticideListItem.dosage, sprayParams.volumePerAreaUnit, activityArea) : getResourceDefaultQty(r);\n                return {\n                    resource: r,\n                    qty,\n                    totalCost: 0,\n                    note: null,\n                    date: null,\n                    dosage: pesticideListItem?.dosage,\n                    tariff: 0,\n                    manualTariff: false,\n                    manualQty: false,\n                    pesticideListItem,\n                    warehouse: WAREHOUSE_RESOURCE_TYPE.includes(r.type) ? user.warehouse : null,\n                }\n            }\n            );\n            if (!isArrayEmpty(newtlySelectedResources)) {\n                newtlySelectedResources = clearSingular(newtlySelectedResources);\n                prepend(newtlySelectedResources)\n                setLoadTariffs(true);\n            }\n\n        }\n        const element = document.getElementById(ELEMENT_ID);\n        if (element) {\n            //  Will scroll smoothly to the top of the next section\n            element.scrollIntoView({ behavior: 'smooth' });\n        }\n\n    }\n\n    const handleBulkQtyUpdate = (unit, qty) => {\n        if (unit && qty) {\n            fields.map((row, index) => {\n                if (unit === getResourceUsageUnit(row.resource, activityDef)) {\n                    row.qty = qty;\n                    if (row.tariff) {\n                        row.totalCost = row.tariff * qty;\n                    }\n                    update(index, row);\n                }\n            })\n        }\n        setOpenEditBulkQty(false)\n    }\n\n    const handleIrrigationConfig = (conf) => {\n        if (conf) {\n            setValue('irrigationParams', conf,\n                {\n                    shouldDirty: true\n                })\n        }\n        setOpenIrrigationConfig(false)\n    }\n\n    const handleSprayParam = (data) => {\n        if (data) {\n            setValue('sprayParams.speed', data.speed);\n            setValue('sprayParams.psi', data.psi)\n            setValue('sprayParams.pto', data.pto, {\n                shouldDirty: true\n            })\n        }\n        setOpenSprayParams(false)\n    }\n\n    const getResourceTypes = () => {\n        var types = ACTIVITY_RESOURCES.find(e => activity.type.includes(e.activity))?.types;\n        if (types && !user.gg) {\n            types = types.filter(e => e !== ENERGY);\n        }\n        return types\n    }\n\n    const resourceTypes = getResourceTypes();\n\n    if (!resourceTypes) {\n        return <></>\n    }\n\n    const getFields = () => {\n        return (expendFields && fields.length > TRASHHOLD) ? fields : fields.slice(0, TRASHHOLD);\n    }\n\n\n\n    const calcIrrigation = (irrigationParams?.irrigationMethod || irrigationParams?.fertilizeMethod) ? true : false;\n\n    const caclTotalWater = () => {\n        const water = fields.find(e => e.resource.type === WATER);\n        if (calcIrrigation && water && water.qty && irrigationParams.irrigationMethod) {\n            const irrigationDays = calcIrrigationDays(days, irrigationParams.frequency);\n            return calcTotalWaterQtyUtilFunc(irrigationParams.irrigationMethod, water.qty, activityArea, days, irrigationDays, fieldsCount)\n        }\n        return 0;\n    }\n\n    const onSprayVolumeChange = (onChange, value) => {\n        onChange(value);\n        setValue('sprayParams.volumePerAreaUnit', calcSprayVolumePerArea(Number(value), Number(activityArea)))\n        updatePesticideQty(Number(value))\n\n    }\n\n    const onSprayVolumePerAreaChange = (onChange, value) => {\n        onChange(value);\n        const sprayVolume = calcSprayVolume(Number(value), Number(activityArea));\n        setValue('sprayParams.volume', sprayVolume)\n        updatePesticideQty(value)\n    }\n\n    const updatePesticideQty = (sprayVolumePerAreaUnit) => {\n        fields.map((row, index) => {\n            if (row.pesticideListItem && !row.manualQty) {\n                const newQty = calacTotalPesticideVolume(row.pesticideListItem.unit, row.dosage, sprayVolumePerAreaUnit, activityArea)\n                if (newQty && newQty !== row.qty) {\n                    row.qty = newQty;\n                    if (row.tariff) {\n                        row.totalCost = row.tariff * row.qty;\n                    }\n                    update(index, row);\n                }\n            }\n        })\n    }\n\n\n\n    const totalWaterQty = caclTotalWater();\n\n    return (\n        <Box margin={1} paddingTop={2} display={'flex'} flexDirection={'column'}>\n            {SPRAY_TYPES.includes(activity.type) && <Box marginTop={1} marginBottom={1} display={'flex'} flex={1} justifyContent={'space-between'} alignItems={'center'}>\n                <Controller\n                    control={control}\n                    name=\"sprayParams.volumePerAreaUnit\"\n                    rules={{ required: true }}\n                    render={({ field: { onChange, ...field } }) => (\n                        <TextField size='small'\n                            onChange={(e) => onSprayVolumePerAreaChange(onChange, e.target.value)}\n                            type='number'\n                            id=\"spray-volume-per-area-unit\"\n                            error={errors.sprayParams?.volumePerAreaUnit ? true : false}\n                            label={text[`sprayVolume${user.areaUnit}`]}  {...field} />\n                    )}\n                />\n                <Box margin={1} />\n                <Controller\n                    control={control}\n                    name=\"sprayParams.volume\"\n                    render={({ field: { onChange, ...field } }) => (\n                        <TextField size='small'\n                            onChange={(e) => onSprayVolumeChange(onChange, e.target.value)}\n                            id=\"spray-volume\"\n                            type='number'\n                            label={text.totalSprayVolume}  {...field} />\n                    )}\n                />\n            </Box>}\n            <Box display={'flex'} flex={1} justifyContent={'space-between'} alignItems={'center'}>\n                <Box display={'flex'} flex={1} flexDirection={'row'} alignItems={'center'}>\n                    <Box>\n                        <Button disabled={disabledSelections} id={ELEMENT_ID} size='large' color={errors.resources ? 'error' : 'primary'} disableElevation={true} variant=\"contained\" onClick={handleClickOpen}>{text.resources} </Button>\n                    </Box>\n                    {fields.length > TRASHHOLD &&\n                        <IconButton sx={{ marginLeft: 1, marginRight: 1 }} onClick={() => setExpendFields(!expendFields)}>\n                            <Badge badgeContent={fields.length} color=\"info\">\n                                {expendFields && <Menu fontSize='large' />}\n                                {!expendFields && <DragHandle fontSize='large' />}\n                            </Badge>\n                        </IconButton>\n                    }\n                    {IRRIGARION_TYPES.includes(activity.type) && !['ICCPRO', 'TALGIL'].includes(activity.src) &&\n                        <IconButton size='large' onClick={() => setOpenIrrigationConfig(true)}><Calculator color={calcIrrigation ? 'primary' : 'secondary'} fontSize='large' /></IconButton>\n                    }\n                    {SPRAY_TYPES.includes(activity.type) &&\n                        <IconButton size='large' onClick={() => setOpenSprayParams(true)}><Agriculture fontSize='large' /></IconButton>\n                    }\n                    {errorMsg &&\n                        <IconButton color='error' size='large' onClick={() => setShowAlert(true)}>\n                            <Badge badgeContent={errorMsg.length} color=\"secondary\">\n                                <Error fontSize='large' />\n                            </Badge>\n\n                        </IconButton>\n                    }\n                </Box>\n                <Box flex={1} />\n                <Box display={'flex'} flexDirection={'row'} alignItems={'center'}>\n                    <IconButton size='large' disabled={isArrayEmpty(resourceBulkUnits)} onClick={() => setOpenEditBulkQty(true)}><MoreVert fontSize='large' /></IconButton>\n                    <IconButton size='large' disabled={isArrayEmpty(fields)} onClick={() => remove()}><Delete fontSize='large' /></IconButton>\n                </Box>\n            </Box>\n\n\n            <RenderTable\n                register={register} remove={remove} user={user} activity={activity}\n                handleOpenEditRow={handleOpenEditRow} text={text} getFields={getFields} activityDef={activityDef}\n                irrigationParams={irrigationParams} calcIrrigation={calcIrrigation}\n                activityArea={activityArea}\n                daysInPeriod={days}\n                fieldsCount={fieldsCount}\n                totalWaterQty={totalWaterQty}\n            />\n            <ResourcseSelectionDialog open={open} handleClose={handleClose} resourceTypes={resourceTypes} cropId={sprayParams?.crop?.id} />\n            {selectedRow && <ActivityResourceDialog selectedIndex={selectedIndex} selectedRow={selectedRow}\n                activityType={activity.type} handleClose={handleCloseEditRow} update={update}\n                warehouses={warehouses} control={control} errors={errors} activityArea={activityArea}\n                resourceUnit={getResourceUsageUnit(selectedRow.resource, activityDef)}\n                remove={() => handleRemoveRow(selectedIndex)}\n                irrigationParams={irrigationParams}\n                sprayParams={sprayParams} />}\n            <UpdateResourcesQtyDialog open={openEditBulkQty} units={resourceBulkUnits} text={text} handleClose={handleBulkQtyUpdate} areaUnit={user.areaUnit} activityArea={activityArea}\n            />\n            {IRRIGARION_TYPES.includes(activity.type) && <IrrigationConfigDialog open={openIrrigationConfig} days={days} text={text} handleClose={handleIrrigationConfig} areaUnit={user.areaUnit} activityArea={activityArea}\n                irrigationParams={irrigationParams}\n            />}\n            {SPRAY_TYPES.includes(activity.type) && <SprayParams open={openSprayParams} days={days} text={text} handleClose={handleSprayParam} areaUnit={user.areaUnit} activityArea={activityArea}\n                sprayParams={sprayParams}\n            />}\n            <AlertDialog open={showAlert} title={'requiredFieldsMissing'} message={errorMsg} varieant={'error'} handleClose={_ => setShowAlert(false)} buttonText={text.close} />\n            {SCOUT !== activity.type && <Box marginTop={2} marginBottom={0} display={'flex'} flex={1} justifyContent={'space-between'} alignItems={'center'}>\n                <Controller\n                    control={control}\n                    name=\"invoice\"\n                    render={({ field }) => (\n                        <TextField size='small'\n\n                            id=\"activity-invoice\"\n                            label={text.invoice} fullWidth {...field} />\n                    )}\n                />\n            </Box>}\n        </Box>\n    )\n}\n\nconst RenderTable = ({ register, remove, user, activity, handleOpenEditRow, text, getFields, activityDef, irrigationParams, calcIrrigation, activityArea, daysInPeriod, fieldsCount, totalWaterQty }) => {\n    return (\n        <TableContainer >\n            <Table size=\"small\" sx={{ margin: 0, padding: 0 }} aria-label=\"a dense table\">\n                <TableHead>\n                    <TableRow  >\n                        <TableCell sx={headerSx} >{text.name}</TableCell>\n                        <TableCell sx={headerSx} >{text.type}</TableCell>\n                        <TableCell sx={headerSx}>{text.qty}</TableCell>\n                        {calcIrrigation && <TableCell sx={cellSx} ><Calculator /></TableCell>}\n\n                        <TableCell sx={headerSx}>{text.unit}</TableCell>\n                        {user.financial && <TableCell sx={headerSx}>{text.cost}</TableCell>}\n\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {getFields().map((row, index) =>\n                        <Row key={row.key} index={index} row={row} text={text} areaUnit={user.areaUnit} register={register}\n                            activityArea={activityArea}\n                            remove={remove}\n                            currency={user.currency}\n                            financial={user.financial}\n                            onClick={() => handleOpenEditRow(index, row)}\n                            activityDef={activityDef} irrigationParams={irrigationParams}\n                            calcIrrigation={calcIrrigation}\n                            daysInPeriod={daysInPeriod}\n                            fieldsCount={fieldsCount}\n                            totalWaterQty={totalWaterQty}\n\n                        />\n                    )}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction calcQty(row, irrigationParams, activityArea, daysInPeriod, fieldsCount, totalWaterQty) {\n    if (row.resource.type === WATER && row.qty && irrigationParams.irrigationMethod) {\n        return totalWaterQty.toFixed(2);\n    }\n    if (row.resource.type === FERTILIZER && row.qty && irrigationParams.fertilizeMethod) {\n        const irrigationDays = calcIrrigationDays(daysInPeriod, irrigationParams.frequency);\n        return calcTotalFertilizerQty(irrigationParams.fertilizeMethod, row.qty, totalWaterQty, activityArea, daysInPeriod, irrigationDays, fieldsCount).toFixed(2)\n    }\n    return 0;\n}\n\nfunction getTotalCost(tariff, qty) {\n    if (tariff * qty) {\n        return (tariff * qty).toFixed(2);\n    }\n    return 0;\n}\n\nfunction Row(props) {\n    const { row, index, text, areaUnit, onClick, currency, remove, register, financial, activityDef, irrigationParams, calcIrrigation, activityArea,\n        daysInPeriod, fieldsCount, totalWaterQty\n    } = props;\n\n    const calc = (calcIrrigation && [WATER, FERTILIZER].includes(row.resource.type)) ? calcQty(row, irrigationParams, activityArea, daysInPeriod, fieldsCount, totalWaterQty) : null;\n    const totalCost = getTotalCost(row.tariff, calc ? calc : row.qty);\n\n    const resourceType = row.resource.category === SPRAYER ? SPRAYER : row.resource.type;\n\n    return (\n        <Fragment>\n            <TableRow\n                {...register(`resource.${index}.totalCost`)}\n                {...register(`resource.${index}.qty`)}\n                {...register(`resource.${index}.note`)}\n                {...register(`resource.${index}.warehouse`)}\n                {...register(`resource.${index}.manualTariff`)}\n\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\n                <TableCell onClick={onClick} sx={cellSxLink} >{row.resource.name}</TableCell>\n                <TableCell /*onClick={onClick}*/ sx={cellSx} >{getResourceTypeText(resourceType, text)}</TableCell>\n                <TableCell /*onClick={onClick}*/ sx={row.manualQty ? cellSxChange : cellSx}>{row.qty}</TableCell>\n                {calcIrrigation && <TableCell /*onClick={onClick}*/ sx={cellSx}>{calc ? calc : ''}</TableCell>}\n                <TableCell /*onClick={onClick}*/ sx={cellSx}>{getUnitText(getResourceUsageUnit(row.resource, activityDef), areaUnit, text)}</TableCell>\n                {financial && <TableCell /*onClick={onClick}*/ sx={row.manualTariff ? cellSxChange : cellSx}>{totalCost}</TableCell>}\n                {/* <TableCell width={1} sx={{ padding: 0, margin: 0 }}><IconButton margin={0} padding={0} onClick={e => remove(index)}><Delete fontSize='large' /></IconButton></TableCell> */}\n            </TableRow>\n        </Fragment>\n    );\n}\nexport default ActivityResources"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5081, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/scouts/ActivityScoutDialog.js"],"sourcesContent":["import { Box, Button, Dialog, DialogActions, DialogContent, MenuItem } from \"@mui/material\";\nimport TextFieldBase from \"../../../../components/ui/TextField\";\nimport { useSelector } from \"react-redux\";\nimport { selectLang } from \"../../../../features/app/appSlice\";\nimport { useState } from \"react\";\nimport { useGetUserDataQuery } from \"../../../../features/auth/authApiSlice\";\nimport { Delete, Save } from \"@mui/icons-material\";\nimport DialogAppBar from \"../../../dialog/DialogAppBar\";\nimport { useGetInfectionLevelsQuery, useGetPestStagesQuery, useGetPlantLocationsQuery } from \"../../../../features/pests/pestsApiSlice\";\n\n\n\nconst ActivityScoutDialog = ({ selectedRow, selectedIndex, handleClose, update, remove, stages }) => {\n    const text = useSelector(selectLang);\n    const { data: user } = useGetUserDataQuery()\n    const [note, setNote] = useState(selectedRow.note ? selectedRow.note : '');\n    const [value, setValue] = useState(selectedRow.value ? selectedRow.value : '');\n    const [infectionLevel, setInfectionLevel] = useState(selectedRow.infectionLevel);\n    const [stage, setStage] = useState(selectedRow.stage ? selectedRow.stage : stages.find(e=>e.code === 'none'));\n    const [plantLocation, setPlantLocation] = useState(selectedRow.location);\n\n    const { data: infectionLevels, isLoading: isLoadingInfectionLevels } = useGetInfectionLevelsQuery()\n    const { data: plantLocations, isLoading: isLoadingPlantLocations } = useGetPlantLocationsQuery()\n\n    const onAction = (save) => {\n        if (save) {\n\n            selectedRow.value = value;\n            selectedRow.note = note;\n            selectedRow.location = plantLocation;\n            selectedRow.infectionLevel = infectionLevel;\n            selectedRow.stage = stage;\n\n            update(selectedIndex, selectedRow);\n        }\n        handleClose(save);\n    }\n    if (isLoadingPlantLocations || isLoadingInfectionLevels) {\n        return <></>\n    }\n\n    return (\n        <Dialog\n            open={selectedRow !== null}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title=\n                {`${selectedRow.finding.name}`}\n            />\n            <DialogContent /*sx={{ minHeight: isWarehouse ? height : null }}*/>\n                <Box display={'flex'} flex={1} flexDirection={'column'}  >\n                    <TextFieldBase\n                        id=\"scout-location\"\n                        select\n                        value={plantLocation}\n                        label={text.location}\n                        fullWidth={true}\n                        onChange={e => setPlantLocation(e.target.value)}\n                    >\n                        {plantLocations.map((option) => (\n                            <MenuItem key={option} value={option}>\n                                {text[option]}\n                            </MenuItem>\n                        ))}\n                    </TextFieldBase>\n                    <TextFieldBase\n                        id=\"scout-infection-level\"\n                        select\n                        value={infectionLevel}\n                        label={text.infectionLevel}\n                        fullWidth={true}\n                        onChange={e => setInfectionLevel(e.target.value)}\n                    >\n                        {infectionLevels.map((option) => (\n                            <MenuItem key={option} value={option}>\n                                {text[option]}\n                            </MenuItem>\n                        ))}\n                    </TextFieldBase>\n                    <TextFieldBase\n                        id=\"scout-pest-stage\"\n                        select\n                        value={stage.id}\n                        label={text.phenologicalStage}\n                        fullWidth={true}\n                        onChange={e => setStage(stages.find(s => s.id === e.target.value))}\n                    >\n                        {stages.map((option) => (\n                            <MenuItem key={option.id} value={option.id}>\n                                {option.name}\n                            </MenuItem>\n                        ))}\n                    </TextFieldBase>\n                    <TextFieldBase value={value} onChange={e => setValue(Number(e.target.value))}\n                        type='number' label={text.qty}\n                        fullWidth={true}\n                    />\n                    <TextFieldBase value={note} onChange={e => setNote(e.target.value)} fullWidth={true} label={text.note} />\n                </Box>\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Button size='large' endIcon={<Delete />} disableElevation={true} variant='outlined' onClick={remove}>{text.delete}\n                </Button>\n                <Button size='large' disableElevation={true} variant='contained'\n                    endIcon={<Save />}\n                    onClick={() => onAction(true)} >\n                    {text.save}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\n\nexport default ActivityScoutDialog;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5350, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/scouts/ActivityScouts.js"],"sourcesContent":["import { Box, Button, TextField, IconButton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Badge, List, ListItemButton, ListItemText, ListItemIcon, ListItem, Autocomplete } from \"@mui/material\"\nimport { useSelector } from \"react-redux\"\nimport { selectLang } from \"../../../../features/app/appSlice\"\nimport { cellSx, cellSxChange, cellSxLink, headerSx } from \"../../../Util\"\nimport { Fragment, useEffect, useState } from \"react\"\nimport { ACTIVITY_RESOURCES, AREA_UNIT, ENERGY, EQUIPMENT, FERTILIZER, HOUR, IRRIGARION_TYPES, IRRIGATION, IRRIGATION_PLAN, PESTICIDE, SCOUT, SPRAY, SPRAYER, SPRAY_TYPES, WAREHOUSE_RESOURCE_TYPE, WATER, WORKER, getResourceTypeText, getResourceUsageUnit, getUnitText, isArrayEmpty } from \"../../../FarmUtil\"\nimport { useGetUserDataQuery } from \"../../../../features/auth/authApiSlice\"\nimport { Controller, useFieldArray } from \"react-hook-form\"\nimport { Agriculture, Delete, DragHandle, Error, Menu, MoreVert } from \"@mui/icons-material\"\nimport PestSelectionDialog from \"../../../dialog/PestSelectionDialog\"\nimport { infectionLevels } from \"../../../scout/ScoutingUtil\"\nimport ActivityScoutDialog from \"./ActivityScoutDialog\"\nimport { useGetPestStagesQuery } from \"../../../../features/pests/pestsApiSlice\"\nimport TextFieldBase from \"../../../../components/ui/TextField\"\nimport { useGetResourcesQuery } from \"../../../../features/resources/resourcesApiSlice\"\n\n\nconst TRASHHOLD = 3;\nconst UNITS = [AREA_UNIT.toUpperCase(), HOUR.toUpperCase()]\n\n//const REQUIRED_RESOURCES = SPRAY_TYPES.concat(IRRIGARION_TYPES);\n\nconst ELEMENT_ID = 'scoutParams.scouts'\n\nconst ActivityScouts = ({ activity, control, errors, register, setValue, trigger }) => {\n    const text = useSelector(selectLang)\n    const { data: user } = useGetUserDataQuery()\n    const [open, setOpen] = useState(false);\n    const [selectedRow, setSelectedRow] = useState(null);\n    const [selectedIndex, setSelectedIndex] = useState(null);\n    const [expendFields, setExpendFields] = useState(false);\n    const { data: stages, isLoading: isLoadingStages } = useGetPestStagesQuery()\n\n\n    const {\n        data: scouters,\n    } = useGetResourcesQuery({ type: WORKER })\n\n\n\n    const handleOpenEditRow = (index, row) => {\n        setSelectedRow(row);\n        setSelectedIndex(index);\n    };\n\n\n    const handleCloseEditRow = () => {\n        setSelectedRow(null);\n        setSelectedIndex(null);\n        // trigger(['scoutParams.scouts'])\n    };\n\n    const handleRemoveRow = (index) => {\n        setSelectedRow(null);\n        setSelectedIndex(null);\n        remove(index)\n\n    };\n\n    const { fields, append, prepend, remove, swap, move, insert, update, } = useFieldArray({\n        control, // control props comes from useForm (optional: if you are using FormContext)\n        name: \"scoutParams.scouts\", // unique name for your Field Array\n        keyName: \"key\",\n        rules: {\n            required: false,\n        }\n    });\n\n    const handleClose = (selectedElements) => {\n        setOpen(false);\n        if (selectedElements) {\n            const alreadySelectedIDs = fields.map(e => e.finding.id);\n            const newtlySelectedFields = selectedElements.filter(e => !alreadySelectedIDs.includes(e.id)).map(e => {\n                return {\n                    finding: e,\n                    note: '',\n                    qty: 0,\n                    location: 'none',\n                    infectionLevel: 'none',\n                    stage: stages.find(e => e.code === 'none')\n                }\n            }\n            );\n            append(newtlySelectedFields)\n        }\n    }\n\n\n\n\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n\n    const getFields = () => {\n        return (expendFields && fields.length > TRASHHOLD) ? fields : fields.slice(0, TRASHHOLD);\n    }\n\n    return (\n        <Box margin={1} paddingTop={2} display={'flex'} flexDirection={'column'}>\n\n            <Box display={'flex'} flex={1} justifyContent={'space-between'} alignItems={'center'}>\n                <Box display={'flex'}  flexDirection={'row'} alignItems={'center'}>\n                    <Box>\n                        <Button id={ELEMENT_ID} size='large' disableElevation={true} variant=\"contained\" onClick={handleClickOpen}>{text.pests} </Button>\n                    </Box>\n                    {fields.length > TRASHHOLD &&\n                        <IconButton  onClick={() => setExpendFields(!expendFields)}>\n                            <Badge badgeContent={fields.length} color=\"info\">\n                                {expendFields && <Menu fontSize='large' />}\n                                {!expendFields && <DragHandle fontSize='large' />}\n                            </Badge>\n                        </IconButton>\n                    }\n                </Box>\n                 <Box margin={1} ></Box>\n                <Box flex={1} >\n                    {!isArrayEmpty(scouters) && <Controller\n                        name=\"scoutParams.scouter\"\n                        rules={{ required: true }}\n                        control={control}\n                        render={({ field: { ref, onChange, ...field } }) => <Autocomplete\n                            disablePortal\n                            blurOnSelect={true}\n                            onChange={(_, data) => onChange(data)}\n                            options={scouters.filter(e => e.active)}\n                            sx={{ flex: 1 }}\n                            size='small'\n                            getOptionLabel={(option) => option ? option.name : ''}\n                            isOptionEqualToValue={(option, value) => (value === undefined) || option?.id?.toString() === (value?.id ?? value)?.toString()}\n                            renderInput={(params) => <TextFieldBase\n                                 error={errors?.scoutParams?.scouter ? true : false}\n                                sx={{ marginTop: 0.5 }} {...params} label={text.executor} />}\n                            {...field} />}\n\n                    />}\n                </Box>\n                <Box display={'flex'} flexDirection={'row'} alignItems={'center'}>\n\n                    <IconButton size='large' disabled={isArrayEmpty(fields)} onClick={() => remove()}><Delete fontSize='large' /></IconButton>\n                </Box>\n            </Box>\n\n\n            <RenderTable\n                register={register} remove={remove} user={user} activity={activity}\n                handleOpenEditRow={handleOpenEditRow} text={text} getFields={getFields}\n\n            />\n            <PestSelectionDialog open={open} handleClose={handleClose} />\n\n\n            {selectedRow && <ActivityScoutDialog selectedIndex={selectedIndex} selectedRow={selectedRow} handleClose={handleCloseEditRow} update={update} remove={() => handleRemoveRow(selectedIndex)} stages={isLoadingStages ? [] : stages} />}\n\n\n        </Box>\n    )\n}\n\nconst RenderTable = ({ register, remove, user, activity, handleOpenEditRow, text, getFields, activityDef, irrigationParams, calcIrrigation, activityArea, daysInPeriod, fieldsCount, totalWaterQty }) => {\n    return (\n        <TableContainer >\n            <Table size=\"small\" sx={{ margin: 0, padding: 0 }} aria-label=\"a dense table\">\n                <TableHead>\n                    <TableRow  >\n                        <TableCell sx={headerSx} >{text.pest}</TableCell>\n                        {/* <TableCell sx={headerSx} >{text.qty}</TableCell> */}\n                        <TableCell sx={headerSx} >{text.location}</TableCell>\n                        <TableCell sx={headerSx} >{text.infectionLevel}</TableCell>\n                        <TableCell sx={headerSx} >{text.qty}</TableCell>\n\n                        {/* <TableCell sx={headerSx}>{text.qty}</TableCell>\n\n                        <TableCell sx={headerSx}>{text.unit}</TableCell> */}\n\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {getFields().map((row, index) =>\n                        <Row key={row.key} index={index} row={row} text={text}\n                            register={register}\n                            remove={remove}\n                            onClick={() => handleOpenEditRow(index, row)}\n\n                        />\n                    )}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\n\n\nfunction Row(props) {\n    const { row, index, text, areaUnit, onClick, currency, remove,\n        register,\n    } = props;\n\n\n\n    return (\n        <Fragment>\n            <TableRow\n                // {...register(`scoutParams.scouts.${index}.totalCost`)}\n                // {...register(`scoutParams.scouts.${index}.qty`)}\n                // {...register(`scoutParams.scouts.${index}.note`)}\n                // {...register(`scoutParams.scouts.${index}.warehouse`)}\n                // {...register(`scoutParams.scouts.${index}.manualTariff`)}\n\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\n                <TableCell onClick={onClick} sx={cellSxLink} >{row.finding.name}</TableCell>\n                <TableCell /*onClick={onClick}*/ sx={cellSx} >{text[row.location]}</TableCell>\n                <TableCell /*onClick={onClick}*/ sx={cellSx} >{text[row.infectionLevel]}</TableCell>\n                <TableCell /*onClick={onClick}*/ sx={cellSx} >{row.value}</TableCell>\n\n            </TableRow>\n        </Fragment>\n    );\n}\nexport default ActivityScouts"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5880, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/form/ActivityForm.js"],"sourcesContent":["import { BottomNavigation, BottomNavigationAction, Box, TextField, Typography } from '@mui/material'\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { selectLang, setDefaultScouter, setSnackbar } from '../../../features/app/appSlice'\nimport { PESTICIDE, PLAN, SCOUT, asLocalDate, asLocalTime, countLines, daysDif, daysDiff, isArrayEmpty } from '../../FarmUtil'\nimport ActivityHeaderView from './header/ActivityHeaderView'\nimport { useForm, Controller, useWatch } from \"react-hook-form\";\nimport { Cancel, CheckCircleOutline, ControlPointDuplicate, Delete, Save } from '@mui/icons-material'\nimport { useNavigate } from 'react-router'\nimport ActivityFields from './fields/ActivityFields'\nimport ActivityWaypoints from './waypoints/ActivityWaypoints'\n\nimport ActivityResources from './resources/ActivityResources'\nimport { useCreateActivityMutation, useDeleteActivityMutation, useUpdateActivityMutation } from '../../../features/activities/activitiesApiSlice'\nimport { useGetCropsQuery } from '../../../features/crops/cropsApiSlice'\nimport { CUSTOMER, useGetResourcesQuery } from '../../../features/resources/resourcesApiSlice'\nimport Loading from '../../../components/Loading'\nimport { useGetActivityDefsQuery } from '../../../features/activityDefs/activityDefsApiSlice'\nimport ActionApprovalDialog from '../../../components/ui/ActionApprovalDialog'\nimport { useGetResourcesTariffQuery } from '../../../features/tariff/tariffApiSlice'\nimport { useGetUserDataQuery } from '../../../features/auth/authApiSlice'\nimport { getReference, getTotalActivityArea, isSkipTariffFetch } from './ActivityUtil'\nimport ActivityScouts from './scouts/ActivityScouts'\n\nconst ActivityForm = ({ activity }) => {\n\n  const navigate = useNavigate()\n  const text = useSelector(selectLang)\n  const [createActivity] = useCreateActivityMutation();\n  const [updateActivity] = useUpdateActivityMutation();\n  const [deleteActivity] = useDeleteActivityMutation();\n  const { data: user } = useGetUserDataQuery();\n\n  const { data: activityDefs, isSuccess: isActivityDefsSuccess } = useGetActivityDefsQuery()\n  const { data: crops, isSuccess: isCropsSuccess } = useGetCropsQuery()\n  const [deleteOpen, setDeleteOpen] = useState(false);\n  const [isDuplicate, setIsDuplicate] = useState(false);\n  const [isExecutePlan, setIsExecutePlan] = useState(false);\n\n  const [pointsCount, setPointsCount] = useState(activity.points.length);\n\n\n  const [openWaypointSelection, setOpenWaypointSelection] = useState(false);\n  const dispatch = useDispatch()\n\n  const {\n    data: customers,\n    // isLoading,\n    isSuccess: isCustomersSuccess,\n    isError,\n    error\n  } = useGetResourcesQuery({ type: CUSTOMER })\n\n  const { control, register, handleSubmit, getValues, watch, formState: { errors },\n    formState: { isDirty, dirtyFields }, reset, setValue, trigger\n  } = useForm({ defaultValues: activity, });\n\n\n\n  const execution = useWatch({ control, name: \"execution\" })\n  const activityDef = useWatch({ control, name: \"activityDef\" })\n  const resources = useWatch({ control, name: \"resources\" })\n  const fields = useWatch({ control, name: \"fields\" })\n  const uuid = useWatch({ control, name: \"uuid\" })\n  const reference = useWatch({ control, name: \"reference\" })\n  const executionEnd = useWatch({ control, name: \"executionEnd\" })\n  const irrigationParams = useWatch({ control, name: \"irrigationParams\" })\n  const days = daysDiff(execution, executionEnd);\n  const sprayParams = useWatch({ control, name: \"sprayParams\" })\n  const crop = useWatch({ control, name: \"sprayParams.crop\" })\n  const activityArea = getTotalActivityArea(fields);\n  const editable = useWatch({ control, name: \"editable\" })\n  const type = useWatch({ control, name: \"type\" })\n  const note = useWatch({ control, name: \"note\" })\n\n  const scoutParams = useWatch({ control, name: \"scoutParams\" })\n\n  const tariffResourceIds = resources.filter(e => e.manualTariff === false).map(e => e.resource.id);\n  const { data: tariffs, isSuccess: isTariffsSuccess, isLoading: isTariffLoading, } = useGetResourcesTariffQuery({\n    activityType: activity.type,\n    date: asLocalDate(execution),\n    reference: getReference(activity.type, resources, activityDef),\n    resources: tariffResourceIds\n  }, { skip: isSkipTariffFetch(isDirty, user.financial, tariffResourceIds) });\n\n  if (!isCropsSuccess || !isActivityDefsSuccess || !isCustomersSuccess) {\n    return <Loading />\n  }\n\n\n  const saveActivity = (data) => {\n    data.execution = asLocalDate(data.execution, true);\n    data.executionEnd = asLocalDate(data.executionEnd, true);\n    data.endHour = asLocalTime(data.endHour, true);\n\n    if(data.scoutParams?.scouter?.id){\n      dispatch(setDefaultScouter(data.scoutParams?.scouter))\n    }\n\n    if (data.uuid) {\n      return updateActivity(data).unwrap();\n    } else {\n      data.src = 'MUI'\n\n      return createActivity(data).unwrap();\n    }\n  }\n\n  const duplicate = () => {\n    setValue('uuid', null);\n    setValue('planUuid', null);\n    setValue('reference', null);\n    setValue('editable', true);\n    setValue('status', null);\n    setValue('points', []);\n    setIsDuplicate(true);\n  }\n\n  const executePlan = () => {\n    setValue('planUuid', uuid);\n    setValue('uuid', null);\n    setValue('editable', true);\n    setValue('type', type.replaceAll('_PLAN', ''));\n    setValue('status', 'EXECUTING');\n    setIsExecutePlan(true);\n  }\n\n  const onCropCHange = () => {\n    setValue('fields', []);\n    setValue('resources', resources.filter(e => e.resource.type !== PESTICIDE));\n  }\n\n\n  const handleDelete = (value) => {\n    setDeleteOpen(false)\n    if (value) {\n      deleteActivity(activity.uuid);\n      navigate(-1)\n      dispatch(setSnackbar({ msg: text.recordDeleted }))\n\n    }\n  }\n\n  const onSubmit = async (data) => {\n    try {\n      const result = await saveActivity(data);\n      dispatch(setSnackbar({ msg: data.uuid ? text.recordUpdated : text.recordCreated, severity: 'success' }))\n      navigate(-1)\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  const saveDisabled = !isExecutePlan && !isDirty;\n\n\n  const getLineNum = () => {\n    const noteLineNum = countLines(note); \n    if(noteLineNum <= 3 ){\n      return 3;\n    }  else {\n      return noteLineNum;\n    }\n  }\n\n  return (\n    <Box sx={{ maxHeight: window.innerHeight - 130, overflow: 'auto' }}>\n      <Box margin={1}>\n        <form onSubmit={handleSubmit(onSubmit)} >\n          {/* <Box\n            {...register(`uuid`)}\n            {...register(`reference`)} /> */}\n\n\n          <ActivityHeaderView control={control} register={register} type={type} activity={activity} errors={errors} crops={crops} activityDefs={activityDefs} customers={customers} reference={reference} isDuplicate={isDuplicate} isExecutePlan={isExecutePlan}\n            execution={execution} days={days} crop={crop} onCropCHange={onCropCHange} />\n          <ActivityFields control={control} register={register} activity={activity} getValues={getValues} activityArea={activityArea} errors={errors} crop={crop}\n            openWaypointSelection={openWaypointSelection} setOpenWaypointSelection={setOpenWaypointSelection} pointsCount = {pointsCount } scoutParams={scoutParams}\n          />\n\n          {openWaypointSelection && <ActivityWaypoints\n            control={control} register={register} activity={activity} activityDef={activityDef} getValues={getValues} errors={errors} crop={crop}\n            openWaypointSelection={openWaypointSelection} setOpenWaypointSelection={setOpenWaypointSelection} setPointsCount={setPointsCount}\n\n          />}\n          {activity.type === SCOUT && <ActivityScouts control={control} register={register} activity={activity} getValues={getValues} errors={errors} />}\n\n          <ActivityResources control={control} register={register} activity={activity} activityDef={activityDef}\n            errors={errors} tariffs={tariffs} activityArea={activityArea} days={days}\n            irrigationParams={irrigationParams} setValue={setValue} trigger={trigger}\n            fieldsCount={fields.length} sprayParams={sprayParams}\n          />\n          <Box padding={1}>\n            <Controller\n              control={control}\n              name=\"note\"\n              render={({ field }) => (\n                <TextField\n                  id=\"activity-note\"\n                  size='small'\n                  label={text.note} fullWidth multiline rows={getLineNum()} {...field} />\n              )}\n            />\n          </Box>\n          <BottomNavigation sx={{ position: 'fixed', bottom: 0, left: 0, right: 0, paddingTop: 2, paddingBottom: 2, borderTop: 1, borderTopColor: 'lightGray', backgroundColor: 'white', zIndex: 1000 }} value={-1}\n            showLabels>\n            {/* <BottomNavigationAction\n              label={<Typography>{text.cancel}</Typography>}\n              onClick={() => navigate(-1)}\n              icon={<Cancel fontSize='large' />}\n            /> */}\n            {activity.editable && uuid && <BottomNavigationAction\n              label={<Typography>{text.delete}</Typography>}\n              onClick={() => setDeleteOpen(true)}\n              icon={<Delete fontSize='large' />}\n            />}\n            {uuid && <BottomNavigationAction\n              label={<Typography>{text.duplicate}</Typography>}\n              onClick={duplicate}\n              icon={<ControlPointDuplicate fontSize='large' />}\n            />}\n            {uuid && activity.status === PLAN && <BottomNavigationAction\n\n              label={<Typography >{text.execute}</Typography>}\n              onClick={executePlan}\n              icon={<CheckCircleOutline fontSize='large' />}\n            />}\n            {editable && <BottomNavigationAction disabled={saveDisabled} sx={{ color: saveDisabled ? 'lightGray' : null }}\n              type=\"submit\"\n              label={<Typography >{text.save}</Typography>}\n              icon={<Save fontSize='large' />}\n            />}\n          </BottomNavigation>\n          <ActionApprovalDialog open={deleteOpen} handleClose={handleDelete}\n            title={text.deleteFormTitle} body={text.deleteFormBody} okText={text.delete} cancelText={text.cancel} />\n        </form>\n      </Box>\n    </Box>\n\n  );\n};\nexport default ActivityForm"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6461, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/view/ActivityView.js"],"sourcesContent":["import {  Box } from '@mui/material'\nimport { useNavigate, useParams } from 'react-router'\nimport Loading from '../../../components/Loading'\nimport { useGetActivityByIdQuery } from '../../../features/activities/activitiesApiSlice'\nimport { GENERAL, GENERAL_PLAN, HARVEST, IRRIGARION_TYPES, IRRIGATION, IRRIGATION_PLAN, MARKET, SCOUT, SPRAY, SPRAY_PLAN, SPRAY_TYPES, parseISOOrNull } from '../../FarmUtil'\nimport ActivityForm from '../form/ActivityForm'\nimport { parseISO } from 'date-fns'\n\nconst SUPPORTED_TYPES = [GENERAL, HARVEST, IRRIGATION, SPRAY, MARKET, GENERAL_PLAN,IRRIGATION_PLAN,SPRAY_PLAN, SCOUT]\n\nconst ActivityView = () => {\n\n  const { activityId, src } = useParams()\n  const navigate = useNavigate()\n\n\n  const { data: activity, isLoading, isSuccess, isError, error } = useGetActivityByIdQuery(activityId)\n\n  if (isLoading) return <Loading />\n\n  if (activity && isSuccess) {\n\n\n    if (SUPPORTED_TYPES.includes(activity.type)) {\n      // const isPlan = activity.type.includes(\"_PLAN\")\n      const fields = activity.fields.map(e => {\n        return { ...e, actualExecution: parseISOOrNull(e.actualExecution) }\n      });\n\n      const act = { ...activity, fields, marketParams: { ...activity.marketParams } }\n\n      act.execution = parseISO(activity.execution);\n      if (IRRIGARION_TYPES.includes(activity.type)) {\n        act.executionEnd = parseISO(activity.executionEnd);\n      }\n      if (SPRAY_TYPES.includes(activity.type)) {\n        act.endHour = parseISO(`${activity.execution} ${activity.endHour}`);\n      }\n\n      if (MARKET === activity.type && act.marketParams?.sortDate) {\n        act.marketParams.sortDate = parseISO(act.marketParams.sortDate);\n      }\n\n      act.note = act.note ? act.note : '';\n      act.invoice = act.invoice ? act.invoice : ''\n      act.year = activity.year ? activity.year : act.execution.getFullYear();\n      act.waybill = act.waybill ? act.waybill : '';\n      // act.fields.forEach(e => {\n      //   e.actualExecution = parseISOOrNull(e.actualExecution);\n      // });\n\n      return (\n        <Box>\n          <ActivityForm activity={act} />\n        </Box>\n      )\n    }\n\n   return (\n      <Box margin={1}>\n        {activity.type}\n      </Box>\n    )\n  }\n}\n\nexport default ActivityView"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAEA,IAAM,kBAAkB;IAAC,mIAAO;IAAE,mIAAO;IAAE,sIAAU;IAAE,iIAAK;IAAE,kIAAM;IAAE,wIAAY;IAAC,2IAAe;IAAC,sIAAU;IAAE,iIAAK;CAAC;AAErH,IAAM,eAAe;;IAEnB,IAA4B,aAAA,IAAA,4LAAS,KAA7B,aAAoB,WAApB,YAAY,MAAQ,WAAR;IACpB,IAAM,WAAW,IAAA,8LAAW;IAG5B,IAAiE,2BAAA,IAAA,iLAAuB,EAAC,aAAjF,AAAM,WAAmD,yBAAzD,MAAgB,YAAyC,yBAAzC,WAAW,YAA8B,yBAA9B,WAAW,UAAmB,yBAAnB,SAAS,QAAU,yBAAV;IAEvD,IAAI,WAAW,qBAAO,6LAAC,0IAAO;;;;;IAE9B,IAAI,YAAY,WAAW;QAGzB,IAAI,gBAAgB,QAAQ,CAAC,SAAS,IAAI,GAAG;gBAgBX;YAfhC,iDAAiD;YACjD,IAAM,SAAS,SAAS,MAAM,CAAC,GAAG,CAAC,SAAA;gBACjC,OAAO,wVAAK;oBAAG,iBAAiB,IAAA,0IAAc,EAAC,EAAE,eAAe;;YAClE;YAEA,IAAM,MAAM,wVAAK;gBAAU,QAAA;gBAAQ,cAAc,2KAAK,SAAS,YAAY;;YAE3E,IAAI,SAAS,GAAG,IAAA,6MAAQ,EAAC,SAAS,SAAS;YAC3C,IAAI,4IAAgB,CAAC,QAAQ,CAAC,SAAS,IAAI,GAAG;gBAC5C,IAAI,YAAY,GAAG,IAAA,6MAAQ,EAAC,SAAS,YAAY;YACnD;YACA,IAAI,uIAAW,CAAC,QAAQ,CAAC,SAAS,IAAI,GAAG;gBACvC,IAAI,OAAO,GAAG,IAAA,6MAAQ,EAAC,AAAC,GAAwB,OAAtB,SAAS,SAAS,EAAC,KAAoB,OAAjB,SAAS,OAAO;YAClE;YAEA,IAAI,kIAAM,KAAK,SAAS,IAAI,MAAI,oBAAA,IAAI,YAAY,cAAhB,wCAAA,kBAAkB,QAAQ,GAAE;gBAC1D,IAAI,YAAY,CAAC,QAAQ,GAAG,IAAA,6MAAQ,EAAC,IAAI,YAAY,CAAC,QAAQ;YAChE;YAEA,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG;YACjC,IAAI,OAAO,GAAG,IAAI,OAAO,GAAG,IAAI,OAAO,GAAG;YAC1C,IAAI,IAAI,GAAG,SAAS,IAAI,GAAG,SAAS,IAAI,GAAG,IAAI,SAAS,CAAC,WAAW;YACpE,IAAI,OAAO,GAAG,IAAI,OAAO,GAAG,IAAI,OAAO,GAAG;YAC1C,4BAA4B;YAC5B,2DAA2D;YAC3D,MAAM;YAEN,qBACE,6LAAC,kMAAG;0BACF,cAAA,6LAAC,2JAAY;oBAAC,UAAU;;;;;;;;;;;QAG9B;QAED,qBACG,6LAAC,kMAAG;YAAC,QAAQ;sBACV,SAAS,IAAI;;;;;;IAGpB;AACF;GAtDM;;QAEwB,4LAAS;QACpB,8LAAW;QAGqC,iLAAuB;;;KANpF;uCAwDS"}},
    {"offset": {"line": 6582, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/activity/view/NewActivity.js"],"sourcesContent":["import { Box } from '@mui/material'\nimport { useSelector } from 'react-redux'\nimport { useParams, useSearchParams } from 'react-router'\nimport {  selectCurrentYear, selectDefaultScouter, selectLatitude, selectLongitude } from '../../../features/app/appSlice'\nimport ActivityForm from '../form/ActivityForm'\nimport { IRRIGARION_TYPES, MARKET, SCOUT, SPRAY_TYPES, asLocalDateTime, firstDayOfThisMonth, getWinds, isArrayEmpty, isPointInPoly, lastDayOfThisMonth, newDate } from '../../FarmUtil'\nimport { useGetUserDataQuery } from '../../../features/auth/authApiSlice'\nimport { useFields, useFieldsById } from '../../../features/fields/fieldsApiSlice'\nimport { newFieldMarketParams } from '../form/fields/ActivityFields'\nimport { useGetPointQuery } from '../../../features/points/pointsApiSlice'\nimport Loading from '../../../components/Loading'\n\n\nexport function getFieldsByLocation(data, pt) {\n\n  if (data) {\n    if (pt && Array.isArray(pt)) {\n      const inFields = data.filter(e => e.endDate === null && isPointInPoly(e.geoPoints, pt));\n      return inFields;\n    }\n  }\n  return [];\n}\n\nconst prepareFields = (activityFields, isMarket) => {\n  if (isArrayEmpty(activityFields)) {\n    return [];\n  } else {\n    return activityFields.map(field => {\n      return {\n        field, activityArea: field.area, fieldNote: null, actualExecution: null,\n        fieldMarketParams: isMarket ? newFieldMarketParams() : null\n      }\n    }\n    );\n  }\n\n  // const fields = field ? [{\n  //   field, activityArea: field.area, fieldNote: null, actualExecution: null,\n  //   fieldMarketParams: isMarket ? newFieldMarketParams() : null\n  // }] : [];\n\n}\n\nconst getFieldCrop = (field, fields) => {\n  var f = field;\n  if (field) {\n    f = field\n  } else if (!isArrayEmpty(fields)) {\n    f = fields[0].field;\n  }\n  if(f){\n    return { id: f.cropId, name: f.cropName };\n  } else {\n    return null;\n  }\n}\n\nconst NewActivity = () => {\n\n  const { type, src } = useParams()\n  let [searchParams, setSearchParams] = useSearchParams();\n\n\n  const { data: user, isLoading } = useGetUserDataQuery()\n  const currentYear = useSelector(selectCurrentYear)\n  const fid = searchParams.get(\"fid\");\n  const data = useFields(currentYear)\n\n  const longitude = useSelector(selectLongitude);\n  const latitude = useSelector(selectLatitude);\n  const scouter = useSelector(selectDefaultScouter)\n\n  const field = useFieldsById(currentYear, Number(fid));\n\n\n  const position = latitude && longitude  ? [latitude,longitude]  : null;\n\n  const pid = searchParams.get(\"pid\");\n\n  const { data: point, isLoading: isLoadingPoint, isFetching: isFetchingPoint } = useGetPointQuery({ id: pid }, { skip: !pid });\n\n  if (isLoadingPoint || isFetchingPoint) {\n    return <Loading />\n  }\n\n\n\n  const isPlan = type.includes(\"_PLAN\")\n  const isSpray = SPRAY_TYPES.includes(type);\n  const isIrrigation = IRRIGARION_TYPES.includes(type);\n  const isMarket = MARKET === type;\n  const isScout = SCOUT === type;\n\n  const wind = isSpray ? getWinds()[0] : null;\n\n  const fields = prepareFields(field ? [field] : getFieldsByLocation(data, position), isMarket)\n\n\n\n\n  const points = point ? [{\n    point, note: '', createTime: asLocalDateTime(newDate(), true)\n  }] : [];\n\n  const scouts = isScout && point?.pest ? [{\n    finding: point.pest, note: '', location: 'none', infectionLevel: 'none', value: ''\n  }] : [];\n\n\n    \n \n  const crop = getFieldCrop(field, fields);\n  const activity = {\n    type, plan: isPlan,\n    execution: isIrrigation ? firstDayOfThisMonth() : new Date(),\n    executionEnd: isIrrigation ? lastDayOfThisMonth() : null,\n    endHour: isSpray ? new Date() : null,\n    irrigationParams: isIrrigation ? {} : null,\n    sprayParams: isSpray || isScout ? { volumePerAreaUnit: '', volume: '', wind, crop } : null,\n    scoutParams: isScout ? { scouts, phenologicalStage: '', scouter } : null,\n    marketParams: isMarket ? { incomeCalc: '', sortDate: null, sortReference: '' } : null,\n    activityDef: null, year: user.year, customer: null, fields, resources: [], note: '', invoice: '', editable: true, waybill: '',\n    points\n  };\n\n  return (\n    <Box >\n      <ActivityForm activity={activity} />\n    </Box>\n  )\n}\n\nexport default NewActivity"],"names":[],"mappings":"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"}}]
}