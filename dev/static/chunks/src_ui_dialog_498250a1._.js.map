{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/DialogAppBar.js"],"sourcesContent":["import { Close } from '@mui/icons-material'\nimport { AppBar, IconButton, Toolbar, Typography } from '@mui/material'\nimport React from 'react'\n\nfunction DialogAppBar({title, onClose}) {\n    return (\n        <AppBar sx={{ position: 'relative' }} elevation={0}>\n            <Toolbar>\n                <Typography sx={{ ml: 2, flex: 1 }} variant=\"h6\" component=\"div\">\n                    {title}\n                </Typography>\n                <IconButton\n                    edge=\"start\"\n                    onClick={onClose}\n                    color=\"inherit\"\n                    aria-label=\"done\"\n                >\n                    <Close />\n                </IconButton>\n            </Toolbar>\n        </AppBar>\n    )\n}\n\nexport default DialogAppBar"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;AAEA,SAAS,aAAa,KAAgB;QAAf,QAAD,MAAC,OAAO,UAAR,MAAQ;IAC1B,qBACI,6LAAC,8MAAM;QAAC,IAAI;YAAE,UAAU;QAAW;QAAG,WAAW;kBAC7C,cAAA,6LAAC,kNAAO;;8BACJ,6LAAC,8NAAU;oBAAC,IAAI;wBAAE,IAAI;wBAAG,MAAM;oBAAE;oBAAG,SAAQ;oBAAK,WAAU;8BACtD;;;;;;8BAEL,6LAAC,8NAAU;oBACP,MAAK;oBACL,SAAS;oBACT,OAAM;oBACN,cAAW;8BAEX,cAAA,6LAAC,wKAAK;;;;;;;;;;;;;;;;;;;;;AAK1B;KAlBS;uCAoBM"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/PointActionDialog.js"],"sourcesContent":["import {Dialog, DialogContent, Divider, List, ListItem, ListItemAvatar, ListItemButton, ListItemIcon, ListItemText } from \"@mui/material\";\nimport { PestControl as Scout, EditLocation } from \"@mui/icons-material\";\nimport { Fragment, useState } from \"react\";\nimport { activityDescription, activityLongText, parseDate, parseISOOrNull, SCOUT, trap } from \"../FarmUtil\";\nimport DialogAppBar from \"./DialogAppBar\";\nimport { selectLang, setActivityType } from \"../../features/app/appSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport WhatsAppIcon from '@mui/icons-material/WhatsApp';\nimport TelegramIcon from '@mui/icons-material/Telegram';\nimport { msgTelegram, msgWhatsapp, shareMsg, Telegram, Whatsapp } from \"../../appbar/components/ShareLocationMenu\";\nimport { createSearchParams, useNavigate } from \"react-router\";\nimport PointForm from \"../point/PointForm\";\nimport { ACTIVITY_POINT_TYPE, SCOUT_POINT_TYPE } from \"../layers/PointIcon\";\nimport ActivityTypeIcon from \"../../icons/ActivityTypeIcon\";\n\nconst PointActionDialog = ({ open, handleClose, selectedPoint }) => {\n\n    const text = useSelector(selectLang);\n    // const [touched, setTouched] = useState(false);\n\n  //  const [share, setShare] = useState(false);\n\n    const [editPoint, setEditPoint] = useState(null);\n\n\n    const handleSetNote = (val) => {\n        // setNote(val);\n        // setTouched(true)\n    }\n\n    const onAction = (val) => {\n\n        setEditPoint(null);\n        handleClose();\n        // setTouched(false);\n        // setNote('');\n    }\n\n    const shareClick = (app) => {\n        console.log('selectedPoint', selectedPoint)\n        const msg = shareMsg(selectedPoint.lat, selectedPoint.lng, selectedPoint?.name);\n        if (app === Whatsapp) {\n            msgWhatsapp(msg)\n        } else if (app === Telegram) {\n            msgTelegram(msg)\n        }\n        handleClose();\n    }\n\n    const dispatch = useDispatch()\n\n    const navigate = useNavigate()\n\n\n    const onPointFormClose = () => {\n        onAction();\n        // setEditPoint(null)\n    }\n\n    console.log(selectedPoint)\n    //   const { data: user } = useGetUserDataQuery()\n    //   const actionTypes = user.userConf.filter(e => e.write).map(e => e.type);\n    const newActivity = (type, pointId, fieldId) => {\n\n        const searchParams = createSearchParams({ pid: pointId, fid: fieldId }).toString()\n        dispatch(setActivityType(type));\n        navigate(\n            {\n                pathname: `/activity/new/${type}`,\n                search: searchParams\n            }\n        )\n\n\n        handleClose();\n    }\n\n    const newPoint = () => {\n        setEditPoint({ ...selectedPoint, expiry: parseISOOrNull(selectedPoint.expiry) })\n    }\n\n    const activityBased = [SCOUT_POINT_TYPE, ACTIVITY_POINT_TYPE].includes(selectedPoint?.type);\n    const edit = selectedPoint.type === trap;\n    const title = activityBased ? activityDescription(selectedPoint.activity, text) : selectedPoint.name;\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullWidth\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title={title}\n            />\n            <DialogContent sx={{ padding: 0, margin: 0 }}>\n                <List dense>\n                    {selectedPoint.type === trap &&\n                        <Fragment>\n                            <ListItem disablePadding>\n                                <ListItemButton onClick={() => newActivity(SCOUT, selectedPoint.id, selectedPoint.fieldId)}>\n                                    <ListItemIcon>\n                                        <Scout />\n                                    </ListItemIcon>\n                                    <ListItemText primary={text.scouting} secondary={selectedPoint.pest?.name} />\n                                </ListItemButton>\n                            </ListItem>\n                            <Divider />\n                        </Fragment>\n                    }\n                    <ListItemButton onClick={() => shareClick(Whatsapp)}>\n                        <ListItemIcon>\n                            <WhatsAppIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={text.share} secondary={Whatsapp} />\n                    </ListItemButton>\n                    <Divider />\n                    <ListItemButton onClick={() => shareClick(Telegram)}>\n                        <ListItemIcon>\n                            <TelegramIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={text.share} secondary={Telegram} />\n                    </ListItemButton>\n                    {edit && <Divider />}\n                    {edit && <ListItemButton onClick={() => newPoint()}>\n                        <ListItemIcon>\n                            <EditLocation />\n                        </ListItemIcon>\n                        <ListItemText primary={text.edit} secondary={selectedPoint.name} />\n                    </ListItemButton>}\n                    {activityBased &&\n                        <ListItem alignItems=\"flex-start\">\n                            <ListItemAvatar>\n                                <ActivityTypeIcon type={selectedPoint?.activity?.type} />\n                            </ListItemAvatar>\n                            <ListItemText\n                                primary={parseDate(selectedPoint?.activity?.execution)}\n                                secondary={activityLongText(selectedPoint.activity)}/>\n                        </ListItem>\n\n                    }\n\n\n\n\n                    {/* <Divider />\n                    <ListItemButton>\n                        <ListItemIcon>\n                            <Edit />\n                        </ListItemIcon>\n                        <ListItemText\n                            primary={text.edit}\n                        />\n                    </ListItemButton>\n                    <Divider />\n\n                    <ListItem disablePadding>\n                        <ListItemButton>\n                            <ListItemIcon>\n                                <History />\n                            </ListItemIcon>\n                            <ListItemText primary={text.history} />\n                        </ListItemButton>\n                    </ListItem> */}\n                </List>\n            </DialogContent>\n            {editPoint && <PointForm open={true} defaultValues={editPoint} handleClose={onPointFormClose} deletable={true} />}\n        </Dialog>\n    )\n}\nexport default PointActionDialog;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/FieldsSelectionDialog.js"],"sourcesContent":["import { AppBar, Box, Button, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle, Divider, FormControlLabel, IconButton, InputAdornment, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Toolbar, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../components/ui/TextField\";\nimport { useSelector } from \"react-redux\";\nimport { selectLang } from \"../../features/app/appSlice\";\nimport { Fragment, useState } from \"react\";\nimport { cellSx, headerSx, Transition } from \"../Util\";\nimport { Close, Search } from \"@mui/icons-material\";\nimport { isMobile, isStringEmpty } from \"../FarmUtil\";\nimport ListPager from \"../../components/ui/ListPager\";\nimport { fi } from \"date-fns/locale\";\nimport DialogAppBar from \"./DialogAppBar\";\n\nconst filterActive = (field, active) => {\n    return active ? field.endDate === null : field.endDate !== null;\n}\n\nconst filterField = (field, filter, cropId, active) => {\n    const isRelevant = filterActive(field, active)\n\n    if (isStringEmpty(filter)) {\n        return isRelevant && (cropId ? field.cropId === cropId : true);\n    } else {\n        const val = filter.toLowerCase();\n        return isRelevant && (\n            (cropId ? field.cropId === cropId : true) &&\n            (field.name.toLowerCase().includes(val) ||\n                field.alias?.toLowerCase().includes(val) ||\n                field.siteName?.toLowerCase().includes(val) ||\n                field.cropName.toLowerCase().includes(val) ||\n                field.varietyName.toLowerCase().includes(val)\n            )\n        )\n    }\n};\n\nconst isFieldSelected = (field, selectedFields) => {\n    return selectedFields.some(e => e.id === field.id)\n};\n\nexport const ROWS_PER_PAGE = 100;\n\nconst FieldSelectionDialog = ({ fields, open, handleClose, cropId }) => {\n    const text = useSelector(selectLang);\n    // const { data: user } = useGetUserDataQuery()\n    const [filter, setFilter] = useState('');\n\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(ROWS_PER_PAGE);\n    const [selectFields, setSelectedFields] = useState([]);\n    const [active, setActive] = useState(true);\n\n    const visableFields = fields.filter(e => filterField(e, filter, cropId, active));\n    const visableSelectedFields = visableFields.filter(e => selectFields.includes(e));\n    const numSelected = visableSelectedFields.length;\n    const rowCount = visableFields.length;\n    const showPegination = rowCount > ROWS_PER_PAGE;\n\n\n    const handleSetFilter = (value) => {\n        setFilter(value);\n        setPage(0);\n    }\n\n    const onSelectAllClick = (e) => {\n        if (e.target.checked) {\n            const visableSelectedFieldIDs = visableSelectedFields.map(f => f.id);\n            const visableNotSelectedFields = visableFields.filter(f => !visableSelectedFieldIDs.includes(f.id));\n            setSelectedFields(selectFields.concat(visableNotSelectedFields));\n        } else {\n            const visableFieldsIDs = visableFields.map(f => f.id);\n            setSelectedFields(selectFields.filter(f => !visableFieldsIDs.includes(f.id)));\n        }\n    };\n\n    const onSelectRow = (e) => {\n        if (isFieldSelected(e, selectFields)) {\n            setSelectedFields(selectFields.filter(f => e.id !== f.id));\n        } else {\n            setSelectedFields(selectFields.concat([e]));\n        }\n    }\n\n\n    const onAction = (save) => {\n        handleClose(save ? selectFields : null);\n        setSelectedFields([])\n        setFilter('');\n        setPage(0);\n    }\n\n\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullScreen={isMobile()} fullWidth={!isMobile()}\n            disableEscapeKeyDown={false}\n            disableRestoreFocus={true}\n            slots={{ transition: Transition }}\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title={`${text.fields}`} />\n\n            <DialogTitle id=\"alert-dialog-title\">\n                <Box display={'flex'} flexDirection={'row'}>\n\n                    <TextFieldBase fullWidth={true} label={text.filter} value={filter}\n                        onChange={(e) => handleSetFilter(e.target.value)}\n                        InputProps={{\n                            startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>,\n                        }}\n                    />\n                    <FormControlLabel control={<Checkbox checked={active} onChange={() => setActive(!active)} />} labelPlacement=\"top\" label={text.active} />\n\n                </Box>\n            </DialogTitle>\n            <DialogContent>\n                <TableContainer >\n                    <Table size=\"small\" sx={{ margin: 0, padding: 0 }} aria-label=\"a dense table\">\n                        <TableHead>\n                            <TableRow style={{\n                                height: 10,\n                            }}>\n                                <TableCell padding=\"checkbox\">\n                                    <Checkbox\n                                        color=\"primary\"\n                                        indeterminate={numSelected > 0 && numSelected < rowCount}\n                                        checked={rowCount > 0 && numSelected === rowCount}\n                                        onChange={onSelectAllClick}\n                                        inputProps={{\n                                            'aria-label': 'select all desserts',\n                                        }}\n                                    />\n                                </TableCell>\n                                <TableCell sx={headerSx} >{text.field}</TableCell>\n                                <TableCell sx={headerSx}>{text.alias}</TableCell>\n                                <TableCell sx={headerSx}>{text.crop}</TableCell>\n                                <TableCell sx={headerSx}>{text.variety}</TableCell>\n                                <TableCell sx={headerSx}>{text.site}</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {visableFields.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) =>\n                                <Row key={index} index={index} row={row} text={text} onClick={() => onSelectRow(row, index)} isItemSelected={isFieldSelected(row, selectFields)} />\n                            )}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Box display={'flex'} flex={1} flexDirection={'column'} justifyContent={'center'}>\n                    {showPegination && <Divider />}\n                    {showPegination && <ListPager bottom={50} page={Number(page)}\n                        totalPages={Math.ceil(rowCount / ROWS_PER_PAGE)} setPage={setPage} />}\n                    <Box display={'flex'} justifyContent={'center'}>\n                        <Button size='large' disableElevation={true} variant='contained' onClick={() => onAction(true)} autoFocus>\n                            {text.save}\n                        </Button>\n                    </Box>\n                </Box>\n            </DialogActions>\n        </Dialog>\n    )\n\n}\nfunction Row(props) {\n    const { row, index, text, onClick, isItemSelected } = props;\n    return (\n        <Fragment>\n            <TableRow style={{\n                height: 10,\n            }} onClick={onClick}\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\n                <TableCell padding=\"checkbox\">\n                    <Checkbox\n                        color=\"primary\"\n                        checked={isItemSelected}\n                        inputProps={{\n                            'aria-labelledby': index,\n                        }}\n                    />\n                </TableCell>\n                <TableCell sx={cellSx} >{row.name}</TableCell>\n                <TableCell sx={cellSx}>{row.alias}</TableCell>\n                <TableCell sx={cellSx} >{row.cropName}</TableCell>\n                <TableCell sx={cellSx}>{row.varietyName}</TableCell>\n                <TableCell sx={cellSx}>{row.siteName}</TableCell>\n            </TableRow>\n        </Fragment>\n    );\n}\n\nexport default FieldSelectionDialog;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 947, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/WaypointDialog.js"],"sourcesContent":["import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, ListItemButton, ListItemIcon, ListItemText, Menu, MenuItem, TextField, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../components/ui/TextField\";\nimport { Cancel, Delete, Save, Share } from \"@mui/icons-material\";\nimport { useEffect, useState } from \"react\";\nimport { AREA_UNIT, asShortStringDateTime, getFillColor, getOpacity, getUnitText, isStringEmpty, parseISOOrNull } from \"../FarmUtil\";\nimport DialogAppBar from \"./DialogAppBar\";\nimport { selectLang } from \"../../features/app/appSlice\";\nimport { useSelector } from \"react-redux\";\nimport { msgTelegram, msgWhatsapp, shareMsg, Telegram, Whatsapp } from \"../../appbar/components/ShareLocationMenu\";\nimport WhatsAppIcon from '@mui/icons-material/WhatsApp';\nimport TelegramIcon from '@mui/icons-material/Telegram';\nimport { CircleMarker, MapContainer, Polygon, Tooltip, useMapEvents } from \"react-leaflet\";\nimport SatelliteMapProvider from \"../../components/map/SatelliteMapProvider\";\nimport { safeParseJson } from \"../../features/fields/fieldsApiSlice\";\nimport PointIcon from \"../layers/PointIcon\";\nimport { Transition } from \"../Util\";\nconst WaypointDialog = ({ open, handleClose, selectedPoint, handleDelete, title, polygons, center, initialZoom }) => {\n\n    const text = useSelector(selectLang);\n    const [touched, setTouched] = useState(false);\n\n    const [note, setNote] = useState(selectedPoint.note);\n    const [lat, setLat] = useState(selectedPoint.point.lat);\n    const [lng, setLng] = useState(selectedPoint.point.lng);\n\n//   const [note, setNote] = useState(selectedPoint.note);\n\n    const [anchorEl, setAnchorEl] = useState(null);\n    const openShare = Boolean(anchorEl);\n\n    const [zoom, setZoom] = useState(initialZoom);\n    const [map, setSetMap] = useState(0);\n\n    const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n    const handleCloseShare = () => {\n        setAnchorEl(null);\n    };\n\n    const handleSetNote = (val) => {\n        setNote(val);\n        setTouched(true)\n    }\n\n    const onAction = (val) => {\n        handleClose(val, note, lat, lng);\n        setTouched(false);\n    }\n\n    function HandleMapEvents() {\n        const m = useMapEvents({\n            zoomend: () => {\n                setZoom(m.getZoom())\n            },\n            dragend: (e) => {\n                //   setCenter([e.target.getCenter().lat.toFixed(5),e.target.getCenter().lng.toFixed(5)])\n            },\n            click: (e) => {\n                setLat(e.latlng.lat.toFixed(5))\n                setLng(e.latlng.lng.toFixed(5))\n               // setCenter([e.target.getCenter().lat.toFixed(5),e.target.getCenter().lng.toFixed(5)])\n\n                //   mapCliecked(e, null, 'map');\n\n            }\n        })\n        return <div></div>\n    }\n\n    const height = window.innerHeight - 200;\n\n    const shareClick = (app) => {\n        const prefix = isStringEmpty(title) ? '' : title + ' - ';\n        const suffix = isStringEmpty(note) ? '' : note;\n\n        const msg = shareMsg(selectedPoint.point.lat, selectedPoint.point.lng, prefix + suffix);\n        if (app === Whatsapp) {\n            msgWhatsapp(msg)\n        } else if (app === Telegram) {\n            msgTelegram(msg)\n        }\n        setAnchorEl(null);\n    }\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullScreen\n            slots={{ transition: Transition }}\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title={\n                    <Box display={'flex'} flexDirection={'row'} justifyContent={'space-between'}>\n                        <Typography variant=\"h6\">\n                            {title}\n                        </Typography>\n                        <Typography marginLeft={3} marginRight={3} variant=\"h6\">\n                            {asShortStringDateTime(parseISOOrNull(selectedPoint.createTime ? selectedPoint.createTime : selectedPoint.date))}\n                        </Typography>\n                    </Box>\n                } />\n            <DialogContent sx={{ margin: 0, padding: 0 }}>\n                <Box padding={1}>\n                    <TextFieldBase value={note} onChange={e => handleSetNote(e.target.value)} fullWidth={true} label={`${text.note}`} />\n                </Box>\n                <Box flex={1} id=\"map\" dir='ltr' >\n                    <MapContainer style={{ height: height, width: '100%' }} center={center} zoom={zoom} scrollWheelZoom={false}\n                        ref={setSetMap}\n                    >\n                        <SatelliteMapProvider />\n                        {polygons.map(f =>\n                            <Polygon field={f} key={f.id}\n                                color={f.color}\n                                fillColor={getFillColor(f)}\n                                fillOpacity={getOpacity(f)}\n\n                                positions={safeParseJson(f.polygon)}>\n                            </Polygon>\n                        )}\n\n\n\n\n                        <CircleMarker\n\n                            radius={14}\n                            color={'white'}\n                            weight={4}\n                            fillOpacity={1}\n                            center={[lat,lng]}\n                        >\n                            <Tooltip\n                                className={'empty-tooltip'}\n                                direction=\"center\" opacity={1} permanent>\n                                <PointIcon point={selectedPoint.point} />\n                            </Tooltip>\n                        </CircleMarker>\n\n                        <HandleMapEvents />\n                    </MapContainer>\n\n                </Box>\n\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Button size='large' endIcon={<Delete />} disableElevation={true} variant='outlined' onClick={handleDelete}>{text.delete}</Button>\n                <Button\n                    size='large' endIcon={<Share />}\n                    disableElevation={true} variant='outlined'\n                    id=\"share-button\"\n                    aria-controls={open ? 'share-button' : undefined}\n                    aria-haspopup=\"true\"\n                    aria-expanded={open ? 'true' : undefined}\n                    onClick={handleClick}\n                >\n                    {text.share}\n                </Button>\n                <Menu\n                    id=\"share-menu\"\n                    anchorEl={anchorEl}\n                    open={openShare}\n                    onClose={handleCloseShare}\n\n                >\n                    <MenuItem onClick={() => shareClick(Whatsapp)}>\n                        <ListItemIcon>\n                            <WhatsAppIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={Whatsapp} />\n                    </MenuItem>\n                    <MenuItem onClick={() => shareClick(Telegram)}>\n                        <ListItemIcon>\n                            <TelegramIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={Telegram} />\n                    </MenuItem>\n                </Menu>\n                <Button /*disabled={!touched}*/ size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} >\n                    {text.save}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\nexport default WaypointDialog;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1397, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/WaypointSelectionDialog.js"],"sourcesContent":["import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from \"@mui/material\";\nimport { useSelector } from \"react-redux\";\nimport { selectActiveGPS, selectLang, selectLatitude, selectLongitude } from \"../../features/app/appSlice\";\nimport { useEffect, useState } from \"react\";\nimport { Transition } from \"../Util\";\nimport { Add, Delete, GpsFixed, Save } from \"@mui/icons-material\";\nimport { activityDescription, asLocalDateTime, getFillColor, getOpacity, newDate, SCOUT, stopMapEventPropagation } from \"../FarmUtil\";\n\nimport DialogAppBar from \"./DialogAppBar\";\n\nimport { useGetUserDataQuery } from \"../../features/auth/authApiSlice\";\nimport { CircleMarker, MapContainer, Polygon, Tooltip, useMapEvents } from \"react-leaflet\";\nimport SatelliteMapProvider from \"../../components/map/SatelliteMapProvider\";\nimport GeoLocation from \"../../components/GeoLocation\";\nimport { safeParseJson } from \"../../features/fields/fieldsApiSlice\";\nimport WaypointDialog from \"./WaypointDialog\";\nimport PointIcon, { ACTIVITY_POINT_TYPE, SCOUT_POINT_TYPE } from \"../layers/PointIcon\";\nimport Accuracy from \"../../appbar/components/Accuracy\";\n\n\nconst getPointType = (activityType) => {\n    if (activityType === SCOUT) {\n        return SCOUT_POINT_TYPE;\n    } else {\n        return ACTIVITY_POINT_TYPE;\n    }\n}\n\nconst getFirstFieldWIthGIS = (fields) => {\n    return fields.find(e => e.polygon !== null && e.lat !== null && e.lng != null);\n}\n\nconst getMapCenter = (fields, user) => {\n    const e = getFirstFieldWIthGIS(fields);\n    if (e) {\n        return [e.lat, e.lng]\n    } else {\n        return [user.lat, user.lng]\n    }\n}\n\nconst getMapZoom = (fields, user) => {\n    const e = getFirstFieldWIthGIS(fields);\n    if (e) {\n        return e.zoom;\n    } else {\n        return user.zoom;\n    }\n\n}\n\nconst WaypointSelectionDialog = ({ open, handleClose, fields, waypoints, activityType, activityDef }) => {\n    const text = useSelector(selectLang);\n    const [filter, setFilter] = useState('');\n\n    const { data: user } = useGetUserDataQuery()\n\n\n    const longitude = useSelector(selectLongitude);\n    const latitude = useSelector(selectLatitude);\n    const activeGPS = useSelector(selectActiveGPS);\n\n\n    const [center, setCenter] = useState(activeGPS && latitude && longitude ? [latitude, longitude] : getMapCenter(fields.map(e => e.field), user));\n    const [zoom, setZoom] = useState(getMapZoom(fields.map(e => e.field), user));\n    const [map, setSetMap] = useState(0);\n\n    const [points, setPoints] = useState([...waypoints]);\n\n    const [selectedPoint, setSelectedPoint] = useState(null);\n\n    const [selectedIndex, setSelectedIndex] = useState(null);\n\n    const [openWaypointDialog, setOpenWaypointDialog] = useState(false);\n\n\n\n    const title = activityDescription({activityDef, type: activityType}, text);\n\n    useEffect(() => {\n        if (map && activeGPS && longitude && latitude) {\n            map.setView([latitude, longitude], zoom);\n        }\n\n    }, [activeGPS, longitude, latitude])\n\n\n    const height = window.innerHeight - 65;\n\n    const deleteWaypoint = () => {\n        const arr = [...points]\n\n        arr.splice(selectedIndex, 1);\n        //handleDelete(selectedIndex);\n        setSelectedIndex(null);\n        setOpenWaypointDialog(false);\n        setSelectedPoint(null);\n        setPoints(arr);\n    }\n\n    function HandleMapEvents() {\n        const m = useMapEvents({\n            zoomend: () => {\n                setZoom(m.getZoom())\n            },\n            dragend: (e) => {\n                setCenter([e.target.getCenter().lat.toFixed(5),e.target.getCenter().lng.toFixed(5)])\n            },\n            click: (e) => {\n                mapCliecked(e, null, 'map');\n\n            }\n        })\n        return <div></div>\n    }\n\n\n    // const [page, setPage] = useState(0);\n    // const [rowsPerPage, setRowsPerPage] = useState(ROWS_PER_PAGE);\n    // const [selected, setSelected] = useState([]);\n\n    // const { data: pests, isLoading: isPestsLoading } = useGetPestsQuery();\n\n    // const handleSetFilter = (value) => {\n    //     setFilter(value);\n    //     setPage(0);\n    // }\n\n\n\n    // const onSelectRow = (e) => {\n    //     if (isElementSelected(e, selected)) {\n    //         setSelected(selected.filter(f => e.id !== f.id));\n    //     } else {\n    //         setSelected(selected.concat([e]));\n    //     }\n    // }\n\n\n    const onAction = (save) => {\n        handleClose(save ? points : null);\n        setPoints([])\n    }\n\n    const addNewPoint = () => {\n\n        var point = null;\n        var index = null;\n        var lat =  activeGPS? latitude : center[0];\n        var lng =  activeGPS? longitude : center[1];\n        points.forEach((e, i) => {\n\n            if (e.point.lat === lat && e.point.lng === lng) {\n                point = e;\n                index = i;\n            }\n        })\n\n        if (point === null) {\n            var i = points.length +1;\n            point = {\n                note: `${i}`, date: asLocalDateTime(newDate(), true),\n                createTime: asLocalDateTime(newDate(), true), point: { lat, lng, type: getPointType(activityType), active: true }\n            };\n        }\n        setSelectedPoint(point);\n        setOpenWaypointDialog(true);\n      //  setSelectedIndex(index);\n    }\n\n\n    const mapCliecked = (e, element, type, index) => {\n//          console.log('mapCliecked', type, index)\n        if (type === 'point') {\n            stopMapEventPropagation(e);\n            setSelectedPoint(element);\n            setOpenWaypointDialog(true);\n            setSelectedIndex(index);\n        } \n        else if(!activeGPS){\n            stopMapEventPropagation(e);\n\n            var i = points.length+1;\n            var point = {\n                note: `${i}`, date: asLocalDateTime(newDate(), true),\n                createTime: asLocalDateTime(newDate(), true), point: { lat: e.latlng.lat.toFixed(5), lng: e.latlng.lng.toFixed(5), type: getPointType(activityType), active: true }\n            };\n\n          //  setPoints(points.concat(point));\n            setSelectedPoint(point);\n            setOpenWaypointDialog(true);\n          //  setSelectedIndex(i);\n        }\n    }\n\n\n    const displayFields = fields.map(e => e.field);\n\n    const polygons = displayFields.filter(e => e.polygon !== null);\n\n\n    const handleCloseWaypointDialog = (val, note, lat, lng) => {\n       // console.log('val',val)\n       if(val){\n           //const  updatedPoint = {not}\n\n            selectedPoint.note = note;\n            selectedPoint.point.lat = lat;\n            selectedPoint.point.lng = lng;\n       }\n        if(val && selectedIndex === null){            \n            setPoints(points.concat(selectedPoint));\n        }\n        setOpenWaypointDialog(false);\n        setSelectedPoint(null);\n        setSelectedIndex(null);\n    }\n\n    // const customMarkerIcon = divIcon({\n    //     html: \"<div>HI</div>\"\n    //   });\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullScreen\n            slots={{ transition: Transition }}\n                    >\n            <DialogAppBar onClose={() => onAction(false)}\n                title={<Box display={'flex'} flexDirection={'row'} justifyContent={'space-between'} alignItems={'center'}><Typography variant=\"h6\">{`${text.map}`}</Typography><Box padding={2}><Accuracy /></Box></Box>} />\n\n            <DialogTitle id=\"alert-dialog-title\" sx={{ margin: 0, padding: 0 }}>\n                {/* {title} */}\n                {/* <Box display={'flex'} flexDirection={'row'}>\n\n                    <TextFieldBase fullWidth={true} label={text.filter} value={filter}\n                        onChange={(e) => handleSetFilter(e.target.value)}\n                        InputProps={{\n                            startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>,\n                        }}\n                    />\n\n                </Box> */}\n            </DialogTitle>\n            <DialogContent sx={{ margin: 0, padding: 0 }}>\n                <Box display={'flex'} flex={1} alignItems={'stretch'} flexDirection={'column'} justifyContent={'space-between'}>\n\n                    <Box flex={1} style={{ height: '100%' }} id=\"map\" dir='ltr' >\n                        <MapContainer style={{ height: height, width: '100%' }} center={center} zoom={zoom} scrollWheelZoom={false}\n                            ref={setSetMap}\n                        >\n\n                            <SatelliteMapProvider />\n                            {!activeGPS && <GeoLocation />}\n                            {polygons.map(f =>\n                                <Polygon field={f} key={f.id}\n                                    color={f.color}\n                                    fillColor={getFillColor(f)}\n                                    fillOpacity={getOpacity(f)}\n                                    eventHandlers={{\n                                        click: (e) => {\n                                            mapCliecked(e, f, 'polygon');\n                                            //  navigate(`/field/map/${f.id}/info`)\n                                        }\n                                    }}\n                                    positions={safeParseJson(f.polygon)}>\n                                </Polygon>\n                            )}\n\n{/* {!activeGPS  && <CircleMarker color={'black'} fillColor={'yellow'} fillOpacity={1} center={[center[0], center[1]]} />} */}\n\n                            {activeGPS && latitude && longitude && <CircleMarker color={'white'} fillColor={'blue'} fillOpacity={1} center={[latitude, longitude]} />}\n                            {\n                                points.map((e, index, arr) =>\n\n                                    <CircleMarker\n\n                                        eventHandlers={{\n                                            click: (event) => {\n\n                                                mapCliecked(event, e, 'point', index);\n                                            }\n                                        }}\n                                        key={index} radius={14}\n                                        color={'white'}\n                                        weight={4}\n                                        // fillColor={'lightGray'}\n                                        fillOpacity={1}\n                                        center={[e.point.lat, e.point.lng]}\n                                    >\n                                        <Tooltip\n                                            className={'empty-tooltip'}\n                                            direction=\"center\" opacity={1} permanent>\n                                            <PointIcon point={e.point} />\n                                        </Tooltip>\n                                    </CircleMarker>\n                                )\n                            }\n                            <HandleMapEvents />\n                        </MapContainer>\n\n                    </Box>\n                </Box>\n                {openWaypointDialog && <WaypointDialog title={title} open={openWaypointDialog} selectedPoint={selectedPoint} handleClose={handleCloseWaypointDialog} handleDelete={deleteWaypoint} polygons={polygons} center={center} initialZoom={zoom}/>}\n                            {/* {openWaypointDialog && <ActivityPointActionDialog open={openWaypointDialog} selectedPoint={selectedPoint} handleClose={handleCloseWaypointDialog} handleDelete={deleteWaypoint} />} */}\n\n            </DialogContent>\n            <DialogActions sx={{ justifyContent: 'center' }}>\n                <Button size='large' endIcon={activeGPS ? <GpsFixed/> : <Add />} disableElevation={true} variant='outlined' onClick={() => addNewPoint()} autoFocus>\n                    {text.add}\n                </Button>\n                <Button size='large' endIcon={<Delete />} disableElevation={true} variant='outlined' onClick={() => setPoints([])}>{`${text.delete} ${text.all}`}</Button>\n\n                <Button size='large' endIcon={<Save />} disableElevation={true} variant='contained' onClick={() => onAction(true)} autoFocus>\n                    {text.save}\n                </Button>\n\n            </DialogActions>\n        </Dialog>\n    )\n\n}\n\n\nexport default WaypointSelectionDialog;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1991, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/ResourcseSelectionDialog.js"],"sourcesContent":["import { AppBar, Box, Button, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle, Divider, IconButton, InputAdornment, MenuItem, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Toolbar, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../components/ui/TextField\";\nimport { useSelector } from \"react-redux\";\nimport { selectLang } from \"../../features/app/appSlice\";\nimport { Fragment, useEffect, useRef, useState } from \"react\";\nimport { cellSx, headerSx, Transition } from \"../Util\";\nimport { useGetUserDataQuery } from \"../../features/auth/authApiSlice\";\nimport { Close, Search } from \"@mui/icons-material\";\nimport { EQUIPMENT, FERTILIZER, LIST_PESTICIDE, PESTICIDE, SPRAYER, VARIETY, WATER, getResourceTypeText, getUnitText, isMobile, isStringEmpty } from \"../FarmUtil\";\nimport { useGetResourcesQuery } from \"../../features/resources/resourcesApiSlice\";\nimport ListPager from \"../../components/ui/ListPager\";\nimport { useGetCropPesticidesQuery } from \"../../features/pesticides/pecticidesApiSlice\";\nimport DialogAppBar from \"./DialogAppBar\";\n\nconst filterResource = (e, filter, type, text, isSprayer) => {\n    const categopryOk = (isSprayer ? e.category === SPRAYER : true);\n    if (isStringEmpty(filter)) {\n        return type === e.type && categopryOk;\n    } else {\n        const val = filter.toLowerCase();\n        return (categopryOk) && (e.name.toLowerCase().includes(val) ||\n            e.code?.toLowerCase().includes(val) ||\n            e.identification?.toLowerCase().includes(val) ||\n            text[e.category?.toLowerCase()]?.toLowerCase().includes(val))\n    }\n};\n\nconst isItemSelected = (item, selectedItems) => {\n    return selectedItems.some(e => e.id === item.id)\n};\n\nconst height = window.innerHeight - 252;\n\nexport const ROWS_PER_PAGE = 100;\nconst ResourcseSelectionDialog = ({ open, handleClose, resourceTypes, cropId }) => {\n\n    const text = useSelector(selectLang);\n    const { data: user } = useGetUserDataQuery()\n\n    const [filter, setFilter] = useState('');\n    const [type, setType] = useState(resourceTypes[0]);\n\n    const [selectedResources, setSelectedResources] = useState([]);\n    //  const [selectedPesticides, setSelectedPesticides] = useState([]);\n\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(ROWS_PER_PAGE);\n\n    const tableContainerRef = useRef(null);\n\n    const clear = () => {\n        setFilter('');\n        setPage(0);\n        setRowsPerPage(ROWS_PER_PAGE)\n    }\n\n    const handleSetFilter = (value) => {\n        setFilter(value);\n        setPage(0);\n    }\n\n    const handleSeType = (value) => {\n        setType(value);\n        clear();\n    }\n\n    useEffect(() => {\n        clear();\n    }, [type]);\n\n    const handleChangePage = (newPage) => {\n        setPage(newPage);\n        console.log(tableContainerRef)\n        if (tableContainerRef.current) {\n            tableContainerRef.current.scrollIntoView();\n        }\n    };\n\n    const isPesticidelist = type === LIST_PESTICIDE;\n    const isSprayer = type === SPRAYER;\n\n    const fetchType = isSprayer ? EQUIPMENT : type;\n    const {\n        data,\n        isLoading,\n        isSuccess,\n        // isError,\n        // error\n    } = useGetResourcesQuery({ type: fetchType }, { skip: isPesticidelist })\n\n    const { data: cropPesticides, isSuccess: isCropPesticidesSuccess, isLoading: isLoadingesticideList } = useGetCropPesticidesQuery({ cropId }, { skip: !cropId })\n\n    if (isLoadingesticideList && !isCropPesticidesSuccess) {\n        return <></>\n    }\n    const isSingular = [WATER, SPRAYER].includes(type);\n\n    const onSelectRow = (e) => {\n        if (isItemSelected(e, selectedResources)) {\n            setSelectedResources(selectedResources.filter(f => e.id !== f.id));\n        } else {\n            if (isSingular) {\n                setSelectedResources(selectedResources.filter(r => r.type !== e.type).concat([e]))\n            } else {\n                setSelectedResources(selectedResources.concat([e]));\n            }\n        }\n    }\n\n\n\n    const buildVisableResources = () => {\n        if (isPesticidelist) {\n\n            if (cropPesticides) {\n                return cropPesticides.filter(e => filterResource(e.resource, filter, PESTICIDE, text, false));\n            }\n            else {\n                return [];\n            }// return cropPesticides ? cropPesticides : [];\n\n        } else {\n            return data ? data.filter(e => filterResource(e, filter, fetchType, text, type === SPRAYER)) : [];\n        }\n    }\n\n\n    const visableResources = buildVisableResources().filter(e => e.active);\n\n    const visableSelectedResources = visableResources.filter(e => selectedResources.includes(e));\n    const numSelected = visableSelectedResources.length;\n    const rowCount = visableResources.length;\n    const showPegination = rowCount > ROWS_PER_PAGE;\n    const isFertilizer = type === FERTILIZER;\n    const isVariety = type === VARIETY;\n    const isEquipment = type === EQUIPMENT;\n\n    const onSelectAllClick = (e) => {\n        if (e.target.checked) {\n            const visableSelectedResourceIDs = visableSelectedResources.map(f => f.id);\n            const visableNotSelectedResources = visableResources.filter(f => !visableSelectedResourceIDs.includes(f.id));\n            setSelectedResources(selectedResources.concat(visableNotSelectedResources));\n        } else {\n            const visableResourceIDs = visableResources.map(f => f.id);\n            setSelectedResources(selectedResources.filter(f => !visableResourceIDs.includes(f.id)));\n        }\n    };\n\n    const onAction = (save) => {\n        handleClose(save ? selectedResources : null);\n        setSelectedResources([]);\n        clear();\n    }\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullScreen={isMobile()} fullWidth={!isMobile()}\n            disableRestoreFocus={true}\n            slots={{ transition: Transition }}\n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title={`${text.resources}`} />\n            <DialogTitle id=\"alert-dialog-title\">\n                <Box>\n                    <TextFieldBase\n                        sx={{ margin: 1 }}\n                        id=\"outlined-select-resource-type\"\n                        select\n                        fullWidth\n                        label={text.type}\n                        value={type}\n                        onChange={e => handleSeType(e.target.value)}\n                    >\n                        {resourceTypes.map((e) => (\n                            <MenuItem key={e} value={e}>\n                                {getResourceTypeText(e, text)}\n                            </MenuItem>\n                        ))}\n                    </TextFieldBase>\n\n                    <TextFieldBase fullWidth={true} label={text.filter} value={filter}\n                        sx={{ margin: 1 }}\n                        id=\"outlined-filter-resource-type\"\n                        onChange={(e) => handleSetFilter(e.target.value)}\n                        InputProps={{\n                            startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>,\n                        }}\n                    />\n                </Box>\n            </DialogTitle>\n            <DialogContent sx={{ padding: 0, margin: 0 }}>\n                <TableContainer sx={{ padding: 0, }} ref={tableContainerRef} >\n                    <Table stickyHeader size=\"small\" sx={{ width: '100%', margin: 0, padding: 0, overflowY: 'auto' }} aria-label=\"a dense table\">\n                        <TableHead >\n                            <TableRow\n                            // style={{\n                            //     height: 10,\n                            // }}\n                            >\n                                <TableCell padding=\"checkbox\">\n                                    <Checkbox\n                                        disabled={isSingular}\n                                        color=\"primary\"\n                                        indeterminate={numSelected > 0 && numSelected < rowCount}\n                                        checked={rowCount > 0 && numSelected === rowCount}\n                                        onChange={onSelectAllClick}\n                                        inputProps={{\n                                            'aria-label': 'select all desserts',\n                                        }}\n                                    />\n                                </TableCell>\n                                <TableCell sx={headerSx} >{text.name}</TableCell>\n\n                                {isPesticidelist &&\n                                    <TableCell sx={headerSx}>{text.pest}</TableCell>\n                                }\n                                <TableCell sx={headerSx}>{text.unit}</TableCell>\n                                {isSprayer &&\n                                    <TableCell sx={headerSx}>{text.capacity}</TableCell>\n                                }\n                                {isFertilizer &&\n                                    <TableCell sx={headerSx}>{'N-P-K'}</TableCell>\n                                }\n                                {isFertilizer &&\n                                    <TableCell sx={headerSx}>{'SG'}</TableCell>\n                                }\n                                {isVariety && <TableCell sx={headerSx} >{text.crop}</TableCell>}\n                                {isEquipment && <TableCell sx={headerSx} >{text.category}</TableCell>}\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {visableResources.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) =>\n                                <Row key={index} index={index} row={row} text={text}\n                                    onClick={() => onSelectRow(row, index)}\n                                    isItemSelected={isItemSelected(row, selectedResources)}\n                                    user={user} isFertilizer={isFertilizer} isVariety={isVariety}\n                                    isEquipment={isEquipment} isSprayer={isSprayer} />\n                            )}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </DialogContent>\n            <DialogActions>\n                <Box display={'flex'} flex={1} flexDirection={'column'} justifyContent={'center'}>\n                    {showPegination && <Divider />}\n                    {showPegination && <ListPager bottom={50} page={Number(page)}\n                        totalPages={Math.ceil(visableResources.length / ROWS_PER_PAGE)} setPage={handleChangePage} />}\n                    <Box display={'flex'} justifyContent={'center'}>\n                        <Button size='large' disableElevation={true} variant='contained' onClick={() => onAction(true)} autoFocus>\n                            {text.save}\n                        </Button>\n                    </Box>\n                </Box>\n            </DialogActions>\n        </Dialog >\n    )\n\n}\nfunction Row(props) {\n    const { row, index, text, onClick, isItemSelected, user, isFertilizer, isVariety, isEquipment, isSprayer } = props;\n    const resource = row.resource ? row.resource : row;\n    return (\n        <Fragment>\n            <TableRow style={{\n                height: 10,\n            }} onClick={onClick}\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\n                <TableCell padding=\"checkbox\">\n                    <Checkbox\n                        color=\"primary\"\n                        checked={isItemSelected}\n                        inputProps={{\n                            'aria-labelledby': index,\n                        }}\n                    />\n                </TableCell>\n                <TableCell sx={cellSx} >{resource.name}</TableCell>\n                {row.pestName && <TableCell sx={cellSx} >{row.pestName}</TableCell>}\n\n                <TableCell sx={cellSx}>{getUnitText(row.unit ? row.unit : resource.usageUnit, user.areaUnit, text)}</TableCell>\n                {isSprayer && <TableCell sx={cellSx} >{`${resource.capacity} `}</TableCell>}\n\n                {isFertilizer && <TableCell sx={cellSx} >{`${resource.n}-${resource.p}-${resource.k} `}</TableCell>}\n                {isFertilizer && <TableCell sx={cellSx} >{resource.specificGravity}</TableCell>}\n                {isVariety && <TableCell sx={cellSx} >{resource.identification}</TableCell>}\n                {isEquipment && <TableCell sx={cellSx} >{text[resource.category?.toLowerCase()]}</TableCell>}\n            </TableRow>\n        </Fragment>\n    );\n}\n\nexport default ResourcseSelectionDialog;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2640, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/AlertDialog.js"],"sourcesContent":["import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material'\nimport React from 'react'\nimport { useSelector } from 'react-redux'\nimport { selectLang } from '../../features/app/appSlice'\nimport { isArrayEmpty } from '../FarmUtil'\n\nconst AlertDialog = ({ open, message, varieant, handleClose, buttonText, title, translate }) => {\n    const text = useSelector(selectLang)\n\n    return (\n        <Dialog\n            fullWidth\n            open={open}\n            onClose={handleClose}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n        >\n            <DialogTitle id=\"alert-dialog-title\">\n                {text[title]}\n            </DialogTitle>\n            {!isArrayEmpty(message) && <DialogContent>\n                {message.map((e, index) => <DialogContentText key={index}>{`${index+1}. ${text[e]}`}</DialogContentText>)}\n            </DialogContent>}\n            <DialogActions>\n                <Button size='large' disableElevation={true} variant='contained' onClick={handleClose} autoFocus>\n                    {buttonText}\n                </Button>\n            </DialogActions>\n        </Dialog>\n\n    )\n}\n\nexport default AlertDialog"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEA,IAAM,cAAc;QAAG,aAAA,MAAM,gBAAA,SAAS,iBAAA,UAAU,oBAAA,aAAa,mBAAA,YAAY,cAAA,OAAO,kBAAA;;IAC5E,IAAM,OAAO,IAAA,2KAAW,EAAC,mJAAU;IAEnC,qBACI,6LAAC,8MAAM;QACH,SAAS;QACT,MAAM;QACN,SAAS;QACT,mBAAgB;QAChB,oBAAiB;;0BAEjB,6LAAC,kOAAW;gBAAC,IAAG;0BACX,IAAI,CAAC,MAAM;;;;;;YAEf,CAAC,IAAA,wIAAY,EAAC,0BAAY,6LAAC,0OAAa;0BACpC,QAAQ,GAAG,CAAC,SAAC,GAAG;yCAAU,6LAAC,0PAAiB;kCAAc,AAAC,GAAc,OAAZ,QAAM,GAAE,MAAY,OAAR,IAAI,CAAC,EAAE;uBAA9B;;;;;;;;;;;0BAEvD,6LAAC,0OAAa;0BACV,cAAA,6LAAC,8MAAM;oBAAC,MAAK;oBAAQ,kBAAkB;oBAAM,SAAQ;oBAAY,SAAS;oBAAa,SAAS;8BAC3F;;;;;;;;;;;;;;;;;AAMrB;GAzBM;;QACW,2KAAW;;;KADtB;uCA2BS"}},
    {"offset": {"line": 2740, "column": 0}, "map": {"version":3,"sources":["file:///home/tomer/VSCodeProjects/farm-manager-mobile-ui-next/src/ui/dialog/PestSelectionDialog.js"],"sourcesContent":["import { AppBar, Box, Button, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle, Divider, FormControlLabel, IconButton, InputAdornment, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Toolbar, Typography } from \"@mui/material\";\nimport TextFieldBase from \"../../components/ui/TextField\";\nimport { useSelector } from \"react-redux\";\nimport { selectLang } from \"../../features/app/appSlice\";\nimport { Fragment, useState } from \"react\";\nimport { cellSx, headerSx, Transition } from \"../Util\";\nimport { Close, Search } from \"@mui/icons-material\";\nimport { isMobile, isStringEmpty } from \"../FarmUtil\";\n\nimport DialogAppBar from \"./DialogAppBar\";\n\nimport { useGetInfectionLevelsQuery, useGetPestsQuery, useGetPestStagesQuery, useGetPlantLocationsQuery } from '../../features/pests/pestsApiSlice';\nimport ListPager from \"../../components/ui/ListPager\";\n\nconst isElementSelected = (entity, selected) => {\n    return selected.some(e => e.id === entity.id)\n};\n\nconst filterElement = (element, filter) => {\n    if (isStringEmpty(filter)) {\n        return true;\n    }\n    return element.name.toLowerCase().includes(filter.toLowerCase());\n}\n\n\nexport const ROWS_PER_PAGE = 100;\n\nconst PestSelectionDialog = ({ open, handleClose }) => {\n    const text = useSelector(selectLang);\n    const [filter, setFilter] = useState('');\n\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(ROWS_PER_PAGE);\n    const [selected, setSelected] = useState([]);\n\n    const { data: pests, isLoading: isPestsLoading } = useGetPestsQuery();\n\n    const handleSetFilter = (value) => {\n        setFilter(value);\n        setPage(0);\n    }\n\n\n\n    const onSelectRow = (e) => {\n        if (isElementSelected(e, selected)) {\n            setSelected(selected.filter(f => e.id !== f.id));\n        } else {\n            setSelected(selected.concat([e]));\n        }\n    }\n\n\n    const onAction = (save) => {\n        handleClose(save ? selected : null);\n        setSelected([])\n        setFilter('');\n        setPage(0);\n    }\n\n    if (isPestsLoading) {\n        return <></>\n    }\n\n    //const visableFields = pestst.filter(e => filterField(e, filter, cropId, active));\n\n    const visableDataElements = pests.filter(e => filterElement(e, filter));\n\n    const visableSelectedDataElements = visableDataElements.filter(e => selected.includes(e));\n    const rowCount = visableDataElements.length;\n    const showPegination = rowCount > ROWS_PER_PAGE;\n\n    return (\n        <Dialog\n            open={open}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            fullScreen={isMobile()} fullWidth={!isMobile()}\n            disableRestoreFocus={true}\n            slots={{ transition: Transition }}\n            \n        >\n            <DialogAppBar onClose={() => onAction(false)}\n                title={`${text.pests}`} />\n\n            <DialogTitle id=\"alert-dialog-title\">\n                <Box display={'flex'} flexDirection={'row'}>\n\n                    <TextFieldBase fullWidth={true} label={text.filter} value={filter}\n                        onChange={(e) => handleSetFilter(e.target.value)}\n                        InputProps={{\n                            startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>,\n                        }}\n                    />\n\n                </Box>\n            </DialogTitle>\n            <DialogContent>\n                <TableContainer >\n                    <Table size=\"small\" sx={{ margin: 0, padding: 0 }} aria-label=\"a dense table\">\n                        <TableHead>\n                            <TableRow style={{\n                                height: 10,\n                            }}>\n\n                                <TableCell sx={headerSx} >{text.name}</TableCell>\n\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {visableDataElements.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) =>\n\n                                <Row key={index} index={index} row={row} text={text} onClick={() => onSelectRow(row, index)}\n                                    isItemSelected={isElementSelected(row, selected)}\n                                />\n                            )}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </DialogContent>\n            <DialogActions>\n                <Box display={'flex'} flex={1} flexDirection={'column'} justifyContent={'center'}>\n                    {showPegination && <Divider />}\n                    {showPegination && <ListPager bottom={50} page={Number(page)}\n                        totalPages={Math.ceil(visableDataElements.length / ROWS_PER_PAGE)} setPage={setPage} />}\n                    <Box display={'flex'} justifyContent={'center'}>\n                        <Button size='large' disableElevation={true} variant='contained' onClick={() => onAction(true)} autoFocus>\n                            {text.save}\n                        </Button>\n                    </Box>\n                </Box>\n            </DialogActions>\n        </Dialog>\n    )\n\n}\nfunction Row(props) {\n    const { row, index, text, onClick, isItemSelected } = props;\n    return (\n        <Fragment>\n            <TableRow style={{\n                height: 10,\n            }} onClick={onClick}\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\n                <TableCell padding=\"checkbox\">\n                    <Checkbox\n                        color=\"primary\"\n                        checked={isItemSelected}\n                        inputProps={{\n                            'aria-labelledby': index,\n                        }}\n                    />\n                </TableCell>\n                <TableCell sx={cellSx} >{row.name}</TableCell>\n            </TableRow>\n        </Fragment>\n    );\n}\n\nexport default PestSelectionDialog;"],"names":[],"mappings":";;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;;;;;;;;;;;;;;;;;;AAEA,IAAM,oBAAoB,SAAC,QAAQ;IAC/B,OAAO,SAAS,IAAI,CAAC,SAAA;eAAK,EAAE,EAAE,KAAK,OAAO,EAAE;;AAChD;AAEA,IAAM,gBAAgB,SAAC,SAAS;IAC5B,IAAI,IAAA,yIAAa,EAAC,SAAS;QACvB,OAAO;IACX;IACA,OAAO,QAAQ,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;AACjE;AAGO,IAAM,gBAAgB;AAE7B,IAAM,sBAAsB;QAAG,aAAA,MAAM,oBAAA;;IACjC,IAAM,OAAO,IAAA,2KAAW,EAAC,mJAAU;IACnC,IAA4B,qLAAA,IAAA,yKAAQ,EAAC,SAA9B,SAAqB,cAAb,YAAa;IAE5B,IAAwB,sLAAA,IAAA,yKAAQ,EAAC,QAA1B,OAAiB,eAAX,UAAW;IACxB,IAAsC,sLAAA,IAAA,yKAAQ,EAAC,oBAAxC,cAA+B,eAAlB,iBAAkB;IACtC,IAAgC,sLAAA,IAAA,yKAAQ,EAAC,EAAE,OAApC,WAAyB,eAAf,cAAe;IAEhC,IAAmD,oBAAA,IAAA,gKAAgB,KAA3D,AAAM,QAAqC,kBAA3C,MAAa,AAAW,iBAAmB,kBAA9B;IAErB,IAAM,kBAAkB,SAAC;QACrB,UAAU;QACV,QAAQ;IACZ;IAIA,IAAM,cAAc,SAAC;QACjB,IAAI,kBAAkB,GAAG,WAAW;YAChC,YAAY,SAAS,MAAM,CAAC,SAAA;uBAAK,EAAE,EAAE,KAAK,EAAE,EAAE;;QAClD,OAAO;YACH,YAAY,SAAS,MAAM,CAAC;gBAAC;aAAE;QACnC;IACJ;IAGA,IAAM,WAAW,SAAC;QACd,YAAY,OAAO,WAAW;QAC9B,YAAY,EAAE;QACd,UAAU;QACV,QAAQ;IACZ;IAEA,IAAI,gBAAgB;QAChB,qBAAO;IACX;IAEA,mFAAmF;IAEnF,IAAM,sBAAsB,MAAM,MAAM,CAAC,SAAA;eAAK,cAAc,GAAG;;IAE/D,IAAM,8BAA8B,oBAAoB,MAAM,CAAC,SAAA;eAAK,SAAS,QAAQ,CAAC;;IACtF,IAAM,WAAW,oBAAoB,MAAM;IAC3C,IAAM,iBAAiB,WAAW;IAElC,qBACI,6LAAC,8MAAM;QACH,MAAM;QACN,mBAAgB;QAChB,oBAAiB;QACjB,YAAY,IAAA,oIAAQ;QAAI,WAAW,CAAC,IAAA,oIAAQ;QAC5C,qBAAqB;QACrB,OAAO;YAAE,YAAY,kIAAU;QAAC;;0BAGhC,6LAAC,iJAAY;gBAAC,SAAS;2BAAM,SAAS;;gBAClC,OAAO,AAAC,GAAa,OAAX,KAAK,KAAK;;;;;;0BAExB,6LAAC,kOAAW;gBAAC,IAAG;0BACZ,cAAA,6LAAC,kMAAG;oBAAC,SAAS;oBAAQ,eAAe;8BAEjC,cAAA,6LAAC,kJAAa;wBAAC,WAAW;wBAAM,OAAO,KAAK,MAAM;wBAAE,OAAO;wBACvD,UAAU,SAAC;mCAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;;wBAC/C,YAAY;4BACR,8BAAgB,6LAAC,8OAAc;gCAAC,UAAS;0CAAQ,cAAA,6LAAC,yKAAM;;;;;;;;;;wBAC5D;;;;;;;;;;;;;;;;0BAKZ,6LAAC,0OAAa;0BACV,cAAA,6LAAC,8OAAc;8BACX,cAAA,6LAAC,0MAAK;wBAAC,MAAK;wBAAQ,IAAI;4BAAE,QAAQ;4BAAG,SAAS;wBAAE;wBAAG,cAAW;;0CAC1D,6LAAC,0NAAS;0CACN,cAAA,6LAAC,sNAAQ;oCAAC,OAAO;wCACb,QAAQ;oCACZ;8CAEI,cAAA,6LAAC,0NAAS;wCAAC,IAAI,gIAAQ;kDAAI,KAAK,IAAI;;;;;;;;;;;;;;;;0CAI5C,6LAAC,0NAAS;0CACL,oBAAoB,KAAK,CAAC,OAAO,aAAa,OAAO,cAAc,aAAa,GAAG,CAAC,SAAC,KAAK;yDAEvF,6LAAC;wCAAgB,OAAO;wCAAO,KAAK;wCAAK,MAAM;wCAAM,SAAS;mDAAM,YAAY,KAAK;;wCACjF,gBAAgB,kBAAkB,KAAK;uCADjC;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ9B,6LAAC,0OAAa;0BACV,cAAA,6LAAC,kMAAG;oBAAC,SAAS;oBAAQ,MAAM;oBAAG,eAAe;oBAAU,gBAAgB;;wBACnE,gCAAkB,6LAAC,kNAAO;;;;;wBAC1B,gCAAkB,6LAAC,kJAAS;4BAAC,QAAQ;4BAAI,MAAM,OAAO;4BACnD,YAAY,KAAK,IAAI,CAAC,oBAAoB,MAAM,GAAG;4BAAgB,SAAS;;;;;;sCAChF,6LAAC,kMAAG;4BAAC,SAAS;4BAAQ,gBAAgB;sCAClC,cAAA,6LAAC,8MAAM;gCAAC,MAAK;gCAAQ,kBAAkB;gCAAM,SAAQ;gCAAY,SAAS;2CAAM,SAAS;;gCAAO,SAAS;0CACpG,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQtC;GA5GM;;QACW,2KAAW;QAO2B,gKAAgB;;;KARjE;AA6GN,SAAS,IAAI,KAAK;IACd,IAAQ,MAA8C,MAA9C,KAAK,QAAyC,MAAzC,OAAO,OAAkC,MAAlC,MAAM,UAA4B,MAA5B,SAAS,iBAAmB,MAAnB;IACnC,qBACI,6LAAC,yKAAQ;kBACL,cAAA,6LAAC,sNAAQ;YAAC,OAAO;gBACb,QAAQ;YACZ;YAAG,SAAS;YAER,IAAI;gBAAE,oCAAoC;oBAAE,QAAQ;gBAAE;YAAE;;8BACxD,6LAAC,0NAAS;oBAAC,SAAQ;8BACf,cAAA,6LAAC,sNAAQ;wBACL,OAAM;wBACN,SAAS;wBACT,YAAY;4BACR,mBAAmB;wBACvB;;;;;;;;;;;8BAGR,6LAAC,0NAAS;oBAAC,IAAI,8HAAM;8BAAI,IAAI,IAAI;;;;;;;WAX5B;;;;;;;;;;AAerB;MAtBS;uCAwBM"}}]
}